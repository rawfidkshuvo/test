(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function e2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Gd={exports:{}},kl={};var n_;function t2(){if(n_)return kl;n_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return kl.Fragment=e,kl.jsx=n,kl.jsxs=n,kl}var i_;function n2(){return i_||(i_=1,Gd.exports=t2()),Gd.exports}var E=n2(),Kd={exports:{}},ke={};var s_;function i2(){if(s_)return ke;s_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.iterator;function H(D){return D===null||typeof D!="object"?null:(D=O&&D[O]||D["@@iterator"],typeof D=="function"?D:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,re={};function be(D,G,ie){this.props=D,this.context=G,this.refs=re,this.updater=ie||J}be.prototype.isReactComponent={},be.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},be.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Ve(){}Ve.prototype=be.prototype;function Ne(D,G,ie){this.props=D,this.context=G,this.refs=re,this.updater=ie||J}var rt=Ne.prototype=new Ve;rt.constructor=Ne,se(rt,be.prototype),rt.isPureReactComponent=!0;var Et=Array.isArray;function qe(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function C(D,G,ie){var oe=ie.ref;return{$$typeof:s,type:D,key:G,ref:oe!==void 0?oe:null,props:ie}}function M(D,G){return C(D.type,G,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function L(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ie){return G[ie]})}var w=/\/+/g;function ct(D,G){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):G.toString(36)}function bt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(qe,qe):(D.status="pending",D.then(function(G){D.status==="pending"&&(D.status="fulfilled",D.value=G)},function(G){D.status==="pending"&&(D.status="rejected",D.reason=G)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function F(D,G,ie,oe,Te){var Oe=typeof D;(Oe==="undefined"||Oe==="boolean")&&(D=null);var De=!1;if(D===null)De=!0;else switch(Oe){case"bigint":case"string":case"number":De=!0;break;case"object":switch(D.$$typeof){case s:case e:De=!0;break;case b:return De=D._init,F(De(D._payload),G,ie,oe,Te)}}if(De)return Te=Te(D),De=oe===""?"."+ct(D,0):oe,Et(Te)?(ie="",De!=null&&(ie=De.replace(w,"$&/")+"/"),F(Te,G,ie,"",function(xi){return xi})):Te!=null&&(I(Te)&&(Te=M(Te,ie+(Te.key==null||D&&D.key===Te.key?"":(""+Te.key).replace(w,"$&/")+"/")+De)),G.push(Te)),1;De=0;var Tt=oe===""?".":oe+":";if(Et(D))for(var nt=0;nt<D.length;nt++)oe=D[nt],Oe=Tt+ct(oe,nt),De+=F(oe,G,ie,Oe,Te);else if(nt=H(D),typeof nt=="function")for(D=nt.call(D),nt=0;!(oe=D.next()).done;)oe=oe.value,Oe=Tt+ct(oe,nt++),De+=F(oe,G,ie,Oe,Te);else if(Oe==="object"){if(typeof D.then=="function")return F(bt(D),G,ie,oe,Te);throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return De}function ne(D,G,ie){if(D==null)return D;var oe=[],Te=0;return F(D,oe,"","",function(Oe){return G.call(ie,Oe,Te++)}),oe}function me(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=ie)},function(ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=ie)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var Qe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ie={map:ne,forEach:function(D,G,ie){ne(D,function(){G.apply(this,arguments)},ie)},count:function(D){var G=0;return ne(D,function(){G++}),G},toArray:function(D){return ne(D,function(G){return G})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ke.Activity=S,ke.Children=Ie,ke.Component=be,ke.Fragment=n,ke.Profiler=l,ke.PureComponent=Ne,ke.StrictMode=r,ke.Suspense=_,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ke.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},ke.cache=function(D){return function(){return D.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(D,G,ie){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var oe=se({},D.props),Te=D.key;if(G!=null)for(Oe in G.key!==void 0&&(Te=""+G.key),G)!x.call(G,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&G.ref===void 0||(oe[Oe]=G[Oe]);var Oe=arguments.length-2;if(Oe===1)oe.children=ie;else if(1<Oe){for(var De=Array(Oe),Tt=0;Tt<Oe;Tt++)De[Tt]=arguments[Tt+2];oe.children=De}return C(D.type,Te,oe)},ke.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},ke.createElement=function(D,G,ie){var oe,Te={},Oe=null;if(G!=null)for(oe in G.key!==void 0&&(Oe=""+G.key),G)x.call(G,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Te[oe]=G[oe]);var De=arguments.length-2;if(De===1)Te.children=ie;else if(1<De){for(var Tt=Array(De),nt=0;nt<De;nt++)Tt[nt]=arguments[nt+2];Te.children=Tt}if(D&&D.defaultProps)for(oe in De=D.defaultProps,De)Te[oe]===void 0&&(Te[oe]=De[oe]);return C(D,Oe,Te)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(D){return{$$typeof:g,render:D}},ke.isValidElement=I,ke.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:me}},ke.memo=function(D,G){return{$$typeof:y,type:D,compare:G===void 0?null:G}},ke.startTransition=function(D){var G=N.T,ie={};N.T=ie;try{var oe=D(),Te=N.S;Te!==null&&Te(ie,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(qe,Qe)}catch(Oe){Qe(Oe)}finally{G!==null&&ie.types!==null&&(G.types=ie.types),N.T=G}},ke.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ke.use=function(D){return N.H.use(D)},ke.useActionState=function(D,G,ie){return N.H.useActionState(D,G,ie)},ke.useCallback=function(D,G){return N.H.useCallback(D,G)},ke.useContext=function(D){return N.H.useContext(D)},ke.useDebugValue=function(){},ke.useDeferredValue=function(D,G){return N.H.useDeferredValue(D,G)},ke.useEffect=function(D,G){return N.H.useEffect(D,G)},ke.useEffectEvent=function(D){return N.H.useEffectEvent(D)},ke.useId=function(){return N.H.useId()},ke.useImperativeHandle=function(D,G,ie){return N.H.useImperativeHandle(D,G,ie)},ke.useInsertionEffect=function(D,G){return N.H.useInsertionEffect(D,G)},ke.useLayoutEffect=function(D,G){return N.H.useLayoutEffect(D,G)},ke.useMemo=function(D,G){return N.H.useMemo(D,G)},ke.useOptimistic=function(D,G){return N.H.useOptimistic(D,G)},ke.useReducer=function(D,G,ie){return N.H.useReducer(D,G,ie)},ke.useRef=function(D){return N.H.useRef(D)},ke.useState=function(D){return N.H.useState(D)},ke.useSyncExternalStore=function(D,G,ie){return N.H.useSyncExternalStore(D,G,ie)},ke.useTransition=function(){return N.H.useTransition()},ke.version="19.2.3",ke}var r_;function Gm(){return r_||(r_=1,Kd.exports=i2()),Kd.exports}var We=Gm();const s2=e2(We);var Yd={exports:{}},Ml={},Qd={exports:{}},$d={};var a_;function r2(){return a_||(a_=1,(function(s){function e(F,ne){var me=F.length;F.push(ne);e:for(;0<me;){var Qe=me-1>>>1,Ie=F[Qe];if(0<l(Ie,ne))F[Qe]=ne,F[me]=Ie,me=Qe;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var ne=F[0],me=F.pop();if(me!==ne){F[0]=me;e:for(var Qe=0,Ie=F.length,D=Ie>>>1;Qe<D;){var G=2*(Qe+1)-1,ie=F[G],oe=G+1,Te=F[oe];if(0>l(ie,me))oe<Ie&&0>l(Te,ie)?(F[Qe]=Te,F[oe]=me,Qe=oe):(F[Qe]=ie,F[G]=me,Qe=G);else if(oe<Ie&&0>l(Te,me))F[Qe]=Te,F[oe]=me,Qe=oe;else break e}}return ne}function l(F,ne){var me=F.sortIndex-ne.sortIndex;return me!==0?me:F.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var _=[],y=[],b=1,S=null,O=3,H=!1,J=!1,se=!1,re=!1,be=typeof setTimeout=="function"?setTimeout:null,Ve=typeof clearTimeout=="function"?clearTimeout:null,Ne=typeof setImmediate<"u"?setImmediate:null;function rt(F){for(var ne=n(y);ne!==null;){if(ne.callback===null)r(y);else if(ne.startTime<=F)r(y),ne.sortIndex=ne.expirationTime,e(_,ne);else break;ne=n(y)}}function Et(F){if(se=!1,rt(F),!J)if(n(_)!==null)J=!0,qe||(qe=!0,L());else{var ne=n(y);ne!==null&&bt(Et,ne.startTime-F)}}var qe=!1,N=-1,x=5,C=-1;function M(){return re?!0:!(s.unstable_now()-C<x)}function I(){if(re=!1,qe){var F=s.unstable_now();C=F;var ne=!0;try{e:{J=!1,se&&(se=!1,Ve(N),N=-1),H=!0;var me=O;try{t:{for(rt(F),S=n(_);S!==null&&!(S.expirationTime>F&&M());){var Qe=S.callback;if(typeof Qe=="function"){S.callback=null,O=S.priorityLevel;var Ie=Qe(S.expirationTime<=F);if(F=s.unstable_now(),typeof Ie=="function"){S.callback=Ie,rt(F),ne=!0;break t}S===n(_)&&r(_),rt(F)}else r(_);S=n(_)}if(S!==null)ne=!0;else{var D=n(y);D!==null&&bt(Et,D.startTime-F),ne=!1}}break e}finally{S=null,O=me,H=!1}ne=void 0}}finally{ne?L():qe=!1}}}var L;if(typeof Ne=="function")L=function(){Ne(I)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ct=w.port2;w.port1.onmessage=I,L=function(){ct.postMessage(null)}}else L=function(){be(I,0)};function bt(F,ne){N=be(function(){F(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return O},s.unstable_next=function(F){switch(O){case 1:case 2:case 3:var ne=3;break;default:ne=O}var me=O;O=ne;try{return F()}finally{O=me}},s.unstable_requestPaint=function(){re=!0},s.unstable_runWithPriority=function(F,ne){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var me=O;O=F;try{return ne()}finally{O=me}},s.unstable_scheduleCallback=function(F,ne,me){var Qe=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Qe+me:Qe):me=Qe,F){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=me+Ie,F={id:b++,callback:ne,priorityLevel:F,startTime:me,expirationTime:Ie,sortIndex:-1},me>Qe?(F.sortIndex=me,e(y,F),n(_)===null&&F===n(y)&&(se?(Ve(N),N=-1):se=!0,bt(Et,me-Qe))):(F.sortIndex=Ie,e(_,F),J||H||(J=!0,qe||(qe=!0,L()))),F},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(F){var ne=O;return function(){var me=O;O=ne;try{return F.apply(this,arguments)}finally{O=me}}}})($d)),$d}var o_;function a2(){return o_||(o_=1,Qd.exports=r2()),Qd.exports}var Wd={exports:{}},cn={};var l_;function o2(){if(l_)return cn;l_=1;var s=Gm();function e(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(_,y,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:_,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cn.createPortal=function(_,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(_,y,null,b)},cn.flushSync=function(_){var y=d.T,b=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=y,r.p=b,r.d.f()}},cn.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(_,y))},cn.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},cn.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var b=y.as,S=g(b,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,H=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:O,fetchPriority:H}):b==="script"&&r.d.X(_,{crossOrigin:S,integrity:O,fetchPriority:H,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},cn.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);r.d.M(_,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(_)},cn.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,S=g(b,y.crossOrigin);r.d.L(_,b,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},cn.preloadModule=function(_,y){if(typeof _=="string")if(y){var b=g(y.as,y.crossOrigin);r.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(_)},cn.requestFormReset=function(_){r.d.r(_)},cn.unstable_batchedUpdates=function(_,y){return _(y)},cn.useFormState=function(_,y,b){return d.H.useFormState(_,y,b)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var u_;function l2(){if(u_)return Wd.exports;u_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Wd.exports=o2(),Wd.exports}var c_;function u2(){if(c_)return Ml;c_=1;var s=a2(),e=Gm(),n=l2();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function _(t){if(c(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return _(h),t;if(f===o)return _(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var p=!1,T=h.child;T;){if(T===a){p=!0,a=h,o=f;break}if(T===o){p=!0,o=h,a=f;break}T=T.sibling}if(!p){for(T=f.child;T;){if(T===a){p=!0,a=f,o=h;break}if(T===o){p=!0,o=f,a=h;break}T=T.sibling}if(!p)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,O=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),Ve=Symbol.for("react.consumer"),Ne=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function ct(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case se:return"Fragment";case be:return"Profiler";case re:return"StrictMode";case Et:return"Suspense";case qe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case J:return"Portal";case Ne:return t.displayName||"Context";case Ve:return(t._context.displayName||"Context")+".Consumer";case rt:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:ct(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return ct(t(i))}catch{}}return null}var bt=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Qe=[],Ie=-1;function D(t){return{current:t}}function G(t){0>Ie||(t.current=Qe[Ie],Qe[Ie]=null,Ie--)}function ie(t,i){Ie++,Qe[Ie]=t.current,t.current=i}var oe=D(null),Te=D(null),Oe=D(null),De=D(null);function Tt(t,i){switch(ie(Oe,i),ie(Te,t),ie(oe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?xy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=xy(i),t=wy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(oe),ie(oe,t)}function nt(){G(oe),G(Te),G(Oe)}function xi(t){t.memoizedState!==null&&ie(De,t);var i=oe.current,a=wy(i,t.type);i!==a&&(ie(Te,t),ie(oe,a))}function Ds(t){Te.current===t&&(G(oe),G(Te)),De.current===t&&(G(De),Cl._currentValue=me)}var ks,Ms;function Fn(t){if(ks===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ks=i&&i[1]||"",Ms=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+t+Ms}var Vs=!1;function ts(t,i){if(!t||Vs)return"";Vs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(q){var P=q}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(q){P=q}t.call(Q.prototype)}}else{try{throw Error()}catch(q){P=q}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(q){if(q&&P&&typeof q.stack=="string")return[q.stack,P.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),p=f[0],T=f[1];if(p&&T){var R=p.split(`
`),z=T.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===z.length)for(o=R.length-1,h=z.length-1;1<=o&&0<=h&&R[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==z[h]){var K=`
`+R[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{Vs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Fn(a):""}function Ls(t,i){switch(t.tag){case 26:case 27:case 5:return Fn(t.type);case 16:return Fn("Lazy");case 13:return t.child!==i&&i!==null?Fn("Suspense Fallback"):Fn("Suspense");case 19:return Fn("SuspenseList");case 0:case 15:return ts(t.type,!1);case 11:return ts(t.type.render,!1);case 1:return ts(t.type,!0);case 31:return Fn("Activity");default:return""}}function ns(t){try{var i="",a=null;do i+=Ls(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Rt=Object.prototype.hasOwnProperty,It=s.unstable_scheduleCallback,wi=s.unstable_cancelCallback,ko=s.unstable_shouldYield,va=s.unstable_requestPaint,en=s.unstable_now,Gn=s.unstable_getCurrentPriorityLevel,ee=s.unstable_ImmediatePriority,Z=s.unstable_UserBlockingPriority,le=s.unstable_NormalPriority,ae=s.unstable_LowPriority,xe=s.unstable_IdlePriority,X=s.log,_e=s.unstable_setDisableYieldValue,fe=null,pe=null;function Le(t){if(typeof X=="function"&&_e(t),pe&&typeof pe.setStrictMode=="function")try{pe.setStrictMode(fe,t)}catch{}}var Ze=Math.clz32?Math.clz32:ui,Dn=Math.log,Je=Math.LN2;function ui(t){return t>>>=0,t===0?32:31-(Dn(t)/Je|0)|0}var $t=256,Kn=262144,ht=4194304;function kn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yn(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,p=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~f,o!==0?h=kn(o):(p&=T,p!==0?h=kn(p):a||(a=T&~t,a!==0&&(h=kn(a))))):(T=o&~f,T!==0?h=kn(T):p!==0?h=kn(p):a||(a=o&~t,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ci(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Qh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yu(){var t=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),t}function Ri(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Mr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $h(t,i,a,o,h,f){var p=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,R=t.expirationTimes,z=t.hiddenUpdates;for(a=p&~a;0<a;){var K=31-Ze(a),Q=1<<K;T[K]=0,R[K]=-1;var P=z[K];if(P!==null)for(z[K]=null,K=0;K<P.length;K++){var q=P[K];q!==null&&(q.lane&=-536870913)}a&=~Q}o!==0&&Vr(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(p&~i))}function Vr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Ze(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Mo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Ze(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Vo(t,i){var a=i&-i;return a=(a&42)!==0?1:Lr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Lr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function is(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _u(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:$y(t.type))}function hi(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var fi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+fi,Wt="__reactProps$"+fi,Ni="__reactContainer$"+fi,Ea="__reactEvents$"+fi,Wh="__reactListeners$"+fi,vu="__reactHandles$"+fi,Eu="__reactResources$"+fi,Ci="__reactMarker$"+fi;function ba(t){delete t[Vt],delete t[Wt],delete t[Ea],delete t[Wh],delete t[vu]}function Ii(t){var i=t[Vt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ni]||a[Vt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=ky(t);t!==null;){if(a=t[Vt])return a;t=ky(t)}return i}t=a,a=t.parentNode}return null}function Qn(t){if(t=t[Vt]||t[Ni]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Mn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function Oi(t){var i=t[Eu];return i||(i=t[Eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(t){t[Ci]=!0}var Lo=new Set,jo={};function Di(t,i){ki(t,i),ki(t+"Capture",i)}function ki(t,i){for(jo[t]=i,t=0;t<i.length;t++)Lo.add(i[t])}var Uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Po={};function bu(t){return Rt.call(Po,t)?!0:Rt.call(zo,t)?!1:Uo.test(t)?Po[t]=!0:(zo[t]=!0,!1)}function Ta(t,i,a){if(bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Vn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function jt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function js(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bo(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(p){a=""+p,f.call(this,p)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ot(t){if(!t._valueTracker){var i=js(t)?"checked":"value";t._valueTracker=Bo(t,i,""+t[i])}}function jr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=js(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Mi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ur=/[\n"\\]/g;function En(t){return t.replace(Ur,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Aa(t,i,a,o,h,f,p,T){t.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?t.type=p:t.removeAttribute("type"),i!=null?p==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Xt(i)):t.value!==""+Xt(i)&&(t.value=""+Xt(i)):p!=="submit"&&p!=="reset"||t.removeAttribute("value"),i!=null?qo(t,p,Xt(i)):a!=null?qo(t,p,Xt(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Xt(T):t.removeAttribute("name")}function Tu(t,i,a,o,h,f,p,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){ot(t);return}a=a!=null?""+Xt(a):"",i=i!=null?""+Xt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.name=p),ot(t)}function qo(t,i,a){i==="number"&&Mi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Us(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Xt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Au(t,i,a){if(i!=null&&(i=""+Xt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Xt(a):""}function zs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(bt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Xt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),ot(t)}function bn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ho(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Su.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Fo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Ho(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&Ho(t,f,i[f])}function Sa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(t){return Ps.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function di(){}var Go=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bs=null,Vi=null;function zr(t){var i=Qn(t);if(i&&(t=i.stateNode)){var a=t[Wt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Aa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Wt]||null;if(!h)throw Error(r(90));Aa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&jr(o)}break e;case"textarea":Au(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Us(t,!!a.multiple,i,!1)}}}var wa=!1;function qs(t,i,a){if(wa)return t(i,a);wa=!0;try{var o=t(i);return o}finally{if(wa=!1,(Bs!==null||Vi!==null)&&(_c(),Bs&&(i=Bs,t=Vi,Vi=Bs=null,zr(i),t)))for(i=0;i<t.length;i++)zr(t[i])}}function mi(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Wt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Wn)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Pr=!1}var Li=null,Ko=null,Br=null;function Yo(){if(Br)return Br;var t,i=Ko,a=i.length,o,h="value"in Li?Li.value:Li.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var p=a-t;for(o=1;o<=p&&i[a-o]===h[f-o];o++);return Br=h.slice(t,1<o?1-o:void 0)}function qr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function pi(){return!1}function tn(t){function i(a,o,h,f,p){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ss:pi,this.isPropagationStopped=pi,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),i}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=tn(rs),Hs=S({},rs,{view:0,detail:0}),Qo=tn(Hs),Fs,Ra,Ui,Na=S({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(Fs=t.screenX-Ui.screenX,Ra=t.screenY-Ui.screenY):Ra=Fs=0,Ui=t),Fs)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),$o=tn(Na),Hr=S({},Na,{dataTransfer:0}),wu=tn(Hr),Ru=S({},Hs,{relatedTarget:0}),Fr=tn(Ru),Wo=S({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=tn(Wo),Ca=S({},rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cu=tn(Ca),Iu=S({},rs,{data:0}),zi=tn(Iu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ku[t])?!!i[t]:!1}function Gs(){return Mu}var pn=S({},Hs,{key:function(t){if(t.key){var i=Ou[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(t){return t.type==="keypress"?qr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vu=tn(pn),Lu=S({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),as=tn(Lu),u=S({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),m=tn(u),v=S({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=tn(v),j=S({},Na,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B=tn(j),te=S({},rs,{newState:0,oldState:0}),je=tn(te),Ot=[9,13,27,32],it=Wn&&"CompositionEvent"in window,At=null;Wn&&"documentMode"in document&&(At=document.documentMode);var Xn=Wn&&"TextEvent"in window&&!At,Pi=Wn&&(!it||At&&8<At&&11>=At),gi=" ",yi=!1;function Gr(t,i){switch(t){case"keyup":return Ot.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oa=!1;function Sb(t,i){switch(t){case"compositionend":return Ia(i);case"keypress":return i.which!==32?null:(yi=!0,gi);case"textInput":return t=i.data,t===gi&&yi?null:t;default:return null}}function xb(t,i){if(Oa)return t==="compositionend"||!it&&Gr(t,i)?(t=Yo(),Br=Ko=Li=null,Oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pi&&i.locale!=="ko"?null:i.data;default:return null}}var wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!wb[t.type]:i==="textarea"}function jp(t,i,a,o){Bs?Vi?Vi.push(o):Vi=[o]:Bs=o,i=xc(i,"onChange"),0<i.length&&(a=new ji("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Xo=null,Zo=null;function Rb(t){vy(t,0)}function ju(t){var i=Mn(t);if(jr(i))return t}function Up(t,i){if(t==="change")return i}var zp=!1;if(Wn){var Xh;if(Wn){var Zh="oninput"in document;if(!Zh){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),Zh=typeof Pp.oninput=="function"}Xh=Zh}else Xh=!1;zp=Xh&&(!document.documentMode||9<document.documentMode)}function Bp(){Xo&&(Xo.detachEvent("onpropertychange",qp),Zo=Xo=null)}function qp(t){if(t.propertyName==="value"&&ju(Zo)){var i=[];jp(i,Zo,t,$n(t)),qs(Rb,i)}}function Nb(t,i,a){t==="focusin"?(Bp(),Xo=i,Zo=a,Xo.attachEvent("onpropertychange",qp)):t==="focusout"&&Bp()}function Cb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(Zo)}function Ib(t,i){if(t==="click")return ju(i)}function Ob(t,i){if(t==="input"||t==="change")return ju(i)}function Db(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ln=typeof Object.is=="function"?Object.is:Db;function Jo(t,i){if(Ln(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Rt.call(i,h)||!Ln(t[h],i[h]))return!1}return!0}function Hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,i){var a=Hp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hp(a)}}function Gp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Gp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Kp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Mi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Mi(t.document)}return i}function Jh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var kb=Wn&&"documentMode"in document&&11>=document.documentMode,Da=null,ef=null,el=null,tf=!1;function Yp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tf||Da==null||Da!==Mi(o)||(o=Da,"selectionStart"in o&&Jh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),el&&Jo(el,o)||(el=o,o=xc(ef,"onSelect"),0<o.length&&(i=new ji("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Da)))}function Kr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ka={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},nf={},Qp={};Wn&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Yr(t){if(nf[t])return nf[t];if(!ka[t])return t;var i=ka[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Qp)return nf[t]=i[a];return t}var $p=Yr("animationend"),Wp=Yr("animationiteration"),Xp=Yr("animationstart"),Mb=Yr("transitionrun"),Vb=Yr("transitionstart"),Lb=Yr("transitioncancel"),Zp=Yr("transitionend"),Jp=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function _i(t,i){Jp.set(t,i),Di(i,[t])}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Zn=[],Ma=0,rf=0;function zu(){for(var t=Ma,i=rf=Ma=0;i<t;){var a=Zn[i];Zn[i++]=null;var o=Zn[i];Zn[i++]=null;var h=Zn[i];Zn[i++]=null;var f=Zn[i];if(Zn[i++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}f!==0&&eg(a,h,f)}}function Pu(t,i,a,o){Zn[Ma++]=t,Zn[Ma++]=i,Zn[Ma++]=a,Zn[Ma++]=o,rf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function af(t,i,a,o){return Pu(t,i,a,o),Bu(t)}function Qr(t,i){return Pu(t,null,null,i),Bu(t)}function eg(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Ze(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Bu(t){if(50<Tl)throw Tl=0,pd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Va={};function jb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,i,a,o){return new jb(t,i,a,o)}function of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function os(t,i){var a=t.alternate;return a===null?(a=jn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function tg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function qu(t,i,a,o,h,f){var p=0;if(o=t,typeof t=="function")of(t)&&(p=1);else if(typeof t=="string")p=qT(t,a,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=jn(31,a,i,h),t.elementType=C,t.lanes=f,t;case se:return $r(a.children,h,f,i);case re:p=8,h|=24;break;case be:return t=jn(12,a,i,h|2),t.elementType=be,t.lanes=f,t;case Et:return t=jn(13,a,i,h),t.elementType=Et,t.lanes=f,t;case qe:return t=jn(19,a,i,h),t.elementType=qe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ne:p=10;break e;case Ve:p=9;break e;case rt:p=11;break e;case N:p=14;break e;case x:p=16,o=null;break e}p=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=jn(p,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function $r(t,i,a,o){return t=jn(7,t,o,i),t.lanes=a,t}function lf(t,i,a){return t=jn(6,t,null,i),t.lanes=a,t}function ng(t){var i=jn(18,null,null,0);return i.stateNode=t,i}function uf(t,i,a){return i=jn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ig=new WeakMap;function Jn(t,i){if(typeof t=="object"&&t!==null){var a=ig.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ns(i)},ig.set(t,i),i)}return{value:t,source:i,stack:ns(i)}}var La=[],ja=0,Hu=null,tl=0,ei=[],ti=0,Ks=null,Bi=1,qi="";function ls(t,i){La[ja++]=tl,La[ja++]=Hu,Hu=t,tl=i}function sg(t,i,a){ei[ti++]=Bi,ei[ti++]=qi,ei[ti++]=Ks,Ks=t;var o=Bi;t=qi;var h=32-Ze(o)-1;o&=~(1<<h),a+=1;var f=32-Ze(i)+h;if(30<f){var p=h-h%5;f=(o&(1<<p)-1).toString(32),o>>=p,h-=p,Bi=1<<32-Ze(i)+h|a<<h|o,qi=f+t}else Bi=1<<f|a<<h|o,qi=t}function cf(t){t.return!==null&&(ls(t,1),sg(t,1,0))}function hf(t){for(;t===Hu;)Hu=La[--ja],La[ja]=null,tl=La[--ja],La[ja]=null;for(;t===Ks;)Ks=ei[--ti],ei[ti]=null,qi=ei[--ti],ei[ti]=null,Bi=ei[--ti],ei[ti]=null}function rg(t,i){ei[ti++]=Bi,ei[ti++]=qi,ei[ti++]=Ks,Bi=i.id,qi=i.overflow,Ks=t}var nn=null,yt=null,$e=!1,Ys=null,ni=!1,ff=Error(r(519));function Qs(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(Jn(i,t)),ff}function ag(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[Vt]=t,i[Wt]=o,a){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(a=0;a<Sl.length;a++)Be(Sl[a],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":Be("invalid",i),Tu(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Be("invalid",i);break;case"textarea":Be("invalid",i),zs(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Ay(i.textContent,a)?(o.popover!=null&&(Be("beforetoggle",i),Be("toggle",i)),o.onScroll!=null&&Be("scroll",i),o.onScrollEnd!=null&&Be("scrollend",i),o.onClick!=null&&(i.onclick=di),i=!0):i=!1,i||Qs(t,!0)}function og(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:nn=nn.return}}function Ua(t){if(t!==nn)return!1;if(!$e)return og(t),$e=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&yt&&Qs(t),og(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));yt=Dy(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));yt=Dy(t)}else i===27?(i=yt,lr(t.type)?(t=Vd,Vd=null,yt=t):yt=i):yt=nn?si(t.stateNode.nextSibling):null;return!0}function Wr(){yt=nn=null,$e=!1}function df(){var t=Ys;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),Ys=null),t}function nl(t){Ys===null?Ys=[t]:Ys.push(t)}var mf=D(null),Xr=null,us=null;function $s(t,i,a){ie(mf,i._currentValue),i._currentValue=a}function cs(t){t._currentValue=mf.current,G(mf)}function pf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function gf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var p=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var R=0;R<i.length;R++)if(T.context===i[R]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),pf(f.return,a,t),o||(p=null);break e}f=T.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(r(341));p.lanes|=a,f=p.alternate,f!==null&&(f.lanes|=a),pf(p,a,t),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function za(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(r(387));if(p=p.memoizedProps,p!==null){var T=h.type;Ln(h.pendingProps.value,p.value)||(t!==null?t.push(T):t=[T])}}else if(h===De.current){if(p=h.alternate,p===null)throw Error(r(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Cl):t=[Cl])}h=h.return}t!==null&&gf(i,t,a,o),i.flags|=262144}function Fu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zr(t){Xr=t,us=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return lg(Xr,t)}function Gu(t,i){return Xr===null&&Zr(t),lg(t,i)}function lg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},us===null){if(t===null)throw Error(r(308));us=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else us=us.next=i;return a}var Ub=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},zb=s.unstable_scheduleCallback,Pb=s.unstable_NormalPriority,Ut={$$typeof:Ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yf(){return{controller:new Ub,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&zb(Pb,function(){t.controller.abort()})}var sl=null,_f=0,Pa=0,Ba=null;function Bb(t,i){if(sl===null){var a=sl=[];_f=0,Pa=bd(),Ba={status:"pending",value:void 0,then:function(o){a.push(o)}}}return _f++,i.then(ug,ug),i}function ug(){if(--_f===0&&sl!==null){Ba!==null&&(Ba.status="fulfilled");var t=sl;sl=null,Pa=0,Ba=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function qb(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var cg=F.S;F.S=function(t,i){Y0=en(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Bb(t,i),cg!==null&&cg(t,i)};var Jr=D(null);function vf(){var t=Jr.current;return t!==null?t:gt.pooledCache}function Ku(t,i){i===null?ie(Jr,Jr.current):ie(Jr,i.pool)}function hg(){var t=vf();return t===null?null:{parent:Ut._currentValue,pool:t}}var qa=Error(r(460)),Ef=Error(r(474)),Yu=Error(r(542)),Qu={then:function(){}};function fg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(di,di),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t;default:if(typeof i.status=="string")i.then(di,di);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t}throw ta=i,qa}}function ea(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,qa):a}}var ta=null;function mg(){if(ta===null)throw Error(r(459));var t=ta;return ta=null,t}function pg(t){if(t===qa||t===Yu)throw Error(r(483))}var Ha=null,rl=0;function $u(t){var i=rl;return rl+=1,Ha===null&&(Ha=[]),dg(Ha,t,i)}function al(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Wu(t,i){throw i.$$typeof===O?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function gg(t){function i(V,k){if(t){var U=V.deletions;U===null?(V.deletions=[k],V.flags|=16):U.push(k)}}function a(V,k){if(!t)return null;for(;k!==null;)i(V,k),k=k.sibling;return null}function o(V){for(var k=new Map;V!==null;)V.key!==null?k.set(V.key,V):k.set(V.index,V),V=V.sibling;return k}function h(V,k){return V=os(V,k),V.index=0,V.sibling=null,V}function f(V,k,U){return V.index=U,t?(U=V.alternate,U!==null?(U=U.index,U<k?(V.flags|=67108866,k):U):(V.flags|=67108866,k)):(V.flags|=1048576,k)}function p(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function T(V,k,U,Y){return k===null||k.tag!==6?(k=lf(U,V.mode,Y),k.return=V,k):(k=h(k,U),k.return=V,k)}function R(V,k,U,Y){var ge=U.type;return ge===se?K(V,k,U.props.children,Y,U.key):k!==null&&(k.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&ea(ge)===k.type)?(k=h(k,U.props),al(k,U),k.return=V,k):(k=qu(U.type,U.key,U.props,null,V.mode,Y),al(k,U),k.return=V,k)}function z(V,k,U,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=uf(U,V.mode,Y),k.return=V,k):(k=h(k,U.children||[]),k.return=V,k)}function K(V,k,U,Y,ge){return k===null||k.tag!==7?(k=$r(U,V.mode,Y,ge),k.return=V,k):(k=h(k,U),k.return=V,k)}function Q(V,k,U){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=lf(""+k,V.mode,U),k.return=V,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case H:return U=qu(k.type,k.key,k.props,null,V.mode,U),al(U,k),U.return=V,U;case J:return k=uf(k,V.mode,U),k.return=V,k;case x:return k=ea(k),Q(V,k,U)}if(bt(k)||L(k))return k=$r(k,V.mode,U,null),k.return=V,k;if(typeof k.then=="function")return Q(V,$u(k),U);if(k.$$typeof===Ne)return Q(V,Gu(V,k),U);Wu(V,k)}return null}function P(V,k,U,Y){var ge=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ge!==null?null:T(V,k,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case H:return U.key===ge?R(V,k,U,Y):null;case J:return U.key===ge?z(V,k,U,Y):null;case x:return U=ea(U),P(V,k,U,Y)}if(bt(U)||L(U))return ge!==null?null:K(V,k,U,Y,null);if(typeof U.then=="function")return P(V,k,$u(U),Y);if(U.$$typeof===Ne)return P(V,k,Gu(V,U),Y);Wu(V,U)}return null}function q(V,k,U,Y,ge){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(U)||null,T(k,V,""+Y,ge);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return V=V.get(Y.key===null?U:Y.key)||null,R(k,V,Y,ge);case J:return V=V.get(Y.key===null?U:Y.key)||null,z(k,V,Y,ge);case x:return Y=ea(Y),q(V,k,U,Y,ge)}if(bt(Y)||L(Y))return V=V.get(U)||null,K(k,V,Y,ge,null);if(typeof Y.then=="function")return q(V,k,U,$u(Y),ge);if(Y.$$typeof===Ne)return q(V,k,U,Gu(k,Y),ge);Wu(k,Y)}return null}function ce(V,k,U,Y){for(var ge=null,et=null,he=k,ze=k=0,Fe=null;he!==null&&ze<U.length;ze++){he.index>ze?(Fe=he,he=null):Fe=he.sibling;var tt=P(V,he,U[ze],Y);if(tt===null){he===null&&(he=Fe);break}t&&he&&tt.alternate===null&&i(V,he),k=f(tt,k,ze),et===null?ge=tt:et.sibling=tt,et=tt,he=Fe}if(ze===U.length)return a(V,he),$e&&ls(V,ze),ge;if(he===null){for(;ze<U.length;ze++)he=Q(V,U[ze],Y),he!==null&&(k=f(he,k,ze),et===null?ge=he:et.sibling=he,et=he);return $e&&ls(V,ze),ge}for(he=o(he);ze<U.length;ze++)Fe=q(he,V,ze,U[ze],Y),Fe!==null&&(t&&Fe.alternate!==null&&he.delete(Fe.key===null?ze:Fe.key),k=f(Fe,k,ze),et===null?ge=Fe:et.sibling=Fe,et=Fe);return t&&he.forEach(function(dr){return i(V,dr)}),$e&&ls(V,ze),ge}function Ae(V,k,U,Y){if(U==null)throw Error(r(151));for(var ge=null,et=null,he=k,ze=k=0,Fe=null,tt=U.next();he!==null&&!tt.done;ze++,tt=U.next()){he.index>ze?(Fe=he,he=null):Fe=he.sibling;var dr=P(V,he,tt.value,Y);if(dr===null){he===null&&(he=Fe);break}t&&he&&dr.alternate===null&&i(V,he),k=f(dr,k,ze),et===null?ge=dr:et.sibling=dr,et=dr,he=Fe}if(tt.done)return a(V,he),$e&&ls(V,ze),ge;if(he===null){for(;!tt.done;ze++,tt=U.next())tt=Q(V,tt.value,Y),tt!==null&&(k=f(tt,k,ze),et===null?ge=tt:et.sibling=tt,et=tt);return $e&&ls(V,ze),ge}for(he=o(he);!tt.done;ze++,tt=U.next())tt=q(he,V,ze,tt.value,Y),tt!==null&&(t&&tt.alternate!==null&&he.delete(tt.key===null?ze:tt.key),k=f(tt,k,ze),et===null?ge=tt:et.sibling=tt,et=tt);return t&&he.forEach(function(JT){return i(V,JT)}),$e&&ls(V,ze),ge}function pt(V,k,U,Y){if(typeof U=="object"&&U!==null&&U.type===se&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case H:e:{for(var ge=U.key;k!==null;){if(k.key===ge){if(ge=U.type,ge===se){if(k.tag===7){a(V,k.sibling),Y=h(k,U.props.children),Y.return=V,V=Y;break e}}else if(k.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&ea(ge)===k.type){a(V,k.sibling),Y=h(k,U.props),al(Y,U),Y.return=V,V=Y;break e}a(V,k);break}else i(V,k);k=k.sibling}U.type===se?(Y=$r(U.props.children,V.mode,Y,U.key),Y.return=V,V=Y):(Y=qu(U.type,U.key,U.props,null,V.mode,Y),al(Y,U),Y.return=V,V=Y)}return p(V);case J:e:{for(ge=U.key;k!==null;){if(k.key===ge)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){a(V,k.sibling),Y=h(k,U.children||[]),Y.return=V,V=Y;break e}else{a(V,k);break}else i(V,k);k=k.sibling}Y=uf(U,V.mode,Y),Y.return=V,V=Y}return p(V);case x:return U=ea(U),pt(V,k,U,Y)}if(bt(U))return ce(V,k,U,Y);if(L(U)){if(ge=L(U),typeof ge!="function")throw Error(r(150));return U=ge.call(U),Ae(V,k,U,Y)}if(typeof U.then=="function")return pt(V,k,$u(U),Y);if(U.$$typeof===Ne)return pt(V,k,Gu(V,U),Y);Wu(V,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,k!==null&&k.tag===6?(a(V,k.sibling),Y=h(k,U),Y.return=V,V=Y):(a(V,k),Y=lf(U,V.mode,Y),Y.return=V,V=Y),p(V)):a(V,k)}return function(V,k,U,Y){try{rl=0;var ge=pt(V,k,U,Y);return Ha=null,ge}catch(he){if(he===qa||he===Yu)throw he;var et=jn(29,he,null,V.mode);return et.lanes=Y,et.return=V,et}}}var na=gg(!0),yg=gg(!1),Ws=!1;function bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zs(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(st&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Bu(t),eg(t,null,a),i}return Pu(t,o,i,a),Bu(t)}function ol(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Mo(t,a)}}function Af(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=p:f=f.next=p,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Sf=!1;function ll(){if(Sf){var t=Ba;if(t!==null)throw t}}function ul(t,i,a,o){Sf=!1;var h=t.updateQueue;Ws=!1;var f=h.firstBaseUpdate,p=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,z=R.next;R.next=null,p===null?f=z:p.next=z,p=R;var K=t.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==p&&(T===null?K.firstBaseUpdate=z:T.next=z,K.lastBaseUpdate=R))}if(f!==null){var Q=h.baseState;p=0,K=z=R=null,T=f;do{var P=T.lane&-536870913,q=P!==T.lane;if(q?(He&P)===P:(o&P)===P){P!==0&&P===Pa&&(Sf=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=t,Ae=T;P=i;var pt=a;switch(Ae.tag){case 1:if(ce=Ae.payload,typeof ce=="function"){Q=ce.call(pt,Q,P);break e}Q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Ae.payload,P=typeof ce=="function"?ce.call(pt,Q,P):ce,P==null)break e;Q=S({},Q,P);break e;case 2:Ws=!0}}P=T.callback,P!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[P]:q.push(P))}else q={lane:P,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(z=K=q,R=Q):K=K.next=q,p|=P;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);K===null&&(R=Q),h.baseState=R,h.firstBaseUpdate=z,h.lastBaseUpdate=K,f===null&&(h.shared.lanes=0),ir|=p,t.lanes=p,t.memoizedState=Q}}function _g(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function vg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)_g(a[t],i)}var Fa=D(null),Xu=D(0);function Eg(t,i){t=vs,ie(Xu,t),ie(Fa,i),vs=t|i.baseLanes}function xf(){ie(Xu,vs),ie(Fa,Fa.current)}function wf(){vs=Xu.current,G(Fa),G(Xu)}var Un=D(null),ii=null;function Js(t){var i=t.alternate;ie(Dt,Dt.current&1),ie(Un,t),ii===null&&(i===null||Fa.current!==null||i.memoizedState!==null)&&(ii=t)}function Rf(t){ie(Dt,Dt.current),ie(Un,t),ii===null&&(ii=t)}function bg(t){t.tag===22?(ie(Dt,Dt.current),ie(Un,t),ii===null&&(ii=t)):er()}function er(){ie(Dt,Dt.current),ie(Un,Un.current)}function zn(t){G(Un),ii===t&&(ii=null),G(Dt)}var Dt=D(0);function Zu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kd(a)||Md(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var hs=0,Ue=null,dt=null,zt=null,Ju=!1,Ga=!1,ia=!1,ec=0,cl=0,Ka=null,Hb=0;function Nt(){throw Error(r(321))}function Nf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Ln(t[a],i[a]))return!1;return!0}function Cf(t,i,a,o,h,f){return hs=f,Ue=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?s0:Ff,ia=!1,f=a(o,h),ia=!1,Ga&&(f=Ag(i,a,o,h)),Tg(t),f}function Tg(t){F.H=dl;var i=dt!==null&&dt.next!==null;if(hs=0,zt=dt=Ue=null,Ju=!1,cl=0,Ka=null,i)throw Error(r(300));t===null||Pt||(t=t.dependencies,t!==null&&Fu(t)&&(Pt=!0))}function Ag(t,i,a,o){Ue=t;var h=0;do{if(Ga&&(Ka=null),cl=0,Ga=!1,25<=h)throw Error(r(301));if(h+=1,zt=dt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=r0,f=i(a,o)}while(Ga);return f}function Fb(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?hl(i):i,t=t.useState()[0],(dt!==null?dt.memoizedState:null)!==t&&(Ue.flags|=1024),i}function If(){var t=ec!==0;return ec=0,t}function Of(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Df(t){if(Ju){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ju=!1}hs=0,zt=dt=Ue=null,Ga=!1,cl=ec=0,Ka=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ue.memoizedState=zt=t:zt=zt.next=t,zt}function kt(){if(dt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var i=zt===null?Ue.memoizedState:zt.next;if(i!==null)zt=i,dt=t;else{if(t===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},zt===null?Ue.memoizedState=zt=t:zt=zt.next=t}return zt}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hl(t){var i=cl;return cl+=1,Ka===null&&(Ka=[]),t=dg(Ka,t,i),i=Ue,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?s0:Ff),t}function nc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hl(t);if(t.$$typeof===Ne)return sn(t)}throw Error(r(438,String(t)))}function kf(t){var i=null,a=Ue.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ue.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=tc(),Ue.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=M;return i.index++,a}function fs(t,i){return typeof i=="function"?i(t):i}function ic(t){var i=kt();return Mf(i,dt,t)}function Mf(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var p=h.next;h.next=f.next,f.next=p}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=p=null,R=null,z=i,K=!1;do{var Q=z.lane&-536870913;if(Q!==z.lane?(He&Q)===Q:(hs&Q)===Q){var P=z.revertLane;if(P===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Q===Pa&&(K=!0);else if((hs&P)===P){z=z.next,P===Pa&&(K=!0);continue}else Q={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(T=R=Q,p=f):R=R.next=Q,Ue.lanes|=P,ir|=P;Q=z.action,ia&&a(f,Q),f=z.hasEagerState?z.eagerState:a(f,Q)}else P={lane:Q,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(T=R=P,p=f):R=R.next=P,Ue.lanes|=Q,ir|=Q;z=z.next}while(z!==null&&z!==i);if(R===null?p=f:R.next=T,!Ln(f,t.memoizedState)&&(Pt=!0,K&&(a=Ba,a!==null)))throw a;t.memoizedState=f,t.baseState=p,t.baseQueue=R,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Vf(t){var i=kt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var p=h=h.next;do f=t(f,p.action),p=p.next;while(p!==h);Ln(f,i.memoizedState)||(Pt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Sg(t,i,a){var o=Ue,h=kt(),f=$e;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var p=!Ln((dt||h).memoizedState,a);if(p&&(h.memoizedState=a,Pt=!0),h=h.queue,Uf(Rg.bind(null,o,h,t),[t]),h.getSnapshot!==i||p||zt!==null&&zt.memoizedState.tag&1){if(o.flags|=2048,Ya(9,{destroy:void 0},wg.bind(null,o,h,a,i),null),gt===null)throw Error(r(349));f||(hs&127)!==0||xg(o,i,a)}return a}function xg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ue.updateQueue,i===null?(i=tc(),Ue.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function wg(t,i,a,o){i.value=a,i.getSnapshot=o,Ng(i)&&Cg(t)}function Rg(t,i,a){return a(function(){Ng(i)&&Cg(t)})}function Ng(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Ln(t,a)}catch{return!0}}function Cg(t){var i=Qr(t,2);i!==null&&wn(i,t,2)}function Lf(t){var i=gn();if(typeof t=="function"){var a=t;if(t=a(),ia){Le(!0);try{a()}finally{Le(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:t},i}function Ig(t,i,a,o){return t.baseState=a,Mf(t,dt,typeof o=="function"?o:fs)}function Gb(t,i,a,o,h){if(ac(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};F.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Og(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Og(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=F.T,p={};F.T=p;try{var T=a(h,o),R=F.S;R!==null&&R(p,T),Dg(t,i,T)}catch(z){jf(t,i,z)}finally{f!==null&&p.types!==null&&(f.types=p.types),F.T=f}}else try{f=a(h,o),Dg(t,i,f)}catch(z){jf(t,i,z)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){kg(t,i,o)},function(o){return jf(t,i,o)}):kg(t,i,a)}function kg(t,i,a){i.status="fulfilled",i.value=a,Mg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Og(t,a)))}function jf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Mg(i),i=i.next;while(i!==o)}t.action=null}function Mg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Vg(t,i){return i}function Lg(t,i){if($e){var a=gt.formState;if(a!==null){e:{var o=Ue;if($e){if(yt){t:{for(var h=yt,f=ni;h.nodeType!==8;){if(!f){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){yt=si(h.nextSibling),o=h.data==="F!";break e}}Qs(o)}o=!1}o&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:i},a.queue=o,a=t0.bind(null,Ue,o),o.dispatch=a,o=Lf(!1),f=Hf.bind(null,Ue,!1,o.queue),o=gn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=Gb.bind(null,Ue,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function jg(t){var i=kt();return Ug(i,dt,t)}function Ug(t,i,a){if(i=Mf(t,i,Vg)[0],t=ic(fs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=hl(i)}catch(p){throw p===qa?Yu:p}else o=i;i=kt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ue.flags|=2048,Ya(9,{destroy:void 0},Kb.bind(null,h,a),null)),[o,f,t]}function Kb(t,i){t.action=i}function zg(t){var i=kt(),a=dt;if(a!==null)return Ug(i,a,t);kt(),i=i.memoizedState,a=kt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ya(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ue.updateQueue,i===null&&(i=tc(),Ue.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Pg(){return kt().memoizedState}function sc(t,i,a,o){var h=gn();Ue.flags|=t,h.memoizedState=Ya(1|i,{destroy:void 0},a,o===void 0?null:o)}function rc(t,i,a,o){var h=kt();o=o===void 0?null:o;var f=h.memoizedState.inst;dt!==null&&o!==null&&Nf(o,dt.memoizedState.deps)?h.memoizedState=Ya(i,f,a,o):(Ue.flags|=t,h.memoizedState=Ya(1|i,f,a,o))}function Bg(t,i){sc(8390656,8,t,i)}function Uf(t,i){rc(2048,8,t,i)}function Yb(t){Ue.flags|=4;var i=Ue.updateQueue;if(i===null)i=tc(),Ue.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function qg(t){var i=kt().memoizedState;return Yb({ref:i,nextImpl:t}),function(){if((st&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Hg(t,i){return rc(4,2,t,i)}function Fg(t,i){return rc(4,4,t,i)}function Gg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kg(t,i,a){a=a!=null?a.concat([t]):null,rc(4,4,Gg.bind(null,i,t),a)}function zf(){}function Yg(t,i){var a=kt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Nf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Qg(t,i){var a=kt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Nf(i,o[1]))return o[0];if(o=t(),ia){Le(!0);try{t()}finally{Le(!1)}}return a.memoizedState=[o,i],o}function Pf(t,i,a){return a===void 0||(hs&1073741824)!==0&&(He&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=$0(),Ue.lanes|=t,ir|=t,a)}function $g(t,i,a,o){return Ln(a,i)?a:Fa.current!==null?(t=Pf(t,a,o),Ln(t,i)||(Pt=!0),t):(hs&42)===0||(hs&1073741824)!==0&&(He&261930)===0?(Pt=!0,t.memoizedState=a):(t=$0(),Ue.lanes|=t,ir|=t,i)}function Wg(t,i,a,o,h){var f=ne.p;ne.p=f!==0&&8>f?f:8;var p=F.T,T={};F.T=T,Hf(t,!1,i,a);try{var R=h(),z=F.S;if(z!==null&&z(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=qb(R,o);fl(t,i,K,qn(t))}else fl(t,i,o,qn(t))}catch(Q){fl(t,i,{then:function(){},status:"rejected",reason:Q},qn())}finally{ne.p=f,p!==null&&T.types!==null&&(p.types=T.types),F.T=p}}function Qb(){}function Bf(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=Xg(t).queue;Wg(t,h,i,me,a===null?Qb:function(){return Zg(t),a(o)})}function Xg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zg(t){var i=Xg(t);i.next===null&&(i=t.alternate.memoizedState),fl(t,i.next.queue,{},qn())}function qf(){return sn(Cl)}function Jg(){return kt().memoizedState}function e0(){return kt().memoizedState}function $b(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=qn();t=Xs(a);var o=Zs(i,t,a);o!==null&&(wn(o,i,a),ol(o,i,a)),i={cache:yf()},t.payload=i;return}i=i.return}}function Wb(t,i,a){var o=qn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ac(t)?n0(i,a):(a=af(t,i,a,o),a!==null&&(wn(a,t,o),i0(a,i,o)))}function t0(t,i,a){var o=qn();fl(t,i,a,o)}function fl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ac(t))n0(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var p=i.lastRenderedState,T=f(p,a);if(h.hasEagerState=!0,h.eagerState=T,Ln(T,p))return Pu(t,i,h,0),gt===null&&zu(),!1}catch{}if(a=af(t,i,h,o),a!==null)return wn(a,t,o),i0(a,i,o),!0}return!1}function Hf(t,i,a,o){if(o={lane:2,revertLane:bd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ac(t)){if(i)throw Error(r(479))}else i=af(t,a,o,2),i!==null&&wn(i,t,2)}function ac(t){var i=t.alternate;return t===Ue||i!==null&&i===Ue}function n0(t,i){Ga=Ju=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function i0(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Mo(t,a)}}var dl={readContext:sn,use:nc,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};dl.useEffectEvent=Nt;var s0={readContext:sn,use:nc,useCallback:function(t,i){return gn().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:Bg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,sc(4194308,4,Gg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return sc(4194308,4,t,i)},useInsertionEffect:function(t,i){sc(4,2,t,i)},useMemo:function(t,i){var a=gn();i=i===void 0?null:i;var o=t();if(ia){Le(!0);try{t()}finally{Le(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=gn();if(a!==void 0){var h=a(i);if(ia){Le(!0);try{a(i)}finally{Le(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Wb.bind(null,Ue,t),[o.memoizedState,t]},useRef:function(t){var i=gn();return t={current:t},i.memoizedState=t},useState:function(t){t=Lf(t);var i=t.queue,a=t0.bind(null,Ue,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:zf,useDeferredValue:function(t,i){var a=gn();return Pf(a,t,i)},useTransition:function(){var t=Lf(!1);return t=Wg.bind(null,Ue,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ue,h=gn();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),gt===null)throw Error(r(349));(He&127)!==0||xg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Bg(Rg.bind(null,o,f,t),[t]),o.flags|=2048,Ya(9,{destroy:void 0},wg.bind(null,o,f,a,i),null),a},useId:function(){var t=gn(),i=gt.identifierPrefix;if($e){var a=qi,o=Bi;a=(o&~(1<<32-Ze(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ec++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Hb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:qf,useFormState:Lg,useActionState:Lg,useOptimistic:function(t){var i=gn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Hf.bind(null,Ue,!0,a),a.dispatch=i,[t,i]},useMemoCache:kf,useCacheRefresh:function(){return gn().memoizedState=$b.bind(null,Ue)},useEffectEvent:function(t){var i=gn(),a={impl:t};return i.memoizedState=a,function(){if((st&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ff={readContext:sn,use:nc,useCallback:Yg,useContext:sn,useEffect:Uf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Fg,useMemo:Qg,useReducer:ic,useRef:Pg,useState:function(){return ic(fs)},useDebugValue:zf,useDeferredValue:function(t,i){var a=kt();return $g(a,dt.memoizedState,t,i)},useTransition:function(){var t=ic(fs)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:hl(t),i]},useSyncExternalStore:Sg,useId:Jg,useHostTransitionStatus:qf,useFormState:jg,useActionState:jg,useOptimistic:function(t,i){var a=kt();return Ig(a,dt,t,i)},useMemoCache:kf,useCacheRefresh:e0};Ff.useEffectEvent=qg;var r0={readContext:sn,use:nc,useCallback:Yg,useContext:sn,useEffect:Uf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Fg,useMemo:Qg,useReducer:Vf,useRef:Pg,useState:function(){return Vf(fs)},useDebugValue:zf,useDeferredValue:function(t,i){var a=kt();return dt===null?Pf(a,t,i):$g(a,dt.memoizedState,t,i)},useTransition:function(){var t=Vf(fs)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:hl(t),i]},useSyncExternalStore:Sg,useId:Jg,useHostTransitionStatus:qf,useFormState:zg,useActionState:zg,useOptimistic:function(t,i){var a=kt();return dt!==null?Ig(a,dt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:e0};r0.useEffectEvent=qg;function Gf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=qn(),h=Xs(o);h.payload=i,a!=null&&(h.callback=a),i=Zs(t,h,o),i!==null&&(wn(i,t,o),ol(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=qn(),h=Xs(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Zs(t,h,o),i!==null&&(wn(i,t,o),ol(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=qn(),o=Xs(a);o.tag=2,i!=null&&(o.callback=i),i=Zs(t,o,a),i!==null&&(wn(i,t,a),ol(i,t,a))}};function a0(t,i,a,o,h,f,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,p):i.prototype&&i.prototype.isPureReactComponent?!Jo(a,o)||!Jo(h,f):!0}function o0(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Kf.enqueueReplaceState(i,i.state,null)}function sa(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function l0(t){Uu(t)}function u0(t){console.error(t)}function c0(t){Uu(t)}function oc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function h0(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Yf(t,i,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){oc(t,i)},a}function f0(t){return t=Xs(t),t.tag=3,t}function d0(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){h0(i,a,o)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(t.callback=function(){h0(i,a,o),typeof h!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Xb(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&za(i,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 31:case 13:return ii===null?vc():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),_d(t,o,h)),!1;case 22:return a.flags|=65536,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),_d(t,o,h)),!1}throw Error(r(435,a.tag))}return _d(t,o,h),vc(),!1}if($e)return i=Un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==ff&&(t=Error(r(422),{cause:o}),nl(Jn(t,a)))):(o!==ff&&(i=Error(r(423),{cause:o}),nl(Jn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Jn(o,a),h=Yf(t.stateNode,o,h),Af(t,h),Ct!==4&&(Ct=2)),!1;var f=Error(r(520),{cause:o});if(f=Jn(f,a),bl===null?bl=[f]:bl.push(f),Ct!==4&&(Ct=2),i===null)return!0;o=Jn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Yf(a.stateNode,o,t),Af(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sr===null||!sr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=f0(h),d0(h,t,a,o),Af(a,h),!1}a=a.return}while(a!==null);return!1}var Qf=Error(r(461)),Pt=!1;function rn(t,i,a,o){i.child=t===null?yg(i,null,a,o):na(i,t.child,a,o)}function m0(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var p={};for(var T in o)T!=="ref"&&(p[T]=o[T])}else p=o;return Zr(i),o=Cf(t,i,a,p,f,h),T=If(),t!==null&&!Pt?(Of(t,i,h),ds(t,i,h)):($e&&T&&cf(i),i.flags|=1,rn(t,i,o,h),i.child)}function p0(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!of(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,g0(t,i,f,o,h)):(t=qu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!nd(t,h)){var p=f.memoizedProps;if(a=a.compare,a=a!==null?a:Jo,a(p,o)&&t.ref===i.ref)return ds(t,i,h)}return i.flags|=1,t=os(f,o),t.ref=i.ref,t.return=i,i.child=t}function g0(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(Jo(f,o)&&t.ref===i.ref)if(Pt=!1,i.pendingProps=o=f,nd(t,h))(t.flags&131072)!==0&&(Pt=!0);else return i.lanes=t.lanes,ds(t,i,h)}return $f(t,i,a,o,h)}function y0(t,i,a,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,i.child=null;return _0(t,i,f,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ku(i,f!==null?f.cachePool:null),f!==null?Eg(i,f):xf(),bg(i);else return o=i.lanes=536870912,_0(t,i,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Ku(i,f.cachePool),Eg(i,f),er(),i.memoizedState=null):(t!==null&&Ku(i,null),xf(),er());return rn(t,i,h,a),i.child}function ml(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function _0(t,i,a,o,h){var f=vf();return f=f===null?null:{parent:Ut._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Ku(i,null),xf(),bg(i),t!==null&&za(t,i,o,!0),i.childLanes=h,null}function lc(t,i){return i=cc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function v0(t,i,a){return na(i,t.child,null,a),t=lc(i,i.pendingProps),t.flags|=2,zn(i),i.memoizedState=null,t}function Zb(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if($e){if(o.mode==="hidden")return t=lc(i,o),i.lanes=536870912,ml(null,t);if(Rf(i),(t=yt)?(t=Oy(t,ni),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ks!==null?{id:Bi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=ng(t),a.return=i,i.child=a,nn=i,yt=null)):t=null,t===null)throw Qs(i);return i.lanes=536870912,null}return lc(i,o)}var f=t.memoizedState;if(f!==null){var p=f.dehydrated;if(Rf(i),h)if(i.flags&256)i.flags&=-257,i=v0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Pt||za(t,i,a,!1),h=(a&t.childLanes)!==0,Pt||h){if(o=gt,o!==null&&(p=Vo(o,a),p!==0&&p!==f.retryLane))throw f.retryLane=p,Qr(t,p),wn(o,t,p),Qf;vc(),i=v0(t,i,a)}else t=f.treeContext,yt=si(p.nextSibling),nn=i,$e=!0,Ys=null,ni=!1,t!==null&&rg(i,t),i=lc(i,o),i.flags|=4096;return i}return t=os(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function uc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function $f(t,i,a,o,h){return Zr(i),a=Cf(t,i,a,o,void 0,h),o=If(),t!==null&&!Pt?(Of(t,i,h),ds(t,i,h)):($e&&o&&cf(i),i.flags|=1,rn(t,i,a,h),i.child)}function E0(t,i,a,o,h,f){return Zr(i),i.updateQueue=null,a=Ag(i,o,a,h),Tg(t),o=If(),t!==null&&!Pt?(Of(t,i,f),ds(t,i,f)):($e&&o&&cf(i),i.flags|=1,rn(t,i,a,f),i.child)}function b0(t,i,a,o,h){if(Zr(i),i.stateNode===null){var f=Va,p=a.contextType;typeof p=="object"&&p!==null&&(f=sn(p)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Kf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},bf(i),p=a.contextType,f.context=typeof p=="object"&&p!==null?sn(p):Va,f.state=i.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Gf(i,a,p,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&Kf.enqueueReplaceState(f,f.state,null),ul(i,o,f,h),ll(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,R=sa(a,T);f.props=R;var z=f.context,K=a.contextType;p=Va,typeof K=="object"&&K!==null&&(p=sn(K));var Q=a.getDerivedStateFromProps;K=typeof Q=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||z!==p)&&o0(i,f,o,p),Ws=!1;var P=i.memoizedState;f.state=P,ul(i,o,f,h),ll(),z=i.memoizedState,T||P!==z||Ws?(typeof Q=="function"&&(Gf(i,a,Q,o),z=i.memoizedState),(R=Ws||a0(i,a,R,o,P,z,p))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),f.props=o,f.state=z,f.context=p,o=R):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,Tf(t,i),p=i.memoizedProps,K=sa(a,p),f.props=K,Q=i.pendingProps,P=f.context,z=a.contextType,R=Va,typeof z=="object"&&z!==null&&(R=sn(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==Q||P!==R)&&o0(i,f,o,R),Ws=!1,P=i.memoizedState,f.state=P,ul(i,o,f,h),ll();var q=i.memoizedState;p!==Q||P!==q||Ws||t!==null&&t.dependencies!==null&&Fu(t.dependencies)?(typeof T=="function"&&(Gf(i,a,T,o),q=i.memoizedState),(K=Ws||a0(i,a,K,o,P,q,R)||t!==null&&t.dependencies!==null&&Fu(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,R)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&P===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&P===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),f.props=o,f.state=q,f.context=R,o=K):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&P===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&P===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,uc(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=na(i,t.child,null,h),i.child=na(i,null,a,h)):rn(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ds(t,i,h),t}function T0(t,i,a,o){return Wr(),i.flags|=256,rn(t,i,a,o),i.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(t){return{baseLanes:t,cachePool:hg()}}function Zf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Bn),t}function A0(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),p&&(h=!0,i.flags&=-129),p=(i.flags&32)!==0,i.flags&=-33,t===null){if($e){if(h?Js(i):er(),(t=yt)?(t=Oy(t,ni),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ks!==null?{id:Bi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=ng(t),a.return=i,i.child=a,nn=i,yt=null)):t=null,t===null)throw Qs(i);return Md(t)?i.lanes=32:i.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(er(),h=i.mode,T=cc({mode:"hidden",children:T},h),o=$r(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,o=i.child,o.memoizedState=Xf(a),o.childLanes=Zf(t,p,a),i.memoizedState=Wf,ml(null,o)):(Js(i),Jf(i,T))}var R=t.memoizedState;if(R!==null&&(T=R.dehydrated,T!==null)){if(f)i.flags&256?(Js(i),i.flags&=-257,i=ed(t,i,a)):i.memoizedState!==null?(er(),i.child=t.child,i.flags|=128,i=null):(er(),T=o.fallback,h=i.mode,o=cc({mode:"visible",children:o.children},h),T=$r(T,h,a,null),T.flags|=2,o.return=i,T.return=i,o.sibling=T,i.child=o,na(i,t.child,null,a),o=i.child,o.memoizedState=Xf(a),o.childLanes=Zf(t,p,a),i.memoizedState=Wf,i=ml(null,o));else if(Js(i),Md(T)){if(p=T.nextSibling&&T.nextSibling.dataset,p)var z=p.dgst;p=z,o=Error(r(419)),o.stack="",o.digest=p,nl({value:o,source:null,stack:null}),i=ed(t,i,a)}else if(Pt||za(t,i,a,!1),p=(a&t.childLanes)!==0,Pt||p){if(p=gt,p!==null&&(o=Vo(p,a),o!==0&&o!==R.retryLane))throw R.retryLane=o,Qr(t,o),wn(p,t,o),Qf;kd(T)||vc(),i=ed(t,i,a)}else kd(T)?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,yt=si(T.nextSibling),nn=i,$e=!0,Ys=null,ni=!1,t!==null&&rg(i,t),i=Jf(i,o.children),i.flags|=4096);return i}return h?(er(),T=o.fallback,h=i.mode,R=t.child,z=R.sibling,o=os(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,z!==null?T=os(z,T):(T=$r(T,h,a,null),T.flags|=2),T.return=i,o.return=i,o.sibling=T,i.child=o,ml(null,o),o=i.child,T=t.child.memoizedState,T===null?T=Xf(a):(h=T.cachePool,h!==null?(R=Ut._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=hg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=Zf(t,p,a),i.memoizedState=Wf,ml(t.child,o)):(Js(i),a=t.child,t=a.sibling,a=os(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(p=i.deletions,p===null?(i.deletions=[t],i.flags|=16):p.push(t)),i.child=a,i.memoizedState=null,a)}function Jf(t,i){return i=cc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function cc(t,i){return t=jn(22,t,null,i),t.lanes=0,t}function ed(t,i,a){return na(i,t.child,null,a),t=Jf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function S0(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),pf(t.return,i,a)}function td(t,i,a,o,h,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=a,p.tailMode=h,p.treeForkCount=f)}function x0(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var p=Dt.current,T=(p&2)!==0;if(T?(p=p&1|2,i.flags|=128):p&=1,ie(Dt,p),rn(t,i,o,a),o=$e?tl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S0(t,a,i);else if(t.tag===19)S0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Zu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),td(i,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Zu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}td(i,!0,a,null,f,o);break;case"together":td(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function ds(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ir|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(za(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=os(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=os(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function nd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Fu(t)))}function Jb(t,i,a){switch(i.tag){case 3:Tt(i,i.stateNode.containerInfo),$s(i,Ut,t.memoizedState.cache),Wr();break;case 27:case 5:xi(i);break;case 4:Tt(i,i.stateNode.containerInfo);break;case 10:$s(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Rf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Js(i),i.flags|=128,null):(a&i.child.childLanes)!==0?A0(t,i,a):(Js(i),t=ds(t,i,a),t!==null?t.sibling:null);Js(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(za(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return x0(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Dt,Dt.current),o)break;return null;case 22:return i.lanes=0,y0(t,i,a,i.pendingProps);case 24:$s(i,Ut,t.memoizedState.cache)}return ds(t,i,a)}function w0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Pt=!0;else{if(!nd(t,a)&&(i.flags&128)===0)return Pt=!1,Jb(t,i,a);Pt=(t.flags&131072)!==0}else Pt=!1,$e&&(i.flags&1048576)!==0&&sg(i,tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=ea(i.elementType),i.type=t,typeof t=="function")of(t)?(o=sa(t,o),i.tag=1,i=b0(null,i,t,o,a)):(i.tag=0,i=$f(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===rt){i.tag=11,i=m0(null,i,t,o,a);break e}else if(h===N){i.tag=14,i=p0(null,i,t,o,a);break e}}throw i=ct(t)||t,Error(r(306,i,""))}}return i;case 0:return $f(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=sa(o,i.pendingProps),b0(t,i,o,h,a);case 3:e:{if(Tt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,Tf(t,i),ul(i,o,null,a);var p=i.memoizedState;if(o=p.cache,$s(i,Ut,o),o!==f.cache&&gf(i,[Ut],a,!0),ll(),o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=T0(t,i,o,a);break e}else if(o!==h){h=Jn(Error(r(424)),i),nl(h),i=T0(t,i,o,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,yt=si(t.firstChild),nn=i,$e=!0,Ys=null,ni=!0,a=yg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Wr(),o===h){i=ds(t,i,a);break e}rn(t,i,o,a)}i=i.child}return i;case 26:return uc(t,i),t===null?(a=jy(i.type,null,i.pendingProps,null))?i.memoizedState=a:$e||(a=i.type,t=i.pendingProps,o=wc(Oe.current).createElement(a),o[Vt]=i,o[Wt]=t,an(o,a,t),Lt(o),i.stateNode=o):i.memoizedState=jy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return xi(i),t===null&&$e&&(o=i.stateNode=My(i.type,i.pendingProps,Oe.current),nn=i,ni=!0,h=yt,lr(i.type)?(Vd=h,yt=si(o.firstChild)):yt=h),rn(t,i,i.pendingProps.children,a),uc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&$e&&((h=o=yt)&&(o=CT(o,i.type,i.pendingProps,ni),o!==null?(i.stateNode=o,nn=i,yt=si(o.firstChild),ni=!1,h=!0):h=!1),h||Qs(i)),xi(i),h=i.type,f=i.pendingProps,p=t!==null?t.memoizedProps:null,o=f.children,Id(h,f)?o=null:p!==null&&Id(h,p)&&(i.flags|=32),i.memoizedState!==null&&(h=Cf(t,i,Fb,null,null,a),Cl._currentValue=h),uc(t,i),rn(t,i,o,a),i.child;case 6:return t===null&&$e&&((t=a=yt)&&(a=IT(a,i.pendingProps,ni),a!==null?(i.stateNode=a,nn=i,yt=null,t=!0):t=!1),t||Qs(i)),null;case 13:return A0(t,i,a);case 4:return Tt(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=na(i,null,o,a):rn(t,i,o,a),i.child;case 11:return m0(t,i,i.type,i.pendingProps,a);case 7:return rn(t,i,i.pendingProps,a),i.child;case 8:return rn(t,i,i.pendingProps.children,a),i.child;case 12:return rn(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,$s(i,i.type,o.value),rn(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Zr(i),h=sn(h),o=o(h),i.flags|=1,rn(t,i,o,a),i.child;case 14:return p0(t,i,i.type,i.pendingProps,a);case 15:return g0(t,i,i.type,i.pendingProps,a);case 19:return x0(t,i,a);case 31:return Zb(t,i,a);case 22:return y0(t,i,a,i.pendingProps);case 24:return Zr(i),o=sn(Ut),t===null?(h=vf(),h===null&&(h=gt,f=yf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},bf(i),$s(i,Ut,h)):((t.lanes&a)!==0&&(Tf(t,i),ul(i,null,null,a),ll()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),$s(i,Ut,o)):(o=f.cache,$s(i,Ut,o),o!==h.cache&&gf(i,[Ut],a,!0))),rn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ms(t){t.flags|=4}function id(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(J0())t.flags|=8192;else throw ta=Qu,Ef}else t.flags&=-16777217}function R0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!qy(i))if(J0())t.flags|=8192;else throw ta=Qu,Ef}function hc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?yu():536870912,t.lanes|=i,Xa|=i)}function pl(t,i){if(!$e)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function _t(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function eT(t,i,a){var o=i.pendingProps;switch(hf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(i),null;case 1:return _t(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),cs(Ut),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ua(i)?ms(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,df())),_t(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(ms(i),f!==null?(_t(i),R0(i,f)):(_t(i),id(i,h,null,o,a))):f?f!==t.memoizedState?(ms(i),_t(i),R0(i,f)):(_t(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&ms(i),_t(i),id(i,h,t,o,a)),null;case 27:if(Ds(i),a=Oe.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return _t(i),null}t=oe.current,Ua(i)?ag(i):(t=My(h,o,a),i.stateNode=t,ms(i))}return _t(i),null;case 5:if(Ds(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return _t(i),null}if(f=oe.current,Ua(i))ag(i);else{var p=wc(Oe.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}f[Vt]=i,f[Wt]=o;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=f;e:switch(an(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ms(i)}}return _t(i),id(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&ms(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=Oe.current,Ua(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Vt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Ay(t.nodeValue,a)),t||Qs(i,!0)}else t=wc(t).createTextNode(o),t[Vt]=i,i.stateNode=t}return _t(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=Ua(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Vt]=i}else Wr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_t(i),t=!1}else a=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(zn(i),i):(zn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return _t(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ua(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Vt]=i}else Wr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_t(i),h=!1}else h=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(zn(i),i):(zn(i),null)}return zn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),hc(i,i.updateQueue),_t(i),null);case 4:return nt(),t===null&&xd(i.stateNode.containerInfo),_t(i),null;case 10:return cs(i.type),_t(i),null;case 19:if(G(Dt),o=i.memoizedState,o===null)return _t(i),null;if(h=(i.flags&128)!==0,f=o.rendering,f===null)if(h)pl(o,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Zu(t),f!==null){for(i.flags|=128,pl(o,!1),t=f.updateQueue,i.updateQueue=t,hc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)tg(a,t),a=a.sibling;return ie(Dt,Dt.current&1|2),$e&&ls(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&en()>gc&&(i.flags|=128,h=!0,pl(o,!1),i.lanes=4194304)}else{if(!h)if(t=Zu(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,hc(i,t),pl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!$e)return _t(i),null}else 2*en()-o.renderingStartTime>gc&&a!==536870912&&(i.flags|=128,h=!0,pl(o,!1),i.lanes=4194304);o.isBackwards?(f.sibling=i.child,i.child=f):(t=o.last,t!==null?t.sibling=f:i.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=en(),t.sibling=null,a=Dt.current,ie(Dt,h?a&1|2:a&1),$e&&ls(i,o.treeForkCount),t):(_t(i),null);case 22:case 23:return zn(i),wf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(_t(i),i.subtreeFlags&6&&(i.flags|=8192)):_t(i),a=i.updateQueue,a!==null&&hc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&G(Jr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),cs(Ut),_t(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function tT(t,i){switch(hf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return cs(Ut),nt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ds(i),null;case 31:if(i.memoizedState!==null){if(zn(i),i.alternate===null)throw Error(r(340));Wr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(zn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Wr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return G(Dt),null;case 4:return nt(),null;case 10:return cs(i.type),null;case 22:case 23:return zn(i),wf(),t!==null&&G(Jr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return cs(Ut),null;case 25:return null;default:return null}}function N0(t,i){switch(hf(i),i.tag){case 3:cs(Ut),nt();break;case 26:case 27:case 5:Ds(i);break;case 4:nt();break;case 31:i.memoizedState!==null&&zn(i);break;case 13:zn(i);break;case 19:G(Dt);break;case 10:cs(i.type);break;case 22:case 23:zn(i),wf(),t!==null&&G(Jr);break;case 24:cs(Ut)}}function gl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,p=a.inst;o=f(),p.destroy=o}a=a.next}while(a!==h)}}catch(T){ut(i,i.return,T)}}function tr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var p=o.inst,T=p.destroy;if(T!==void 0){p.destroy=void 0,h=i;var R=a,z=T;try{z()}catch(K){ut(h,R,K)}}}o=o.next}while(o!==f)}}catch(K){ut(i,i.return,K)}}function C0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{vg(i,a)}catch(o){ut(t,t.return,o)}}}function I0(t,i,a){a.props=sa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){ut(t,i,o)}}function yl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){ut(t,i,h)}}function Hi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ut(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,i,h)}else a.current=null}function O0(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function sd(t,i,a){try{var o=t.stateNode;AT(o,t.type,a,i),o[Wt]=i}catch(h){ut(t,t.return,h)}}function D0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&lr(t.type)||t.tag===4}function rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&lr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ad(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=di));else if(o!==4&&(o===27&&lr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(ad(t,i,a),t=t.sibling;t!==null;)ad(t,i,a),t=t.sibling}function fc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&lr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(fc(t,i,a),t=t.sibling;t!==null;)fc(t,i,a),t=t.sibling}function k0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);an(i,o,a),i[Vt]=t,i[Wt]=a}catch(f){ut(t,t.return,f)}}var ps=!1,Bt=!1,od=!1,M0=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function nT(t,i){if(t=t.containerInfo,Nd=kc,t=Kp(t),Jh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var p=0,T=-1,R=-1,z=0,K=0,Q=t,P=null;t:for(;;){for(var q;Q!==a||h!==0&&Q.nodeType!==3||(T=p+h),Q!==f||o!==0&&Q.nodeType!==3||(R=p+o),Q.nodeType===3&&(p+=Q.nodeValue.length),(q=Q.firstChild)!==null;)P=Q,Q=q;for(;;){if(Q===t)break t;if(P===a&&++z===h&&(T=p),P===f&&++K===o&&(R=p),(q=Q.nextSibling)!==null)break;Q=P,P=Q.parentNode}Q=q}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cd={focusedElem:t,selectionRange:a},kc=!1,Zt=i;Zt!==null;)if(i=Zt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Zt=t;else for(;Zt!==null;){switch(i=Zt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ce=sa(a.type,h);t=o.getSnapshotBeforeUpdate(ce,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){ut(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Dd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Zt=t;break}Zt=i.return}}function V0(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ys(t,a),o&4&&gl(5,a);break;case 1:if(ys(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(p){ut(a,a.return,p)}else{var h=sa(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(p){ut(a,a.return,p)}}o&64&&C0(a),o&512&&yl(a,a.return);break;case 3:if(ys(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{vg(t,i)}catch(p){ut(a,a.return,p)}}break;case 27:i===null&&o&4&&k0(a);case 26:case 5:ys(t,a),i===null&&o&4&&O0(a),o&512&&yl(a,a.return);break;case 12:ys(t,a);break;case 31:ys(t,a),o&4&&U0(t,a);break;case 13:ys(t,a),o&4&&z0(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=hT.bind(null,a),OT(t,a))));break;case 22:if(o=a.memoizedState!==null||ps,!o){i=i!==null&&i.memoizedState!==null||Bt,h=ps;var f=Bt;ps=o,(Bt=i)&&!f?_s(t,a,(a.subtreeFlags&8772)!==0):ys(t,a),ps=h,Bt=f}break;case 30:break;default:ys(t,a)}}function L0(t){var i=t.alternate;i!==null&&(t.alternate=null,L0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ba(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,Tn=!1;function gs(t,i,a){for(a=a.child;a!==null;)j0(t,i,a),a=a.sibling}function j0(t,i,a){if(pe&&typeof pe.onCommitFiberUnmount=="function")try{pe.onCommitFiberUnmount(fe,a)}catch{}switch(a.tag){case 26:Bt||Hi(a,i),gs(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Hi(a,i);var o=St,h=Tn;lr(a.type)&&(St=a.stateNode,Tn=!1),gs(t,i,a),wl(a.stateNode),St=o,Tn=h;break;case 5:Bt||Hi(a,i);case 6:if(o=St,h=Tn,St=null,gs(t,i,a),St=o,Tn=h,St!==null)if(Tn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(f){ut(a,i,f)}else try{St.removeChild(a.stateNode)}catch(f){ut(a,i,f)}break;case 18:St!==null&&(Tn?(t=St,Cy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ro(t)):Cy(St,a.stateNode));break;case 4:o=St,h=Tn,St=a.stateNode.containerInfo,Tn=!0,gs(t,i,a),St=o,Tn=h;break;case 0:case 11:case 14:case 15:tr(2,a,i),Bt||tr(4,a,i),gs(t,i,a);break;case 1:Bt||(Hi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&I0(a,i,o)),gs(t,i,a);break;case 21:gs(t,i,a);break;case 22:Bt=(o=Bt)||a.memoizedState!==null,gs(t,i,a),Bt=o;break;default:gs(t,i,a)}}function U0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(a){ut(i,i.return,a)}}}function z0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(a){ut(i,i.return,a)}}function iT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new M0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new M0),i;default:throw Error(r(435,t.tag))}}function dc(t,i){var a=iT(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=fT.bind(null,t,o);o.then(h,h)}})}function An(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,p=i,T=p;e:for(;T!==null;){switch(T.tag){case 27:if(lr(T.type)){St=T.stateNode,Tn=!1;break e}break;case 5:St=T.stateNode,Tn=!1;break e;case 3:case 4:St=T.stateNode.containerInfo,Tn=!0;break e}T=T.return}if(St===null)throw Error(r(160));j0(f,p,h),St=null,Tn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)P0(i,t),i=i.sibling}var vi=null;function P0(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(i,t),Sn(t),o&4&&(tr(3,t,t.return),gl(3,t),tr(5,t,t.return));break;case 1:An(i,t),Sn(t),o&512&&(Bt||a===null||Hi(a,a.return)),o&64&&ps&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=vi;if(An(i,t),Sn(t),o&512&&(Bt||a===null||Hi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ci]||f[Vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),an(f,o,a),f[Vt]=t,Lt(f),o=f;break e;case"link":var p=Py("link","href",h).get(o+(a.href||""));if(p){for(var T=0;T<p.length;T++)if(f=p[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(T,1);break t}}f=h.createElement(o),an(f,o,a),h.head.appendChild(f);break;case"meta":if(p=Py("meta","content",h).get(o+(a.content||""))){for(T=0;T<p.length;T++)if(f=p[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(T,1);break t}}f=h.createElement(o),an(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[Vt]=t,Lt(f),o=f}t.stateNode=o}else By(h,t.type,t.stateNode);else t.stateNode=zy(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?By(h,t.type,t.stateNode):zy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&sd(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(i,t),Sn(t),o&512&&(Bt||a===null||Hi(a,a.return)),a!==null&&o&4&&sd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(i,t),Sn(t),o&512&&(Bt||a===null||Hi(a,a.return)),t.flags&32){h=t.stateNode;try{bn(h,"")}catch(ce){ut(t,t.return,ce)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,sd(t,h,a!==null?a.memoizedProps:h)),o&1024&&(od=!0);break;case 6:if(An(i,t),Sn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ce){ut(t,t.return,ce)}}break;case 3:if(Cc=null,h=vi,vi=Rc(i.containerInfo),An(i,t),vi=h,Sn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ro(i.containerInfo)}catch(ce){ut(t,t.return,ce)}od&&(od=!1,B0(t));break;case 4:o=vi,vi=Rc(t.stateNode.containerInfo),An(i,t),Sn(t),vi=o;break;case 12:An(i,t),Sn(t);break;case 31:An(i,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,dc(t,o)));break;case 13:An(i,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pc=en()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,dc(t,o)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,z=ps,K=Bt;if(ps=z||h,Bt=K||R,An(i,t),Bt=K,ps=z,Sn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||ps||Bt||ra(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(f=R.stateNode,h)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{T=R.stateNode;var Q=R.memoizedProps.style,P=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;T.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(ce){ut(R,R.return,ce)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(ce){ut(R,R.return,ce)}}}else if(i.tag===18){if(a===null){R=i;try{var q=R.stateNode;h?Iy(q,!0):Iy(R.stateNode,!1)}catch(ce){ut(R,R.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,dc(t,a))));break;case 19:An(i,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,dc(t,o)));break;case 30:break;case 21:break;default:An(i,t),Sn(t)}}function Sn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(D0(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=rd(t);fc(t,f,h);break;case 5:var p=a.stateNode;a.flags&32&&(bn(p,""),a.flags&=-33);var T=rd(t);fc(t,T,p);break;case 3:case 4:var R=a.stateNode.containerInfo,z=rd(t);ad(t,z,R);break;default:throw Error(r(161))}}catch(K){ut(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function B0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;B0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ys(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)V0(t,i.alternate,i),i=i.sibling}function ra(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:tr(4,i,i.return),ra(i);break;case 1:Hi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&I0(i,i.return,a),ra(i);break;case 27:wl(i.stateNode);case 26:case 5:Hi(i,i.return),ra(i);break;case 22:i.memoizedState===null&&ra(i);break;case 30:ra(i);break;default:ra(i)}t=t.sibling}}function _s(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,p=f.flags;switch(f.tag){case 0:case 11:case 15:_s(h,f,a),gl(4,f);break;case 1:if(_s(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){ut(o,o.return,z)}if(o=f,h=o.updateQueue,h!==null){var T=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)_g(R[h],T)}catch(z){ut(o,o.return,z)}}a&&p&64&&C0(f),yl(f,f.return);break;case 27:k0(f);case 26:case 5:_s(h,f,a),a&&o===null&&p&4&&O0(f),yl(f,f.return);break;case 12:_s(h,f,a);break;case 31:_s(h,f,a),a&&p&4&&U0(h,f);break;case 13:_s(h,f,a),a&&p&4&&z0(h,f);break;case 22:f.memoizedState===null&&_s(h,f,a),yl(f,f.return);break;case 30:break;default:_s(h,f,a)}i=i.sibling}}function ld(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function ud(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&il(t))}function Ei(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)q0(t,i,a,o),i=i.sibling}function q0(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ei(t,i,a,o),h&2048&&gl(9,i);break;case 1:Ei(t,i,a,o);break;case 3:Ei(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&il(t)));break;case 12:if(h&2048){Ei(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,p=f.id,T=f.onPostCommit;typeof T=="function"&&T(p,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){ut(i,i.return,R)}}else Ei(t,i,a,o);break;case 31:Ei(t,i,a,o);break;case 13:Ei(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,p=i.alternate,i.memoizedState!==null?f._visibility&2?Ei(t,i,a,o):_l(t,i):f._visibility&2?Ei(t,i,a,o):(f._visibility|=2,Qa(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&ld(p,i);break;case 24:Ei(t,i,a,o),h&2048&&ud(i.alternate,i);break;default:Ei(t,i,a,o)}}function Qa(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,p=i,T=a,R=o,z=p.flags;switch(p.tag){case 0:case 11:case 15:Qa(f,p,T,R,h),gl(8,p);break;case 23:break;case 22:var K=p.stateNode;p.memoizedState!==null?K._visibility&2?Qa(f,p,T,R,h):_l(f,p):(K._visibility|=2,Qa(f,p,T,R,h)),h&&z&2048&&ld(p.alternate,p);break;case 24:Qa(f,p,T,R,h),h&&z&2048&&ud(p.alternate,p);break;default:Qa(f,p,T,R,h)}i=i.sibling}}function _l(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:_l(a,o),h&2048&&ld(o.alternate,o);break;case 24:_l(a,o),h&2048&&ud(o.alternate,o);break;default:_l(a,o)}i=i.sibling}}var vl=8192;function $a(t,i,a){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)H0(t,i,a),t=t.sibling}function H0(t,i,a){switch(t.tag){case 26:$a(t,i,a),t.flags&vl&&t.memoizedState!==null&&HT(a,vi,t.memoizedState,t.memoizedProps);break;case 5:$a(t,i,a);break;case 3:case 4:var o=vi;vi=Rc(t.stateNode.containerInfo),$a(t,i,a),vi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=vl,vl=16777216,$a(t,i,a),vl=o):$a(t,i,a));break;default:$a(t,i,a)}}function F0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function El(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Zt=o,K0(o,t)}F0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)G0(t),t=t.sibling}function G0(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&tr(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,mc(t)):El(t);break;default:El(t)}}function mc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Zt=o,K0(o,t)}F0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:tr(8,i,i.return),mc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,mc(i));break;default:mc(i)}t=t.sibling}}function K0(t,i){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:tr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:il(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Zt=o;else e:for(a=t;Zt!==null;){o=Zt;var h=o.sibling,f=o.return;if(L0(o),o===a){Zt=null;break e}if(h!==null){h.return=f,Zt=h;break e}Zt=f}}}var sT={getCacheForType:function(t){var i=sn(Ut),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return sn(Ut).controller.signal}},rT=typeof WeakMap=="function"?WeakMap:Map,st=0,gt=null,Pe=null,He=0,lt=0,Pn=null,nr=!1,Wa=!1,cd=!1,vs=0,Ct=0,ir=0,aa=0,hd=0,Bn=0,Xa=0,bl=null,xn=null,fd=!1,pc=0,Y0=0,gc=1/0,yc=null,sr=null,Gt=0,rr=null,Za=null,Es=0,dd=0,md=null,Q0=null,Tl=0,pd=null;function qn(){return(st&2)!==0&&He!==0?He&-He:F.T!==null?bd():_u()}function $0(){if(Bn===0)if((He&536870912)===0||$e){var t=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),Bn=t}else Bn=536870912;return t=Un.current,t!==null&&(t.flags|=32),Bn}function wn(t,i,a){(t===gt&&(lt===2||lt===9)||t.cancelPendingCommit!==null)&&(Ja(t,0),ar(t,He,Bn,!1)),Mr(t,a),((st&2)===0||t!==gt)&&(t===gt&&((st&2)===0&&(aa|=a),Ct===4&&ar(t,He,Bn,!1)),Fi(t))}function W0(t,i,a){if((st&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ci(t,i),h=o?lT(t,i):yd(t,i,!0),f=o;do{if(h===0){Wa&&!o&&ar(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!aT(a)){h=yd(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var p=0;else p=t.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){i=p;e:{var T=t;h=bl;var R=T.current.memoizedState.isDehydrated;if(R&&(Ja(T,p).flags|=256),p=yd(T,p,!1),p!==2){if(cd&&!R){T.errorRecoveryDisabledLanes|=f,aa|=f,h=4;break e}f=xn,xn=h,f!==null&&(xn===null?xn=f:xn.push.apply(xn,f))}h=p}if(f=!1,h!==2)continue}}if(h===1){Ja(t,0),ar(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ar(o,i,Bn,!nr);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=pc+300-en(),10<h)){if(ar(o,i,Bn,!nr),Yn(o,0,!0)!==0)break e;Es=i,o.timeoutHandle=Ry(X0.bind(null,o,a,xn,yc,fd,i,Bn,aa,Xa,nr,f,"Throttled",-0,0),h);break e}X0(o,a,xn,yc,fd,i,Bn,aa,Xa,nr,f,null,-0,0)}}break}while(!0);Fi(t)}function X0(t,i,a,o,h,f,p,T,R,z,K,Q,P,q){if(t.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},H0(i,f,Q);var ce=(f&62914560)===f?pc-en():(f&4194048)===f?Y0-en():0;if(ce=FT(Q,ce),ce!==null){Es=f,t.cancelPendingCommit=ce(ry.bind(null,t,i,f,a,o,h,p,T,R,K,Q,null,P,q)),ar(t,f,p,!z);return}}ry(t,i,f,a,o,h,p,T,R)}function aT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!Ln(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ar(t,i,a,o){i&=~hd,i&=~aa,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-Ze(h),p=1<<f;o[f]=-1,h&=~p}a!==0&&Vr(t,a,i)}function _c(){return(st&6)===0?(Al(0),!1):!0}function gd(){if(Pe!==null){if(lt===0)var t=Pe.return;else t=Pe,us=Xr=null,Df(t),Ha=null,rl=0,t=Pe;for(;t!==null;)N0(t.alternate,t),t=t.return;Pe=null}}function Ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,wT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Es=0,gd(),gt=t,Pe=a=os(t.current,null),He=i,lt=0,Pn=null,nr=!1,Wa=ci(t,i),cd=!1,Xa=Bn=hd=aa=ir=Ct=0,xn=bl=null,fd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Ze(o),f=1<<h;i|=t[h],o&=~f}return vs=i,zu(),a}function Z0(t,i){Ue=null,F.H=dl,i===qa||i===Yu?(i=mg(),lt=3):i===Ef?(i=mg(),lt=4):lt=i===Qf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,Pe===null&&(Ct=1,oc(t,Jn(i,t.current)))}function J0(){var t=Un.current;return t===null?!0:(He&4194048)===He?ii===null:(He&62914560)===He||(He&536870912)!==0?t===ii:!1}function ey(){var t=F.H;return F.H=dl,t===null?dl:t}function ty(){var t=F.A;return F.A=sT,t}function vc(){Ct=4,nr||(He&4194048)!==He&&Un.current!==null||(Wa=!0),(ir&134217727)===0&&(aa&134217727)===0||gt===null||ar(gt,He,Bn,!1)}function yd(t,i,a){var o=st;st|=2;var h=ey(),f=ty();(gt!==t||He!==i)&&(yc=null,Ja(t,i)),i=!1;var p=Ct;e:do try{if(lt!==0&&Pe!==null){var T=Pe,R=Pn;switch(lt){case 8:gd(),p=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(i=!0);var z=lt;if(lt=0,Pn=null,eo(t,T,R,z),a&&Wa){p=0;break e}break;default:z=lt,lt=0,Pn=null,eo(t,T,R,z)}}oT(),p=Ct;break}catch(K){Z0(t,K)}while(!0);return i&&t.shellSuspendCounter++,us=Xr=null,st=o,F.H=h,F.A=f,Pe===null&&(gt=null,He=0,zu()),p}function oT(){for(;Pe!==null;)ny(Pe)}function lT(t,i){var a=st;st|=2;var o=ey(),h=ty();gt!==t||He!==i?(yc=null,gc=en()+500,Ja(t,i)):Wa=ci(t,i);e:do try{if(lt!==0&&Pe!==null){i=Pe;var f=Pn;t:switch(lt){case 1:lt=0,Pn=null,eo(t,i,f,1);break;case 2:case 9:if(fg(f)){lt=0,Pn=null,iy(i);break}i=function(){lt!==2&&lt!==9||gt!==t||(lt=7),Fi(t)},f.then(i,i);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:fg(f)?(lt=0,Pn=null,iy(i)):(lt=0,Pn=null,eo(t,i,f,7));break;case 5:var p=null;switch(Pe.tag){case 26:p=Pe.memoizedState;case 5:case 27:var T=Pe;if(p?qy(p):T.stateNode.complete){lt=0,Pn=null;var R=T.sibling;if(R!==null)Pe=R;else{var z=T.return;z!==null?(Pe=z,Ec(z)):Pe=null}break t}}lt=0,Pn=null,eo(t,i,f,5);break;case 6:lt=0,Pn=null,eo(t,i,f,6);break;case 8:gd(),Ct=6;break e;default:throw Error(r(462))}}uT();break}catch(K){Z0(t,K)}while(!0);return us=Xr=null,F.H=o,F.A=h,st=a,Pe!==null?0:(gt=null,He=0,zu(),Ct)}function uT(){for(;Pe!==null&&!ko();)ny(Pe)}function ny(t){var i=w0(t.alternate,t,vs);t.memoizedProps=t.pendingProps,i===null?Ec(t):Pe=i}function iy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=E0(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=E0(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:Df(i);default:N0(a,i),i=Pe=tg(i,vs),i=w0(a,i,vs)}t.memoizedProps=t.pendingProps,i===null?Ec(t):Pe=i}function eo(t,i,a,o){us=Xr=null,Df(i),Ha=null,rl=0;var h=i.return;try{if(Xb(t,h,i,a,He)){Ct=1,oc(t,Jn(a,t.current)),Pe=null;return}}catch(f){if(h!==null)throw Pe=h,f;Ct=1,oc(t,Jn(a,t.current)),Pe=null;return}i.flags&32768?($e||o===1?t=!0:Wa||(He&536870912)!==0?t=!1:(nr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Un.current,o!==null&&o.tag===13&&(o.flags|=16384))),sy(i,t)):Ec(i)}function Ec(t){var i=t;do{if((i.flags&32768)!==0){sy(i,nr);return}t=i.return;var a=eT(i.alternate,i,vs);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=t}while(i!==null);Ct===0&&(Ct=5)}function sy(t,i){do{var a=tT(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);Ct=6,Pe=null}function ry(t,i,a,o,h,f,p,T,R){t.cancelPendingCommit=null;do bc();while(Gt!==0);if((st&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=rf,$h(t,a,f,p,T,R),t===gt&&(Pe=gt=null,He=0),Za=i,rr=t,Es=a,dd=f,md=h,Q0=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dT(le,function(){return cy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=ne.p,ne.p=2,p=st,st|=4;try{nT(t,i,a)}finally{st=p,ne.p=h,F.T=o}}Gt=1,ay(),oy(),ly()}}function ay(){if(Gt===1){Gt=0;var t=rr,i=Za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=ne.p;ne.p=2;var h=st;st|=4;try{P0(i,t);var f=Cd,p=Kp(t.containerInfo),T=f.focusedElem,R=f.selectionRange;if(p!==T&&T&&T.ownerDocument&&Gp(T.ownerDocument.documentElement,T)){if(R!==null&&Jh(T)){var z=R.start,K=R.end;if(K===void 0&&(K=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(K,T.value.length);else{var Q=T.ownerDocument||document,P=Q&&Q.defaultView||window;if(P.getSelection){var q=P.getSelection(),ce=T.textContent.length,Ae=Math.min(R.start,ce),pt=R.end===void 0?Ae:Math.min(R.end,ce);!q.extend&&Ae>pt&&(p=pt,pt=Ae,Ae=p);var V=Fp(T,Ae),k=Fp(T,pt);if(V&&k&&(q.rangeCount!==1||q.anchorNode!==V.node||q.anchorOffset!==V.offset||q.focusNode!==k.node||q.focusOffset!==k.offset)){var U=Q.createRange();U.setStart(V.node,V.offset),q.removeAllRanges(),Ae>pt?(q.addRange(U),q.extend(k.node,k.offset)):(U.setEnd(k.node,k.offset),q.addRange(U))}}}}for(Q=[],q=T;q=q.parentNode;)q.nodeType===1&&Q.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Q.length;T++){var Y=Q[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}kc=!!Nd,Cd=Nd=null}finally{st=h,ne.p=o,F.T=a}}t.current=i,Gt=2}}function oy(){if(Gt===2){Gt=0;var t=rr,i=Za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=ne.p;ne.p=2;var h=st;st|=4;try{V0(t,i.alternate,i)}finally{st=h,ne.p=o,F.T=a}}Gt=3}}function ly(){if(Gt===4||Gt===3){Gt=0,va();var t=rr,i=Za,a=Es,o=Q0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Gt=5:(Gt=0,Za=rr=null,uy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(sr=null),is(a),i=i.stateNode,pe&&typeof pe.onCommitFiberRoot=="function")try{pe.onCommitFiberRoot(fe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=ne.p,ne.p=2,F.T=null;try{for(var f=t.onRecoverableError,p=0;p<o.length;p++){var T=o[p];f(T.value,{componentStack:T.stack})}}finally{F.T=i,ne.p=h}}(Es&3)!==0&&bc(),Fi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===pd?Tl++:(Tl=0,pd=t):Tl=0,Al(0)}}function uy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,il(i)))}function bc(){return ay(),oy(),ly(),cy()}function cy(){if(Gt!==5)return!1;var t=rr,i=dd;dd=0;var a=is(Es),o=F.T,h=ne.p;try{ne.p=32>a?32:a,F.T=null,a=md,md=null;var f=rr,p=Es;if(Gt=0,Za=rr=null,Es=0,(st&6)!==0)throw Error(r(331));var T=st;if(st|=4,G0(f.current),q0(f,f.current,p,a),st=T,Al(0,!1),pe&&typeof pe.onPostCommitFiberRoot=="function")try{pe.onPostCommitFiberRoot(fe,f)}catch{}return!0}finally{ne.p=h,F.T=o,uy(t,i)}}function hy(t,i,a){i=Jn(a,i),i=Yf(t.stateNode,i,2),t=Zs(t,i,2),t!==null&&(Mr(t,2),Fi(t))}function ut(t,i,a){if(t.tag===3)hy(t,t,a);else for(;i!==null;){if(i.tag===3){hy(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(sr===null||!sr.has(o))){t=Jn(a,t),a=f0(2),o=Zs(i,a,2),o!==null&&(d0(a,o,i,t),Mr(o,2),Fi(o));break}}i=i.return}}function _d(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new rT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(cd=!0,h.add(a),t=cT.bind(null,t,i,a),i.then(t,t))}function cT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,gt===t&&(He&a)===a&&(Ct===4||Ct===3&&(He&62914560)===He&&300>en()-pc?(st&2)===0&&Ja(t,0):hd|=a,Xa===He&&(Xa=0)),Fi(t)}function fy(t,i){i===0&&(i=yu()),t=Qr(t,i),t!==null&&(Mr(t,i),Fi(t))}function hT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),fy(t,a)}function fT(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),fy(t,a)}function dT(t,i){return It(t,i)}var Tc=null,to=null,vd=!1,Ac=!1,Ed=!1,or=0;function Fi(t){t!==to&&t.next===null&&(to===null?Tc=to=t:to=to.next=t),Ac=!0,vd||(vd=!0,pT())}function Al(t,i){if(!Ed&&Ac){Ed=!0;do for(var a=!1,o=Tc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var p=o.suspendedLanes,T=o.pingedLanes;f=(1<<31-Ze(42|t)+1)-1,f&=h&~(p&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,gy(o,f))}else f=He,f=Yn(o,o===gt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ci(o,f)||(a=!0,gy(o,f));o=o.next}while(a);Ed=!1}}function mT(){dy()}function dy(){Ac=vd=!1;var t=0;or!==0&&xT()&&(t=or);for(var i=en(),a=null,o=Tc;o!==null;){var h=o.next,f=my(o,i);f===0?(o.next=null,a===null?Tc=h:a.next=h,h===null&&(to=a)):(a=o,(t!==0||(f&3)!==0)&&(Ac=!0)),o=h}Gt!==0&&Gt!==5||Al(t),or!==0&&(or=0)}function my(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var p=31-Ze(f),T=1<<p,R=h[p];R===-1?((T&a)===0||(T&o)!==0)&&(h[p]=Qh(T,i)):R<=i&&(t.expiredLanes|=T),f&=~T}if(i=gt,a=He,a=Yn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(lt===2||lt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&wi(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ci(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&wi(o),is(a)){case 2:case 8:a=Z;break;case 32:a=le;break;case 268435456:a=xe;break;default:a=le}return o=py.bind(null,t),a=It(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&wi(o),t.callbackPriority=2,t.callbackNode=null,2}function py(t,i){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(bc()&&t.callbackNode!==a)return null;var o=He;return o=Yn(t,t===gt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(W0(t,o,i),my(t,en()),t.callbackNode!=null&&t.callbackNode===a?py.bind(null,t):null)}function gy(t,i){if(bc())return null;W0(t,i,!0)}function pT(){RT(function(){(st&6)!==0?It(ee,mT):dy()})}function bd(){if(or===0){var t=Pa;t===0&&(t=$t,$t<<=1,($t&261888)===0&&($t=256)),or=t}return or}function yy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xa(""+t)}function _y(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function gT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=yy((h[Wt]||null).action),p=o.submitter;p&&(i=(i=p[Wt]||null)?yy(i.formAction):p.getAttribute("formAction"),i!==null&&(f=i,p=null));var T=new ji("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(or!==0){var R=p?_y(h,p):new FormData(h);Bf(a,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(T.preventDefault(),R=p?_y(h,p):new FormData(h),Bf(a,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var Td=0;Td<sf.length;Td++){var Ad=sf[Td],yT=Ad.toLowerCase(),_T=Ad[0].toUpperCase()+Ad.slice(1);_i(yT,"on"+_T)}_i($p,"onAnimationEnd"),_i(Wp,"onAnimationIteration"),_i(Xp,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Mb,"onTransitionRun"),_i(Vb,"onTransitionStart"),_i(Lb,"onTransitionCancel"),_i(Zp,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function vy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var p=o.length-1;0<=p;p--){var T=o[p],R=T.instance,z=T.currentTarget;if(T=T.listener,R!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=z;try{f(h)}catch(K){Uu(K)}h.currentTarget=null,f=R}else for(p=0;p<o.length;p++){if(T=o[p],R=T.instance,z=T.currentTarget,T=T.listener,R!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=z;try{f(h)}catch(K){Uu(K)}h.currentTarget=null,f=R}}}}function Be(t,i){var a=i[Ea];a===void 0&&(a=i[Ea]=new Set);var o=t+"__bubble";a.has(o)||(Ey(i,t,2,!1),a.add(o))}function Sd(t,i,a){var o=0;i&&(o|=4),Ey(a,t,o,i)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function xd(t){if(!t[Sc]){t[Sc]=!0,Lo.forEach(function(a){a!=="selectionchange"&&(vT.has(a)||Sd(a,!1,t),Sd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Sc]||(i[Sc]=!0,Sd("selectionchange",!1,i))}}function Ey(t,i,a,o){switch($y(i)){case 2:var h=YT;break;case 8:h=QT;break;default:h=Pd}a=h.bind(null,i,a,t),h=void 0,!Pr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function wd(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var T=o.stateNode.containerInfo;if(T===h)break;if(p===4)for(p=o.return;p!==null;){var R=p.tag;if((R===3||R===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;T!==null;){if(p=Ii(T),p===null)return;if(R=p.tag,R===5||R===6||R===26||R===27){o=f=p;continue e}T=T.parentNode}}o=o.return}qs(function(){var z=f,K=$n(a),Q=[];e:{var P=Jp.get(t);if(P!==void 0){var q=ji,ce=t;switch(t){case"keypress":if(qr(a)===0)break e;case"keydown":case"keyup":q=Vu;break;case"focusin":ce="focus",q=Fr;break;case"focusout":ce="blur",q=Fr;break;case"beforeblur":case"afterblur":q=Fr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=$o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=m;break;case $p:case Wp:case Xp:q=Nu;break;case Zp:q=A;break;case"scroll":case"scrollend":q=Qo;break;case"wheel":q=B;break;case"copy":case"cut":case"paste":q=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=as;break;case"toggle":case"beforetoggle":q=je}var Ae=(i&4)!==0,pt=!Ae&&(t==="scroll"||t==="scrollend"),V=Ae?P!==null?P+"Capture":null:P;Ae=[];for(var k=z,U;k!==null;){var Y=k;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||V===null||(Y=mi(k,V),Y!=null&&Ae.push(xl(k,Y,U))),pt)break;k=k.return}0<Ae.length&&(P=new q(P,ce,null,a,K),Q.push({event:P,listeners:Ae}))}}if((i&7)===0){e:{if(P=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",P&&a!==Go&&(ce=a.relatedTarget||a.fromElement)&&(Ii(ce)||ce[Ni]))break e;if((q||P)&&(P=K.window===K?K:(P=K.ownerDocument)?P.defaultView||P.parentWindow:window,q?(ce=a.relatedTarget||a.toElement,q=z,ce=ce?Ii(ce):null,ce!==null&&(pt=c(ce),Ae=ce.tag,ce!==pt||Ae!==5&&Ae!==27&&Ae!==6)&&(ce=null)):(q=null,ce=z),q!==ce)){if(Ae=$o,Y="onMouseLeave",V="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=as,Y="onPointerLeave",V="onPointerEnter",k="pointer"),pt=q==null?P:Mn(q),U=ce==null?P:Mn(ce),P=new Ae(Y,k+"leave",q,a,K),P.target=pt,P.relatedTarget=U,Y=null,Ii(K)===z&&(Ae=new Ae(V,k+"enter",ce,a,K),Ae.target=U,Ae.relatedTarget=pt,Y=Ae),pt=Y,q&&ce)t:{for(Ae=ET,V=q,k=ce,U=0,Y=V;Y;Y=Ae(Y))U++;Y=0;for(var ge=k;ge;ge=Ae(ge))Y++;for(;0<U-Y;)V=Ae(V),U--;for(;0<Y-U;)k=Ae(k),Y--;for(;U--;){if(V===k||k!==null&&V===k.alternate){Ae=V;break t}V=Ae(V),k=Ae(k)}Ae=null}else Ae=null;q!==null&&by(Q,P,q,Ae,!1),ce!==null&&pt!==null&&by(Q,pt,ce,Ae,!0)}}e:{if(P=z?Mn(z):window,q=P.nodeName&&P.nodeName.toLowerCase(),q==="select"||q==="input"&&P.type==="file")var et=Up;else if(Lp(P))if(zp)et=Ob;else{et=Cb;var he=Nb}else q=P.nodeName,!q||q.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?z&&Sa(z.elementType)&&(et=Up):et=Ib;if(et&&(et=et(t,z))){jp(Q,et,a,K);break e}he&&he(t,P,z),t==="focusout"&&z&&P.type==="number"&&z.memoizedProps.value!=null&&qo(P,"number",P.value)}switch(he=z?Mn(z):window,t){case"focusin":(Lp(he)||he.contentEditable==="true")&&(Da=he,ef=z,el=null);break;case"focusout":el=ef=Da=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,Yp(Q,a,K);break;case"selectionchange":if(kb)break;case"keydown":case"keyup":Yp(Q,a,K)}var ze;if(it)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Oa?Gr(t,a)&&(Fe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(Pi&&a.locale!=="ko"&&(Oa||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Oa&&(ze=Yo()):(Li=K,Ko="value"in Li?Li.value:Li.textContent,Oa=!0)),he=xc(z,Fe),0<he.length&&(Fe=new zi(Fe,t,null,a,K),Q.push({event:Fe,listeners:he}),ze?Fe.data=ze:(ze=Ia(a),ze!==null&&(Fe.data=ze)))),(ze=Xn?Sb(t,a):xb(t,a))&&(Fe=xc(z,"onBeforeInput"),0<Fe.length&&(he=new zi("onBeforeInput","beforeinput",null,a,K),Q.push({event:he,listeners:Fe}),he.data=ze)),gT(Q,t,z,a,K)}vy(Q,i)})}function xl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function xc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=mi(t,a),h!=null&&o.unshift(xl(t,h,f)),h=mi(t,i),h!=null&&o.push(xl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function ET(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function by(t,i,a,o,h){for(var f=i._reactName,p=[];a!==null&&a!==o;){var T=a,R=T.alternate,z=T.stateNode;if(T=T.tag,R!==null&&R===o)break;T!==5&&T!==26&&T!==27||z===null||(R=z,h?(z=mi(a,f),z!=null&&p.unshift(xl(a,z,R))):h||(z=mi(a,f),z!=null&&p.push(xl(a,z,R)))),a=a.return}p.length!==0&&t.push({event:i,listeners:p})}var bT=/\r\n?/g,TT=/\u0000|\uFFFD/g;function Ty(t){return(typeof t=="string"?t:""+t).replace(bT,`
`).replace(TT,"")}function Ay(t,i){return i=Ty(i),Ty(t)===i}function mt(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||bn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&bn(t,""+o);break;case"className":Vn(t,"class",o);break;case"tabIndex":Vn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,a,o);break;case"style":Fo(t,o,f);break;case"data":if(i!=="object"){Vn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=xa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&mt(t,i,"name",h.name,h,null),mt(t,i,"formEncType",h.formEncType,h,null),mt(t,i,"formMethod",h.formMethod,h,null),mt(t,i,"formTarget",h.formTarget,h,null)):(mt(t,i,"encType",h.encType,h,null),mt(t,i,"method",h.method,h,null),mt(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=xa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=di);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=xa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Be("beforetoggle",t),Be("toggle",t),Ta(t,"popover",o);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xu.get(a)||a,Ta(t,a,o))}}function Rd(t,i,a,o,h,f){switch(a){case"style":Fo(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?bn(t,o):(typeof o=="number"||typeof o=="bigint")&&bn(t,""+o);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"onClick":o!=null&&(t.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ta(t,a,o)}}}function an(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var p=a[f];if(p!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(t,i,f,p,a,null)}}h&&mt(t,i,"srcSet",a.srcSet,a,null),o&&mt(t,i,"src",a.src,a,null);return;case"input":Be("invalid",t);var T=f=p=h=null,R=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":p=K;break;case"checked":R=K;break;case"defaultChecked":z=K;break;case"value":f=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:mt(t,i,o,K,a,null)}}Tu(t,f,T,R,z,p,h,!1);return;case"select":Be("invalid",t),o=p=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":p=T;break;case"multiple":o=T;default:mt(t,i,h,T,a,null)}i=f,a=p,t.multiple=!!o,i!=null?Us(t,!!o,i,!1):a!=null&&Us(t,!!o,a,!0);return;case"textarea":Be("invalid",t),f=h=o=null;for(p in a)if(a.hasOwnProperty(p)&&(T=a[p],T!=null))switch(p){case"value":o=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:mt(t,i,p,T,a,null)}zs(t,o,h,f);return;case"option":for(R in a)a.hasOwnProperty(R)&&(o=a[R],o!=null)&&(R==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":mt(t,i,R,o,a,null));return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(o=0;o<Sl.length;o++)Be(Sl[o],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:mt(t,i,z,o,a,null)}return;default:if(Sa(i)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&Rd(t,i,K,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&mt(t,i,T,o,a,null))}function AT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,p=null,T=null,R=null,z=null,K=null;for(q in a){var Q=a[q];if(a.hasOwnProperty(q)&&Q!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=Q;default:o.hasOwnProperty(q)||mt(t,i,q,null,o,Q)}}for(var P in o){var q=o[P];if(Q=a[P],o.hasOwnProperty(P)&&(q!=null||Q!=null))switch(P){case"type":f=q;break;case"name":h=q;break;case"checked":z=q;break;case"defaultChecked":K=q;break;case"value":p=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==Q&&mt(t,i,P,q,o,Q)}}Aa(t,p,T,R,z,K,f,h);return;case"select":q=p=T=P=null;for(f in a)if(R=a[f],a.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":q=R;default:o.hasOwnProperty(f)||mt(t,i,f,null,o,R)}for(h in o)if(f=o[h],R=a[h],o.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":P=f;break;case"defaultValue":T=f;break;case"multiple":p=f;default:f!==R&&mt(t,i,h,f,o,R)}i=T,a=p,o=q,P!=null?Us(t,!!a,P,!1):!!o!=!!a&&(i!=null?Us(t,!!a,i,!0):Us(t,!!a,a?[]:"",!1));return;case"textarea":q=P=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:mt(t,i,T,null,o,h)}for(p in o)if(h=o[p],f=a[p],o.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"value":P=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&mt(t,i,p,h,o,f)}Au(t,P,q);return;case"option":for(var ce in a)P=a[ce],a.hasOwnProperty(ce)&&P!=null&&!o.hasOwnProperty(ce)&&(ce==="selected"?t.selected=!1:mt(t,i,ce,null,o,P));for(R in o)P=o[R],q=a[R],o.hasOwnProperty(R)&&P!==q&&(P!=null||q!=null)&&(R==="selected"?t.selected=P&&typeof P!="function"&&typeof P!="symbol":mt(t,i,R,P,o,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)P=a[Ae],a.hasOwnProperty(Ae)&&P!=null&&!o.hasOwnProperty(Ae)&&mt(t,i,Ae,null,o,P);for(z in o)if(P=o[z],q=a[z],o.hasOwnProperty(z)&&P!==q&&(P!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(137,i));break;default:mt(t,i,z,P,o,q)}return;default:if(Sa(i)){for(var pt in a)P=a[pt],a.hasOwnProperty(pt)&&P!==void 0&&!o.hasOwnProperty(pt)&&Rd(t,i,pt,void 0,o,P);for(K in o)P=o[K],q=a[K],!o.hasOwnProperty(K)||P===q||P===void 0&&q===void 0||Rd(t,i,K,P,o,q);return}}for(var V in a)P=a[V],a.hasOwnProperty(V)&&P!=null&&!o.hasOwnProperty(V)&&mt(t,i,V,null,o,P);for(Q in o)P=o[Q],q=a[Q],!o.hasOwnProperty(Q)||P===q||P==null&&q==null||mt(t,i,Q,P,o,q)}function Sy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ST(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,p=h.initiatorType,T=h.duration;if(f&&T&&Sy(p)){for(p=0,T=h.responseEnd,o+=1;o<a.length;o++){var R=a[o],z=R.startTime;if(z>T)break;var K=R.transferSize,Q=R.initiatorType;K&&Sy(Q)&&(R=R.responseEnd,p+=K*(R<T?1:(T-z)/(R-z)))}if(--o,i+=8*(f+p)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nd=null,Cd=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function xy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Id(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Od=null;function xT(){var t=window.event;return t&&t.type==="popstate"?t===Od?!1:(Od=t,!0):(Od=null,!1)}var Ry=typeof setTimeout=="function"?setTimeout:void 0,wT=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(t){return Ny.resolve(null).then(t).catch(NT)}:Ry;function NT(t){setTimeout(function(){throw t})}function lr(t){return t==="head"}function Cy(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),ro(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")wl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,wl(a);for(var f=a.firstChild;f;){var p=f.nextSibling,T=f.nodeName;f[Ci]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=p}}else a==="body"&&wl(t.ownerDocument.body);a=h}while(a);ro(i)}function Iy(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Dd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dd(a),ba(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function CT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ci])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function IT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function Oy(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=si(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$?"||t.data==="$~"}function Md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function OT(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function si(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Vd=null;function Dy(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return si(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function ky(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function My(t,i,a){switch(i=wc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function wl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ba(t)}var ri=new Map,Vy=new Set;function Rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bs=ne.d;ne.d={f:DT,r:kT,D:MT,C:VT,L:LT,m:jT,X:zT,S:UT,M:PT};function DT(){var t=bs.f(),i=_c();return t||i}function kT(t){var i=Qn(t);i!==null&&i.tag===5&&i.type==="form"?Zg(i):bs.r(t)}var no=typeof document>"u"?null:document;function Ly(t,i,a){var o=no;if(o&&typeof i=="string"&&i){var h=En(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Vy.has(h)||(Vy.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),an(i,"link",t),Lt(i),o.head.appendChild(i)))}}function MT(t){bs.D(t),Ly("dns-prefetch",t,null)}function VT(t,i){bs.C(t,i),Ly("preconnect",t,i)}function LT(t,i,a){bs.L(t,i,a);var o=no;if(o&&t&&i){var h='link[rel="preload"][as="'+En(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+En(a.imageSizes)+'"]')):h+='[href="'+En(t)+'"]';var f=h;switch(i){case"style":f=io(t);break;case"script":f=so(t)}ri.has(f)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ri.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(Rl(f))||i==="script"&&o.querySelector(Nl(f))||(i=o.createElement("link"),an(i,"link",t),Lt(i),o.head.appendChild(i)))}}function jT(t,i){bs.m(t,i);var a=no;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+En(o)+'"][href="'+En(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=so(t)}if(!ri.has(f)&&(t=S({rel:"modulepreload",href:t},i),ri.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(f)))return}o=a.createElement("link"),an(o,"link",t),Lt(o),a.head.appendChild(o)}}}function UT(t,i,a){bs.S(t,i,a);var o=no;if(o&&t){var h=Oi(o).hoistableStyles,f=io(t);i=i||"default";var p=h.get(f);if(!p){var T={loading:0,preload:null};if(p=o.querySelector(Rl(f)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ri.get(f))&&Ld(t,a);var R=p=o.createElement("link");Lt(R),an(R,"link",t),R._p=new Promise(function(z,K){R.onload=z,R.onerror=K}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(p,i,o)}p={type:"stylesheet",instance:p,count:1,state:T},h.set(f,p)}}}function zT(t,i){bs.X(t,i);var a=no;if(a&&t){var o=Oi(a).hoistableScripts,h=so(t),f=o.get(h);f||(f=a.querySelector(Nl(h)),f||(t=S({src:t,async:!0},i),(i=ri.get(h))&&jd(t,i),f=a.createElement("script"),Lt(f),an(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function PT(t,i){bs.M(t,i);var a=no;if(a&&t){var o=Oi(a).hoistableScripts,h=so(t),f=o.get(h);f||(f=a.querySelector(Nl(h)),f||(t=S({src:t,async:!0,type:"module"},i),(i=ri.get(h))&&jd(t,i),f=a.createElement("script"),Lt(f),an(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function jy(t,i,a,o){var h=(h=Oe.current)?Rc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=io(a.href),a=Oi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=io(a.href);var f=Oi(h).hoistableStyles,p=f.get(t);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,p),(f=h.querySelector(Rl(t)))&&!f._p&&(p.instance=f,p.state.loading=5),ri.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ri.set(t,a),f||BT(h,t,a,p.state))),i&&o===null)throw Error(r(528,""));return p}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=so(a),a=Oi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function io(t){return'href="'+En(t)+'"'}function Rl(t){return'link[rel="stylesheet"]['+t+"]"}function Uy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function BT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),an(i,"link",a),Lt(i),t.head.appendChild(i))}function so(t){return'[src="'+En(t)+'"]'}function Nl(t){return"script[async]"+t}function zy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+En(a.href)+'"]');if(o)return i.instance=o,Lt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Lt(o),an(o,"style",h),Nc(o,a.precedence,t),i.instance=o;case"stylesheet":h=io(a.href);var f=t.querySelector(Rl(h));if(f)return i.state.loading|=4,i.instance=f,Lt(f),f;o=Uy(a),(h=ri.get(h))&&Ld(o,h),f=(t.ownerDocument||t).createElement("link"),Lt(f);var p=f;return p._p=new Promise(function(T,R){p.onload=T,p.onerror=R}),an(f,"link",o),i.state.loading|=4,Nc(f,a.precedence,t),i.instance=f;case"script":return f=so(a.src),(h=t.querySelector(Nl(f)))?(i.instance=h,Lt(h),h):(o=a,(h=ri.get(f))&&(o=S({},a),jd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Lt(h),an(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Nc(o,a.precedence,t));return i.instance}function Nc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,p=0;p<o.length;p++){var T=o[p];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Ld(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Cc=null;function Py(t,i,a){if(Cc===null){var o=new Map,h=Cc=new Map;h.set(a,o)}else h=Cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ci]||f[Vt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(i)||"";p=t+p;var T=o.get(p);T?T.push(f):o.set(p,[f])}}return o}function By(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function qT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function qy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function HT(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=io(o.href),f=i.querySelector(Rl(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ic.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Lt(f);return}f=i.ownerDocument||i,o=Uy(o),(h=ri.get(h))&&Ld(o,h),f=f.createElement("link"),Lt(f);var p=f;p._p=new Promise(function(T,R){p.onload=T,p.onerror=R}),an(f,"link",o),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ic.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ud=0;function FT(t,i){return t.stylesheets&&t.count===0&&Dc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&Ud===0&&(Ud=62500*ST());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Dc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Ud?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oc=null;function Dc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oc=new Map,i.forEach(GT,t),Oc=null,Ic.call(t))}function GT(t,i){if(!(i.state.loading&4)){var a=Oc.get(t);if(a)var o=a.get(null);else{a=new Map,Oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var p=h[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),o=p)}o&&a.set(null,o)}h=i.instance,p=h.getAttribute("data-precedence"),f=a.get(p)||o,f===o&&a.set(null,h),a.set(p,h),this.count++,o=Ic.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Cl={$$typeof:Ne,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function KT(t,i,a,o,h,f,p,T,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Hy(t,i,a,o,h,f,p,T,R,z,K,Q){return t=new KT(t,i,a,p,R,z,K,Q,T),i=1,f===!0&&(i|=24),f=jn(3,null,null,i),t.current=f,f.stateNode=t,i=yf(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},bf(f),t}function Fy(t){return t?(t=Va,t):Va}function Gy(t,i,a,o,h,f){h=Fy(h),o.context===null?o.context=h:o.pendingContext=h,o=Xs(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Zs(t,o,i),a!==null&&(wn(a,t,i),ol(a,t,i))}function Ky(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function zd(t,i){Ky(t,i),(t=t.alternate)&&Ky(t,i)}function Yy(t){if(t.tag===13||t.tag===31){var i=Qr(t,67108864);i!==null&&wn(i,t,67108864),zd(t,67108864)}}function Qy(t){if(t.tag===13||t.tag===31){var i=qn();i=Lr(i);var a=Qr(t,i);a!==null&&wn(a,t,i),zd(t,i)}}var kc=!0;function YT(t,i,a,o){var h=F.T;F.T=null;var f=ne.p;try{ne.p=2,Pd(t,i,a,o)}finally{ne.p=f,F.T=h}}function QT(t,i,a,o){var h=F.T;F.T=null;var f=ne.p;try{ne.p=8,Pd(t,i,a,o)}finally{ne.p=f,F.T=h}}function Pd(t,i,a,o){if(kc){var h=Bd(o);if(h===null)wd(t,i,o,Mc,a),Wy(t,o);else if(WT(h,t,i,a,o))o.stopPropagation();else if(Wy(t,o),i&4&&-1<$T.indexOf(t)){for(;h!==null;){var f=Qn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=kn(f.pendingLanes);if(p!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;p;){var R=1<<31-Ze(p);T.entanglements[1]|=R,p&=~R}Fi(f),(st&6)===0&&(gc=en()+500,Al(0))}}break;case 31:case 13:T=Qr(f,2),T!==null&&wn(T,f,2),_c(),zd(f,2)}if(f=Bd(o),f===null&&wd(t,i,o,Mc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else wd(t,i,o,null,a)}}function Bd(t){return t=$n(t),qd(t)}var Mc=null;function qd(t){if(Mc=null,t=Ii(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Mc=t,null}function $y(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case ee:return 2;case Z:return 8;case le:case ae:return 32;case xe:return 268435456;default:return 32}default:return 32}}var Hd=!1,ur=null,cr=null,hr=null,Il=new Map,Ol=new Map,fr=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wy(t,i){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Il.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(i.pointerId)}}function Dl(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Qn(i),i!==null&&Yy(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function WT(t,i,a,o,h){switch(i){case"focusin":return ur=Dl(ur,t,i,a,o,h),!0;case"dragenter":return cr=Dl(cr,t,i,a,o,h),!0;case"mouseover":return hr=Dl(hr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return Il.set(f,Dl(Il.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Ol.set(f,Dl(Ol.get(f)||null,t,i,a,o,h)),!0}return!1}function Xy(t){var i=Ii(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,hi(t.priority,function(){Qy(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,hi(t.priority,function(){Qy(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Bd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Go=o,a.target.dispatchEvent(o),Go=null}else return i=Qn(a),i!==null&&Yy(i),t.blockedOn=a,!1;i.shift()}return!0}function Zy(t,i,a){Vc(t)&&a.delete(i)}function XT(){Hd=!1,ur!==null&&Vc(ur)&&(ur=null),cr!==null&&Vc(cr)&&(cr=null),hr!==null&&Vc(hr)&&(hr=null),Il.forEach(Zy),Ol.forEach(Zy)}function Lc(t,i){t.blockedOn===i&&(t.blockedOn=null,Hd||(Hd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,XT)))}var jc=null;function Jy(t){jc!==t&&(jc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){jc===t&&(jc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(qd(o||a)===null)continue;break}var f=Qn(a);f!==null&&(t.splice(i,3),i-=3,Bf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function ro(t){function i(R){return Lc(R,t)}ur!==null&&Lc(ur,t),cr!==null&&Lc(cr,t),hr!==null&&Lc(hr,t),Il.forEach(i),Ol.forEach(i);for(var a=0;a<fr.length;a++){var o=fr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)Xy(a),a.blockedOn===null&&fr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],p=h[Wt]||null;if(typeof f=="function")p||Jy(a);else if(p){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,p=f[Wt]||null)T=p.formAction;else if(qd(h)!==null)continue}else T=p.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),Jy(a)}}}function e_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Fd(t){this._internalRoot=t}Uc.prototype.render=Fd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=qn();Gy(a,o,t,i,null,null)},Uc.prototype.unmount=Fd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Gy(t.current,2,null,t,null,null),_c(),i[Ni]=null}};function Uc(t){this._internalRoot=t}Uc.prototype.unstable_scheduleHydration=function(t){if(t){var i=_u();t={blockedOn:null,target:t,priority:i};for(var a=0;a<fr.length&&i!==0&&i<fr[a].priority;a++);fr.splice(a,0,t),a===0&&Xy(t)}};var t_=e.version;if(t_!=="19.2.3")throw Error(r(527,t_,"19.2.3"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var ZT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{fe=zc.inject(ZT),pe=zc}catch{}}return Ml.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=l0,f=u0,p=c0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Hy(t,1,!1,null,null,a,o,null,h,f,p,e_),t[Ni]=i.current,xd(t),new Fd(i)},Ml.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=l0,p=u0,T=c0,R=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),i=Hy(t,1,!0,i,a??null,o,h,R,f,p,T,e_),i.context=Fy(null),a=i.current,o=qn(),o=Lr(o),h=Xs(o),h.callback=null,Zs(a,h,o),a=o,i.current.lanes=a,Mr(i,a),Fi(i),t[Ni]=i.current,xd(t),new Uc(i)},Ml.version="19.2.3",Ml}var h_;function c2(){if(h_)return Yd.exports;h_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Yd.exports=u2(),Yd.exports}var h2=c2();const f2=()=>{};var f_={};const J1=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},d2=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],d=s[n++],g=s[n++],_=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const c=s[n++],d=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,g=d?s[l+1]:0,_=l+2<s.length,y=_?s[l+2]:0,b=c>>2,S=(c&3)<<4|g>>4;let O=(g&15)<<2|y>>6,H=y&63;_||(H=64,d||(O=64)),r.push(n[b],n[S],n[O],n[H])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(J1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):d2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],g=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const S=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||g==null||y==null||S==null)throw new m2;const O=c<<2|g>>4;if(r.push(O),y!==64){const H=g<<4&240|y>>2;if(r.push(H),S!==64){const J=y<<6&192|S;r.push(J)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class m2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p2=function(s){const e=J1(s);return ev.encodeByteArray(e,!0)},lh=function(s){return p2(s).replace(/\./g,"")},tv=function(s){try{return ev.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function g2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const y2=()=>g2().__FIREBASE_DEFAULTS__,_2=()=>{if(typeof process>"u"||typeof f_>"u")return;const s=f_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},v2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&tv(s[1]);return e&&JSON.parse(e)},Nh=()=>{try{return f2()||y2()||_2()||v2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},nv=s=>Nh()?.emulatorHosts?.[s],E2=s=>{const e=nv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iv=()=>Nh()?.config,sv=s=>Nh()?.[`_${s}`];class b2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rv(s){return(await fetch(s,{credentials:"include"})).ok}function T2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[lh(JSON.stringify(n)),lh(JSON.stringify(d)),""].join(".")}const Bl={};function A2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?s.emulator.push(e):s.prod.push(e);return s}function S2(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let d_=!1;function av(s,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||Bl[s]===e||Bl[s]||d_)return;Bl[s]=e;function n(O){return`__firebase__banner__${O}`}const r="__firebase__banner",c=A2().prod.length>0;function d(){const O=document.getElementById(r);O&&O.remove()}function g(O){O.style.display="flex",O.style.background="#7faaf0",O.style.position="fixed",O.style.bottom="5px",O.style.left="5px",O.style.padding=".5em",O.style.borderRadius="5px",O.style.alignItems="center"}function _(O,H){O.setAttribute("width","24"),O.setAttribute("id",H),O.setAttribute("height","24"),O.setAttribute("viewBox","0 0 24 24"),O.setAttribute("fill","none"),O.style.marginLeft="-6px"}function y(){const O=document.createElement("span");return O.style.cursor="pointer",O.style.marginLeft="16px",O.style.fontSize="24px",O.innerHTML=" &times;",O.onclick=()=>{d_=!0,d()},O}function b(O,H){O.setAttribute("id",H),O.innerText="Learn more",O.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",O.setAttribute("target","__blank"),O.style.paddingLeft="5px",O.style.textDecoration="underline"}function S(){const O=S2(r),H=n("text"),J=document.getElementById(H)||document.createElement("span"),se=n("learnmore"),re=document.getElementById(se)||document.createElement("a"),be=n("preprendIcon"),Ve=document.getElementById(be)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(O.created){const Ne=O.element;g(Ne),b(re,se);const rt=y();_(Ve,be),Ne.append(Ve,J,re,rt),document.body.appendChild(Ne)}c?(J.innerText="Preview backend disconnected.",Ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function w2(){const s=Nh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function C2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I2(){const s=mn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function O2(){return!w2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D2(){try{return typeof indexedDB=="object"}catch{return!1}}function k2(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const M2="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M2,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?V2(c,r):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Os(l,g,r)}}function V2(s,e){return s.replace(L2,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const L2=/\{\$([^}]+)}/g;function j2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function xr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],d=e[l];if(m_(c)&&m_(d)){if(!xr(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function m_(s){return s!==null&&typeof s=="object"}function ru(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function U2(s,e){const n=new z2(s,e);return n.subscribe.bind(n)}class z2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P2(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Xd),l.error===void 0&&(l.error=Xd),l.complete===void 0&&(l.complete=Xd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P2(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Xd(){}function vn(s){return s&&s._delegate?s._delegate:s}class fa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const la="[DEFAULT]";class B2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new b2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H2(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&d.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:q2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q2(s){return s===la?void 0:s}function H2(s){return s.instantiationMode==="EAGER"}class F2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ge||(Ge={}));const G2={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},K2=Ge.INFO,Y2={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Q2=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=Y2[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=K2,this._logHandler=Q2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const $2=(s,e)=>e.some(n=>s instanceof n);let p_,g_;function W2(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X2(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ov=new WeakMap,_m=new WeakMap,lv=new WeakMap,Zd=new WeakMap,Ym=new WeakMap;function Z2(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(Er(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&ov.set(n,s)}).catch(()=>{}),Ym.set(e,s),e}function J2(s){if(_m.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});_m.set(s,e)}let vm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return _m.get(s);if(e==="objectStoreNames")return s.objectStoreNames||lv.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function eA(s){vm=s(vm)}function tA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Jd(this),e,...n);return lv.set(r,e.sort?e.sort():[e]),Er(r)}:X2().includes(s)?function(...e){return s.apply(Jd(this),e),Er(ov.get(this))}:function(...e){return Er(s.apply(Jd(this),e))}}function nA(s){return typeof s=="function"?tA(s):(s instanceof IDBTransaction&&J2(s),$2(s,W2())?new Proxy(s,vm):s)}function Er(s){if(s instanceof IDBRequest)return Z2(s);if(Zd.has(s))return Zd.get(s);const e=nA(s);return e!==s&&(Zd.set(s,e),Ym.set(e,s)),e}const Jd=s=>Ym.get(s);function iA(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,e),g=Er(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Er(d.result),_.oldVersion,_.newVersion,Er(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const sA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],em=new Map;function y_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(em.get(e))return em.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=rA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||sA.includes(n)))return;const c=async function(d,...g){const _=this.transaction(d,l?"readwrite":"readonly");let y=_.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&_.done]))[0]};return em.set(e,c),c}eA(s=>({...s,get:(e,n,r)=>y_(e,n)||s.get(e,n,r),has:(e,n)=>!!y_(e,n)||s.has(e,n)}));class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oA(s){return s.getComponent()?.type==="VERSION"}const Em="@firebase/app",__="0.14.7";const xs=new Km("@firebase/app"),lA="@firebase/app-compat",uA="@firebase/analytics-compat",cA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",dA="@firebase/auth",mA="@firebase/auth-compat",pA="@firebase/database",gA="@firebase/data-connect",yA="@firebase/database-compat",_A="@firebase/functions",vA="@firebase/functions-compat",EA="@firebase/installations",bA="@firebase/installations-compat",TA="@firebase/messaging",AA="@firebase/messaging-compat",SA="@firebase/performance",xA="@firebase/performance-compat",wA="@firebase/remote-config",RA="@firebase/remote-config-compat",NA="@firebase/storage",CA="@firebase/storage-compat",IA="@firebase/firestore",OA="@firebase/ai",DA="@firebase/firestore-compat",kA="firebase",MA="12.8.0";const bm="[DEFAULT]",VA={[Em]:"fire-core",[lA]:"fire-core-compat",[cA]:"fire-analytics",[uA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[dA]:"fire-auth",[mA]:"fire-auth-compat",[pA]:"fire-rtdb",[gA]:"fire-data-connect",[yA]:"fire-rtdb-compat",[_A]:"fire-fn",[vA]:"fire-fn-compat",[EA]:"fire-iid",[bA]:"fire-iid-compat",[TA]:"fire-fcm",[AA]:"fire-fcm-compat",[SA]:"fire-perf",[xA]:"fire-perf-compat",[wA]:"fire-rc",[RA]:"fire-rc-compat",[NA]:"fire-gcs",[CA]:"fire-gcs-compat",[IA]:"fire-fst",[DA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};const uh=new Map,LA=new Map,Tm=new Map;function v_(s,e){try{s.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function _o(s){const e=s.name;if(Tm.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,s);for(const n of uh.values())v_(n,s);for(const n of LA.values())v_(n,s);return!0}function Qm(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function oi(s){return s==null?!1:s.settings!==void 0}const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new su("app","Firebase",jA);class UA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const Ro=MA;function uv(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:bm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw br.create("bad-app-name",{appName:String(l)});if(n||(n=iv()),!n)throw br.create("no-options");const c=uh.get(l);if(c){if(xr(n,c.options)&&xr(r,c.config))return c;throw br.create("duplicate-app",{appName:l})}const d=new F2(l);for(const _ of Tm.values())d.addComponent(_);const g=new UA(n,r,d);return uh.set(l,g),g}function cv(s=bm){const e=uh.get(s);if(!e&&s===bm&&iv())return uv();if(!e)throw br.create("no-app",{appName:s});return e}function Tr(s,e,n){let r=VA[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(d.join(" "));return}_o(new fa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const zA="firebase-heartbeat-database",PA=1,Ql="firebase-heartbeat-store";let tm=null;function hv(){return tm||(tm=iA(zA,PA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(s=>{throw br.create("idb-open",{originalErrorMessage:s.message})})),tm}async function BA(s){try{const n=(await hv()).transaction(Ql),r=await n.objectStore(Ql).get(fv(s));return await n.done,r}catch(e){if(e instanceof Os)xs.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e?.message});xs.warn(n.message)}}}async function E_(s,e){try{const r=(await hv()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,fv(s)),await r.done}catch(n){if(n instanceof Os)xs.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n?.message});xs.warn(r.message)}}}function fv(s){return`${s.name}!${s.options.appId}`}const qA=1024,HA=30;class FA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=b_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>HA){const l=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=b_(),{heartbeatsToSend:n,unsentEntries:r}=GA(this._heartbeatsCache.heartbeats),l=lh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return xs.warn(e),""}}}function b_(){return new Date().toISOString().substring(0,10)}function GA(s,e=qA){const n=[];let r=s.slice();for(const l of s){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),T_(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),T_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D2()?k2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function T_(s){return lh(JSON.stringify({version:2,heartbeats:s})).length}function YA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function QA(s){_o(new fa("platform-logger",e=>new aA(e),"PRIVATE")),_o(new fa("heartbeat",e=>new FA(e),"PRIVATE")),Tr(Em,__,s),Tr(Em,__,"esm2020"),Tr("fire-js","")}QA("");var $A="firebase",WA="12.8.0";Tr($A,WA,"app");function dv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XA=dv,mv=new su("auth","Firebase",dv());const ch=new Km("@firebase/auth");function ZA(s,...e){ch.logLevel<=Ge.WARN&&ch.warn(`Auth (${Ro}): ${s}`,...e)}function Wc(s,...e){ch.logLevel<=Ge.ERROR&&ch.error(`Auth (${Ro}): ${s}`,...e)}function ws(s,...e){throw $m(s,...e)}function Yi(s,...e){return $m(s,...e)}function pv(s,e,n){const r={...XA(),[e]:n};return new su("auth","Firebase",r).create(e,{appName:s.name})}function Ss(s){return pv(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return mv.create(s,...e)}function Re(s,e,...n){if(!s)throw $m(e,...n)}function Ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Wc(e),new Error(e)}function Rs(s,e){s||Ts(e)}function Am(){return typeof self<"u"&&self.location?.href||""}function JA(){return A_()==="http:"||A_()==="https:"}function A_(){return typeof self<"u"&&self.location?.protocol||null}function eS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JA()||N2()||"connection"in navigator)?navigator.onLine:!0}function tS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class au{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=x2()||C2()}get(){return eS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wm(s,e){Rs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sS=new au(3e4,6e4);function ou(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function No(s,e,n,r,l={}){return yv(s,l,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const g=ru({key:s.config.apiKey,...d}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:_,...c};return R2()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&wo(s.emulatorConfig.host)&&(y.credentials="include"),gv.fetch()(await _v(s,s.config.apiHost,n,g),y)})}async function yv(s,e,n){s._canInitEmulator=!1;const r={...nS,...e};try{const l=new rS(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Pc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[_,y]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(s,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Pc(s,"email-already-in-use",d);if(_==="USER_DISABLED")throw Pc(s,"user-disabled",d);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw pv(s,b,y);ws(s,b)}}catch(l){if(l instanceof Os)throw l;ws(s,"network-request-failed",{message:String(l)})}}async function Xm(s,e,n,r,l={}){const c=await No(s,e,n,r,l);return"mfaPendingCredential"in c&&ws(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function _v(s,e,n,r){const l=`${e}${n}?${r}`,c=s,d=c.config.emulator?Wm(s.config,l):`${s.config.apiScheme}://${l}`;return iS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class rS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),sS.get())})}}function Pc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Yi(s,e,r);return l.customData._tokenResponse=n,l}async function aS(s,e){return No(s,"POST","/v1/accounts:delete",e)}async function hh(s,e){return No(s,"POST","/v1/accounts:lookup",e)}function ql(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oS(s,e=!1){const n=vn(s),r=await n.getIdToken(e),l=Zm(r);Re(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:r,authTime:ql(nm(l.auth_time)),issuedAtTime:ql(nm(l.iat)),expirationTime:ql(nm(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function nm(s){return Number(s)*1e3}function Zm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const l=tv(n);return l?JSON.parse(l):(Wc("Failed to decode base64 JWT payload"),null)}catch(l){return Wc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function S_(s){const e=Zm(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $l(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Os&&lS(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function lS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class uS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ql(this.lastLoginAt),this.creationTime=ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function fh(s){const e=s.auth,n=await s.getIdToken(),r=await $l(s,hh(e,{idToken:n}));Re(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?vv(l.providerUserInfo):[],d=hS(s.providerData,c),g=s.isAnonymous,_=!(s.email&&l.passwordHash)&&!d?.length,y=g?_:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Sm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function cS(s){const e=vn(s);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hS(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function vv(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function fS(s,e){const n=await yv(s,{},async()=>{const r=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await _v(s,l,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:r};return s.emulatorConfig&&wo(s.emulatorConfig.host)&&(_.credentials="include"),gv.fetch()(d,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dS(s,e){return No(s,"POST","/v2/accounts:revokeToken",ou(s,e))}class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await fS(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,d=new ho;return r&&(Re(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Re(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Re(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return Ts("not implemented")}}function mr(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new uS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Sm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oS(this,e)}reload(){return cS(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await $l(this,aS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,_=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:O,isAnonymous:H,providerData:J,stsTokenManager:se}=n;Re(S&&se,e,"internal-error");const re=ho.fromJSON(this.name,se);Re(typeof S=="string",e,"internal-error"),mr(r,e.name),mr(l,e.name),Re(typeof O=="boolean",e,"internal-error"),Re(typeof H=="boolean",e,"internal-error"),mr(c,e.name),mr(d,e.name),mr(g,e.name),mr(_,e.name),mr(y,e.name),mr(b,e.name);const be=new bi({uid:S,auth:e,email:l,emailVerified:O,displayName:r,isAnonymous:H,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:re,createdAt:y,lastLoginAt:b});return J&&Array.isArray(J)&&(be.providerData=J.map(Ve=>({...Ve}))),_&&(be._redirectEventId=_),be}static async _fromIdTokenResponse(e,n,r=!1){const l=new ho;l.updateFromServerResponse(n);const c=new bi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await fh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Re(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?vv(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new ho;g.updateFromIdToken(r);const _=new bi({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Sm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(_,y),_}}const x_=new Map;function As(s){Rs(s instanceof Function,"Expected a class definition");let e=x_.get(s);return e?(Rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,x_.set(s,e),e)}class Ev{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ev.type="NONE";const w_=Ev;function Xc(s,e,n){return`firebase:${s}:${e}:${n}`}class fo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Xc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Xc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hh(this.auth,{idToken:e}).catch(()=>{});return n?bi._fromGetAccountInfoResponse(this.auth,n,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fo(As(w_),e,r);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||As(w_);const d=Xc(r,e.config.apiKey,e.name);let g=null;for(const y of n)try{const b=await y._get(d);if(b){let S;if(typeof b=="string"){const O=await hh(e,{idToken:b}).catch(()=>{});if(!O)break;S=await bi._fromGetAccountInfoResponse(e,O,b)}else S=bi._fromJSON(e,b);y!==c&&(g=S),c=y;break}}catch{}const _=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new fo(c,e,r):(c=_[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new fo(c,e,r))}}function R_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wv(e))return"Blackberry";if(Rv(e))return"Webos";if(Tv(e))return"Safari";if((e.includes("chrome/")||Av(e))&&!e.includes("edge/"))return"Chrome";if(xv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function bv(s=mn()){return/firefox\//i.test(s)}function Tv(s=mn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Av(s=mn()){return/crios\//i.test(s)}function Sv(s=mn()){return/iemobile/i.test(s)}function xv(s=mn()){return/android/i.test(s)}function wv(s=mn()){return/blackberry/i.test(s)}function Rv(s=mn()){return/webos/i.test(s)}function Jm(s=mn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mS(s=mn()){return Jm(s)&&!!window.navigator?.standalone}function pS(){return I2()&&document.documentMode===10}function Nv(s=mn()){return Jm(s)||xv(s)||Rv(s)||wv(s)||/windows phone/i.test(s)||Sv(s)}function Cv(s,e=[]){let n;switch(s){case"Browser":n=R_(mn());break;case"Worker":n=`${R_(mn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${r}`}class gS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,g)=>{try{const _=e(c);d(_)}catch(_){g(_)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function yS(s,e={}){return No(s,"GET","/v2/passwordPolicy",ou(s,e))}const _S=6;class vS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_S,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class ES{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N_(this),this.idTokenSubscription=new N_(this),this.beforeStateQueue=new gS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hh(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(r=g.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Ss(this));const n=e?vn(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yS(this),n=new vS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dS(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,r,l);return()=>{d=!0,_()}}else{const _=e.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lu(s){return vn(s)}class N_{constructor(e){this.auth=e,this.observer=null,this.addObserver=U2(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(s){ep=s}function TS(s){return ep.loadJS(s)}function AS(){return ep.gapiScript}function SS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function xS(s,e){const n=Qm(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(xr(c,e??{}))return l;ws(l,"already-initialized")}return n.initialize({options:e})}function wS(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(As);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function RS(s,e,n){const r=lu(s);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=Iv(e),{host:d,port:g}=NS(e),_=g===null?"":`:${g}`,y={url:`${c}//${d}${_}/`},b=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(xr(y,r.config.emulator)&&xr(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,wo(d)?(rv(`${c}//${d}${_}`),av("Auth",!0)):CS()}function Iv(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function NS(s){const e=Iv(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:C_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:C_(d)}}}function C_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function CS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ov{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function mo(s,e){return Xm(s,"POST","/v1/accounts:signInWithIdp",ou(s,e))}const IS="http://localhost";class da extends Ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const d=new da(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:IS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}class Dv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class uu extends Dv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pr extends uu{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";class gr extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return da._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";class yr extends uu{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";class _r extends uu{constructor(){super("twitter.com")}static credential(e,n){return da._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";async function OS(s,e){return Xm(s,"POST","/v1/accounts:signUp",ou(s,e))}class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await bi._fromIdTokenResponse(e,r,l),d=I_(r);return new Ns({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=I_(r);return new Ns({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function I_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function DS(s){if(oi(s.app))return Promise.reject(Ss(s));const e=lu(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ns({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await OS(e,{returnSecureToken:!0}),r=await Ns._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class dh extends Os{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new dh(e,n,r,l)}}function kv(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(s,c,e,r):c})}async function kS(s,e,n=!1){const r=await $l(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Ns._forOperation(s,"link",r)}async function MS(s,e,n=!1){const{auth:r}=s;if(oi(r.app))return Promise.reject(Ss(r));const l="reauthenticate";try{const c=await $l(s,kv(r,l,e,s),n);Re(c.idToken,r,"internal-error");const d=Zm(c.idToken);Re(d,r,"internal-error");const{sub:g}=d;return Re(s.uid===g,r,"user-mismatch"),Ns._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ws(r,"user-mismatch"),c}}async function VS(s,e,n=!1){if(oi(s.app))return Promise.reject(Ss(s));const r="signIn",l=await kv(s,r,e),c=await Ns._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function LS(s,e){return Xm(s,"POST","/v1/accounts:signInWithCustomToken",ou(s,e))}async function jS(s,e){if(oi(s.app))return Promise.reject(Ss(s));const n=lu(s),r=await LS(n,{token:e,returnSecureToken:!0}),l=await Ns._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(l.user),l}function US(s,e,n,r){return vn(s).onIdTokenChanged(e,n,r)}function zS(s,e,n){return vn(s).beforeAuthStateChanged(e,n)}function PS(s,e,n,r){return vn(s).onAuthStateChanged(e,n,r)}const mh="__sak";class Mv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BS=1e3,qS=10;class Vv extends Mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);pS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,qS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vv.type="LOCAL";const HS=Vv;class Lv extends Mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lv.type="SESSION";const jv=Lv;function FS(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Ch(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(d).map(async y=>y(n.origin,c)),_=await FS(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];function tp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class GS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,_)=>{const y=tp("",20);l.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(S){const O=S;if(O.data.eventId===y)switch(O.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(O.data.response);break;default:clearTimeout(b),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Qi(){return window}function KS(s){Qi().location.href=s}function Uv(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function YS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QS(){return navigator?.serviceWorker?.controller||null}function $S(){return Uv()?self:null}const zv="firebaseLocalStorageDb",WS=1,ph="firebaseLocalStorage",Pv="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(s,e){return s.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function XS(){const s=indexedDB.deleteDatabase(zv);return new cu(s).toPromise()}function xm(){const s=indexedDB.open(zv,WS);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ph,{keyPath:Pv})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await XS(),e(await xm()))})})}async function O_(s,e,n){const r=Ih(s,!0).put({[Pv]:e,value:n});return new cu(r).toPromise()}async function ZS(s,e){const n=Ih(s,!1).get(e),r=await new cu(n).toPromise();return r===void 0?null:r.value}function D_(s,e){const n=Ih(s,!0).delete(e);return new cu(n).toPromise()}const JS=800,ex=3;class Bv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ex)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance($S()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YS(),!this.activeServiceWorker)return;this.sender=new GS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xm();return await O_(e,mh,"1"),await D_(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ih(l,!1).getAll();return new cu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bv.type="LOCAL";const tx=Bv;new au(3e4,6e4);function nx(s,e){return e?As(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class np extends Ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ix(s){return VS(s.auth,new np(s),s.bypassAuthState)}function sx(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),MS(n,new np(s),s.bypassAuthState)}async function rx(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),kS(n,new np(s),s.bypassAuthState)}class qv{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ix;case"linkViaPopup":case"linkViaRedirect":return rx;case"reauthViaPopup":case"reauthViaRedirect":return sx;default:ws(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ax=new au(2e3,1e4);class co extends qv{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ax.get())};e()}}co.currentPopupAction=null;const ox="pendingRedirect",Zc=new Map;class lx extends qv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await ux(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ux(s,e){const n=fx(e),r=hx(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function cx(s,e){Zc.set(s._key(),e)}function hx(s){return As(s._redirectPersistence)}function fx(s){return Xc(ox,s.config.apiKey,s.name)}async function dx(s,e,n=!1){if(oi(s.app))return Promise.reject(Ss(s));const r=lu(s),l=nx(r,e),d=await new lx(r,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const mx=600*1e3;class px{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Hv(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Yi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Hv({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function gx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hv(s);default:return!1}}async function yx(s,e={}){return No(s,"GET","/v1/projects",e)}const _x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vx=/^https?/;async function Ex(s){if(s.config.emulator)return;const{authorizedDomains:e}=await yx(s);for(const n of e)try{if(bx(n))return}catch{}ws(s,"unauthorized-domain")}function bx(s){const e=Am(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!vx.test(n))return!1;if(_x.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const Tx=new au(3e4,6e4);function M_(){const s=Qi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Ax(s){return new Promise((e,n)=>{function r(){M_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M_(),n(Yi(s,"network-request-failed"))},timeout:Tx.get()})}if(Qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qi().gapi?.load)r();else{const l=SS("iframefcb");return Qi()[l]=()=>{gapi.load?r():n(Yi(s,"network-request-failed"))},TS(`${AS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function Sx(s){return Jc=Jc||Ax(s),Jc}const xx=new au(5e3,15e3),wx="__/auth/iframe",Rx="emulator/auth/iframe",Nx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ix(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Wm(e,Rx):`https://${s.config.authDomain}/${wx}`,r={apiKey:e.apiKey,appName:s.name,v:Ro},l=Cx.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${ru(r).slice(1)}`}async function Ox(s){const e=await Sx(s),n=Qi().gapi;return Re(n,s,"internal-error"),e.open({where:document.body,url:Ix(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nx,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=Yi(s,"network-request-failed"),g=Qi().setTimeout(()=>{c(d)},xx.get());function _(){Qi().clearTimeout(g),l(r)}r.ping(_).then(_,()=>{c(d)})}))}const Dx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kx=500,Mx=600,Vx="_blank",Lx="http://localhost";class V_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jx(s,e,n,r=kx,l=Mx){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const _={...Dx,width:r.toString(),height:l.toString(),top:c,left:d},y=mn().toLowerCase();n&&(g=Av(y)?Vx:n),bv(y)&&(e=e||Lx,_.scrollbars="yes");const b=Object.entries(_).reduce((O,[H,J])=>`${O}${H}=${J},`,"");if(mS(y)&&g!=="_self")return Ux(e||"",g),new V_(null);const S=window.open(e||"",g,b);Re(S,s,"popup-blocked");try{S.focus()}catch{}return new V_(S)}function Ux(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const zx="__/auth/handler",Px="emulator/auth/handler",Bx=encodeURIComponent("fac");async function L_(s,e,n,r,l,c){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Ro,eventId:l};if(e instanceof Dv){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",j2(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))d[b]=S}if(e instanceof uu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const _=await s._getAppCheckToken(),y=_?`#${Bx}=${encodeURIComponent(_)}`:"";return`${qx(s)}?${ru(g).slice(1)}${y}`}function qx({config:s}){return s.emulator?Wm(s,Px):`https://${s.authDomain}/${zx}`}const im="webStorageSupport";class Hx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jv,this._completeRedirectFn=dx,this._overrideRedirectResult=cx}async _openPopup(e,n,r,l){Rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await L_(e,n,r,Am(),l);return jx(e,c,tp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await L_(e,n,r,Am(),l);return KS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Rs(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ox(e),r=new px(e);return n.register("authEvent",l=>(Re(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(im,{type:im},l=>{const c=l?.[0]?.[im];c!==void 0&&n(!!c),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ex(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nv()||Tv()||Jm()}}const Fx=Hx;var j_="@firebase/auth",U_="1.12.0";class Gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Kx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yx(s){_o(new fa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=r.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cv(s)},y=new ES(r,l,c,_);return wS(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_o(new fa("auth-internal",e=>{const n=lu(e.getProvider("auth").getImmediate());return(r=>new Gx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(j_,U_,Kx(s)),Tr(j_,U_,"esm2020")}const Qx=300,$x=sv("authIdTokenMaxAge")||Qx;let z_=null;const Wx=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$x)return;const l=n?.token;z_!==l&&(z_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Xx(s=cv()){const e=Qm(s,"auth");if(e.isInitialized())return e.getImmediate();const n=xS(s,{popupRedirectResolver:Fx,persistence:[tx,HS,jv]}),r=sv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=Wx(c.toString());zS(n,d,()=>d(n.currentUser)),US(n,g=>d(g))}}const l=nv("auth");return l&&RS(n,`http://${l}`),n}function Zx(){return document.getElementsByTagName("head")?.[0]??document}bS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=Yi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",Zx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yx("Browser");var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ar,Fv;(function(){var s;function e(N,x){function C(){}C.prototype=x.prototype,N.F=x.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(M,I,L){for(var w=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)w[ct-2]=arguments[ct];return x.prototype[I].apply(M,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,x,C){C||(C=0);const M=Array(16);if(typeof x=="string")for(var I=0;I<16;++I)M[I]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(I=0;I<16;++I)M[I]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=N.g[0],C=N.g[1],I=N.g[2];let L=N.g[3],w;w=x+(L^C&(I^L))+M[0]+3614090360&4294967295,x=C+(w<<7&4294967295|w>>>25),w=L+(I^x&(C^I))+M[1]+3905402710&4294967295,L=x+(w<<12&4294967295|w>>>20),w=I+(C^L&(x^C))+M[2]+606105819&4294967295,I=L+(w<<17&4294967295|w>>>15),w=C+(x^I&(L^x))+M[3]+3250441966&4294967295,C=I+(w<<22&4294967295|w>>>10),w=x+(L^C&(I^L))+M[4]+4118548399&4294967295,x=C+(w<<7&4294967295|w>>>25),w=L+(I^x&(C^I))+M[5]+1200080426&4294967295,L=x+(w<<12&4294967295|w>>>20),w=I+(C^L&(x^C))+M[6]+2821735955&4294967295,I=L+(w<<17&4294967295|w>>>15),w=C+(x^I&(L^x))+M[7]+4249261313&4294967295,C=I+(w<<22&4294967295|w>>>10),w=x+(L^C&(I^L))+M[8]+1770035416&4294967295,x=C+(w<<7&4294967295|w>>>25),w=L+(I^x&(C^I))+M[9]+2336552879&4294967295,L=x+(w<<12&4294967295|w>>>20),w=I+(C^L&(x^C))+M[10]+4294925233&4294967295,I=L+(w<<17&4294967295|w>>>15),w=C+(x^I&(L^x))+M[11]+2304563134&4294967295,C=I+(w<<22&4294967295|w>>>10),w=x+(L^C&(I^L))+M[12]+1804603682&4294967295,x=C+(w<<7&4294967295|w>>>25),w=L+(I^x&(C^I))+M[13]+4254626195&4294967295,L=x+(w<<12&4294967295|w>>>20),w=I+(C^L&(x^C))+M[14]+2792965006&4294967295,I=L+(w<<17&4294967295|w>>>15),w=C+(x^I&(L^x))+M[15]+1236535329&4294967295,C=I+(w<<22&4294967295|w>>>10),w=x+(I^L&(C^I))+M[1]+4129170786&4294967295,x=C+(w<<5&4294967295|w>>>27),w=L+(C^I&(x^C))+M[6]+3225465664&4294967295,L=x+(w<<9&4294967295|w>>>23),w=I+(x^C&(L^x))+M[11]+643717713&4294967295,I=L+(w<<14&4294967295|w>>>18),w=C+(L^x&(I^L))+M[0]+3921069994&4294967295,C=I+(w<<20&4294967295|w>>>12),w=x+(I^L&(C^I))+M[5]+3593408605&4294967295,x=C+(w<<5&4294967295|w>>>27),w=L+(C^I&(x^C))+M[10]+38016083&4294967295,L=x+(w<<9&4294967295|w>>>23),w=I+(x^C&(L^x))+M[15]+3634488961&4294967295,I=L+(w<<14&4294967295|w>>>18),w=C+(L^x&(I^L))+M[4]+3889429448&4294967295,C=I+(w<<20&4294967295|w>>>12),w=x+(I^L&(C^I))+M[9]+568446438&4294967295,x=C+(w<<5&4294967295|w>>>27),w=L+(C^I&(x^C))+M[14]+3275163606&4294967295,L=x+(w<<9&4294967295|w>>>23),w=I+(x^C&(L^x))+M[3]+4107603335&4294967295,I=L+(w<<14&4294967295|w>>>18),w=C+(L^x&(I^L))+M[8]+1163531501&4294967295,C=I+(w<<20&4294967295|w>>>12),w=x+(I^L&(C^I))+M[13]+2850285829&4294967295,x=C+(w<<5&4294967295|w>>>27),w=L+(C^I&(x^C))+M[2]+4243563512&4294967295,L=x+(w<<9&4294967295|w>>>23),w=I+(x^C&(L^x))+M[7]+1735328473&4294967295,I=L+(w<<14&4294967295|w>>>18),w=C+(L^x&(I^L))+M[12]+2368359562&4294967295,C=I+(w<<20&4294967295|w>>>12),w=x+(C^I^L)+M[5]+4294588738&4294967295,x=C+(w<<4&4294967295|w>>>28),w=L+(x^C^I)+M[8]+2272392833&4294967295,L=x+(w<<11&4294967295|w>>>21),w=I+(L^x^C)+M[11]+1839030562&4294967295,I=L+(w<<16&4294967295|w>>>16),w=C+(I^L^x)+M[14]+4259657740&4294967295,C=I+(w<<23&4294967295|w>>>9),w=x+(C^I^L)+M[1]+2763975236&4294967295,x=C+(w<<4&4294967295|w>>>28),w=L+(x^C^I)+M[4]+1272893353&4294967295,L=x+(w<<11&4294967295|w>>>21),w=I+(L^x^C)+M[7]+4139469664&4294967295,I=L+(w<<16&4294967295|w>>>16),w=C+(I^L^x)+M[10]+3200236656&4294967295,C=I+(w<<23&4294967295|w>>>9),w=x+(C^I^L)+M[13]+681279174&4294967295,x=C+(w<<4&4294967295|w>>>28),w=L+(x^C^I)+M[0]+3936430074&4294967295,L=x+(w<<11&4294967295|w>>>21),w=I+(L^x^C)+M[3]+3572445317&4294967295,I=L+(w<<16&4294967295|w>>>16),w=C+(I^L^x)+M[6]+76029189&4294967295,C=I+(w<<23&4294967295|w>>>9),w=x+(C^I^L)+M[9]+3654602809&4294967295,x=C+(w<<4&4294967295|w>>>28),w=L+(x^C^I)+M[12]+3873151461&4294967295,L=x+(w<<11&4294967295|w>>>21),w=I+(L^x^C)+M[15]+530742520&4294967295,I=L+(w<<16&4294967295|w>>>16),w=C+(I^L^x)+M[2]+3299628645&4294967295,C=I+(w<<23&4294967295|w>>>9),w=x+(I^(C|~L))+M[0]+4096336452&4294967295,x=C+(w<<6&4294967295|w>>>26),w=L+(C^(x|~I))+M[7]+1126891415&4294967295,L=x+(w<<10&4294967295|w>>>22),w=I+(x^(L|~C))+M[14]+2878612391&4294967295,I=L+(w<<15&4294967295|w>>>17),w=C+(L^(I|~x))+M[5]+4237533241&4294967295,C=I+(w<<21&4294967295|w>>>11),w=x+(I^(C|~L))+M[12]+1700485571&4294967295,x=C+(w<<6&4294967295|w>>>26),w=L+(C^(x|~I))+M[3]+2399980690&4294967295,L=x+(w<<10&4294967295|w>>>22),w=I+(x^(L|~C))+M[10]+4293915773&4294967295,I=L+(w<<15&4294967295|w>>>17),w=C+(L^(I|~x))+M[1]+2240044497&4294967295,C=I+(w<<21&4294967295|w>>>11),w=x+(I^(C|~L))+M[8]+1873313359&4294967295,x=C+(w<<6&4294967295|w>>>26),w=L+(C^(x|~I))+M[15]+4264355552&4294967295,L=x+(w<<10&4294967295|w>>>22),w=I+(x^(L|~C))+M[6]+2734768916&4294967295,I=L+(w<<15&4294967295|w>>>17),w=C+(L^(I|~x))+M[13]+1309151649&4294967295,C=I+(w<<21&4294967295|w>>>11),w=x+(I^(C|~L))+M[4]+4149444226&4294967295,x=C+(w<<6&4294967295|w>>>26),w=L+(C^(x|~I))+M[11]+3174756917&4294967295,L=x+(w<<10&4294967295|w>>>22),w=I+(x^(L|~C))+M[2]+718787259&4294967295,I=L+(w<<15&4294967295|w>>>17),w=C+(L^(I|~x))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.v=function(N,x){x===void 0&&(x=N.length);const C=x-this.blockSize,M=this.C;let I=this.h,L=0;for(;L<x;){if(I==0)for(;L<=C;)l(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<x;)if(M[I++]=N.charCodeAt(L++),I==this.blockSize){l(this,M),I=0;break}}else for(;L<x;)if(M[I++]=N[L++],I==this.blockSize){l(this,M),I=0;break}}this.h=I,this.o+=x},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)N[x++]=this.g[C]>>>M&255;return N};function c(N,x){var C=g;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=x(N)}function d(N,x){this.h=x;const C=[];let M=!0;for(let I=N.length-1;I>=0;I--){const L=N[I]|0;M&&L==x||(C[I]=L,M=!1)}this.g=C}var g={};function _(N){return-128<=N&&N<128?c(N,function(x){return new d([x|0],x<0?-1:0)}):new d([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return re(y(-N));const x=[];let C=1;for(let M=0;N>=C;M++)x[M]=N/C|0,C*=4294967296;return new d(x,0)}function b(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return re(b(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(x,8));let M=S;for(let L=0;L<N.length;L+=8){var I=Math.min(8,N.length-L);const w=parseInt(N.substring(L,L+I),x);I<8?(I=y(Math.pow(x,I)),M=M.j(I).add(y(w))):(M=M.j(C),M=M.add(y(w)))}return M}var S=_(0),O=_(1),H=_(16777216);s=d.prototype,s.m=function(){if(se(this))return-re(this).m();let N=0,x=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);N+=(M>=0?M:4294967296+M)*x,x*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(J(this))return"0";if(se(this))return"-"+re(this).toString(N);const x=y(Math.pow(N,6));var C=this;let M="";for(;;){const I=rt(C,x).g;C=be(C,I.j(x));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=I,J(C))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function J(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function se(N){return N.h==-1}s.l=function(N){return N=be(this,N),se(N)?-1:J(N)?0:1};function re(N){const x=N.g.length,C=[];for(let M=0;M<x;M++)C[M]=~N.g[M];return new d(C,~N.h).add(O)}s.abs=function(){return se(this)?re(this):this},s.add=function(N){const x=Math.max(this.g.length,N.g.length),C=[];let M=0;for(let I=0;I<=x;I++){let L=M+(this.i(I)&65535)+(N.i(I)&65535),w=(L>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);M=w>>>16,L&=65535,w&=65535,C[I]=w<<16|L}return new d(C,C[C.length-1]&-2147483648?-1:0)};function be(N,x){return N.add(re(x))}s.j=function(N){if(J(this)||J(N))return S;if(se(this))return se(N)?re(this).j(re(N)):re(re(this).j(N));if(se(N))return re(this.j(re(N)));if(this.l(H)<0&&N.l(H)<0)return y(this.m()*N.m());const x=this.g.length+N.g.length,C=[];for(var M=0;M<2*x;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let I=0;I<N.g.length;I++){const L=this.i(M)>>>16,w=this.i(M)&65535,ct=N.i(I)>>>16,bt=N.i(I)&65535;C[2*M+2*I]+=w*bt,Ve(C,2*M+2*I),C[2*M+2*I+1]+=L*bt,Ve(C,2*M+2*I+1),C[2*M+2*I+1]+=w*ct,Ve(C,2*M+2*I+1),C[2*M+2*I+2]+=L*ct,Ve(C,2*M+2*I+2)}for(N=0;N<x;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=x;N<2*x;N++)C[N]=0;return new d(C,0)};function Ve(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function Ne(N,x){this.g=N,this.h=x}function rt(N,x){if(J(x))throw Error("division by zero");if(J(N))return new Ne(S,S);if(se(N))return x=rt(re(N),x),new Ne(re(x.g),re(x.h));if(se(x))return x=rt(N,re(x)),new Ne(re(x.g),x.h);if(N.g.length>30){if(se(N)||se(x))throw Error("slowDivide_ only works with positive integers.");for(var C=O,M=x;M.l(N)<=0;)C=Et(C),M=Et(M);var I=qe(C,1),L=qe(M,1);for(M=qe(M,2),C=qe(C,2);!J(M);){var w=L.add(M);w.l(N)<=0&&(I=I.add(C),L=w),M=qe(M,1),C=qe(C,1)}return x=be(N,I.j(x)),new Ne(I,x)}for(I=S;N.l(x)>=0;){for(C=Math.max(1,Math.floor(N.m()/x.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=y(C),w=L.j(x);se(w)||w.l(N)>0;)C-=M,L=y(C),w=L.j(x);J(L)&&(L=O),I=I.add(L),N=be(N,w)}return new Ne(I,N)}s.B=function(N){return rt(this,N).h},s.and=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)&N.i(M);return new d(C,this.h&N.h)},s.or=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)|N.i(M);return new d(C,this.h|N.h)},s.xor=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)^N.i(M);return new d(C,this.h^N.h)};function Et(N){const x=N.g.length+1,C=[];for(let M=0;M<x;M++)C[M]=N.i(M)<<1|N.i(M-1)>>>31;return new d(C,N.h)}function qe(N,x){const C=x>>5;x%=32;const M=N.g.length-C,I=[];for(let L=0;L<M;L++)I[L]=x>0?N.i(L+C)>>>x|N.i(L+C+1)<<32-x:N.i(L+C);return new d(I,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Fv=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ar=d}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gv,jl,Kv,eh,wm,Yv,Qv,$v;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(u,m){if(m)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var j=u[A];if(!(j in v))break e;v=v[j]}u=u[u.length-1],A=v[u],m=m(A),m!=A&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var v=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&v.push([A,m[A]]);return v}});var c=c||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=_,y.apply(null,arguments)}function b(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,j,B){for(var te=Array(arguments.length-2),je=2;je<arguments.length;je++)te[je-2]=arguments[je];return m.prototype[j].apply(A,te)}}var O=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function H(u){const m=u.length;if(m>0){const v=Array(m);for(let A=0;A<m;A++)v[A]=u[A];return v}return[]}function J(u,m){for(let A=1;A<arguments.length;A++){const j=arguments[A];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=u.length||0;const B=j.length||0;u.length=v+B;for(let te=0;te<B;te++)u[v+te]=j[te]}else u.push(j)}}class se{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function re(u){d.setTimeout(()=>{throw u},0)}function be(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ve{constructor(){this.h=this.g=null}add(m,v){const A=Ne.get();A.set(m,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Ne=new se(()=>new rt,u=>u.reset());class rt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,qe=!1,N=new Ve,x=()=>{const u=Promise.resolve(void 0);Et=()=>{u.then(C)}};function C(){for(var u;u=be();){try{u.h.call(u.g)}catch(v){re(v)}var m=Ne;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}qe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function ct(u,m){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}S(ct,I),ct.prototype.init=function(u,m){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ct.Z.h.call(this)},ct.prototype.h=function(){ct.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),F=0;function ne(u,m,v,A,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!A,this.ha=j,this.key=++F,this.da=this.fa=!1}function me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qe(u,m,v){for(const A in u)m.call(v,u[A],A,u)}function Ie(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function D(u){const m={};for(const v in u)m[v]=u[v];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(u,m){let v,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(v in A)u[v]=A[v];for(let B=0;B<G.length;B++)v=G[B],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,m,v,A,j){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const te=Oe(u,m,A,j);return te>-1?(m=u[te],v||(m.fa=!1)):(m=new ne(m,this.src,B,!!A,j),m.fa=v,u.push(m)),m};function Te(u,m){const v=m.type;if(v in u.g){var A=u.g[v],j=Array.prototype.indexOf.call(A,m,void 0),B;(B=j>=0)&&Array.prototype.splice.call(A,j,1),B&&(me(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Oe(u,m,v,A){for(let j=0;j<u.length;++j){const B=u[j];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==A)return j}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Tt={};function nt(u,m,v,A,j){if(Array.isArray(m)){for(let B=0;B<m.length;B++)nt(u,m[B],v,A,j);return null}return v=ns(v),u&&u[bt]?u.J(m,v,g(A)?!!A.capture:!1,j):xi(u,m,v,!1,A,j)}function xi(u,m,v,A,j,B){if(!m)throw Error("Invalid event type");const te=g(j)?!!j.capture:!!j;let je=ts(u);if(je||(u[De]=je=new oe(u)),v=je.add(m,v,A,te,B),v.proxy)return v;if(A=Ds(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)L||(j=te),j===void 0&&(j=!1),u.addEventListener(m.toString(),A,j);else if(u.attachEvent)u.attachEvent(Fn(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ds(){function u(v){return m.call(u.src,u.listener,v)}const m=Vs;return u}function ks(u,m,v,A,j){if(Array.isArray(m))for(var B=0;B<m.length;B++)ks(u,m[B],v,A,j);else A=g(A)?!!A.capture:!!A,v=ns(v),u&&u[bt]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],v=Oe(m,v,A,j),v>-1&&(me(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=ts(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Oe(m,v,A,j)),(v=u>-1?m[u]:null)&&Ms(v))}function Ms(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[bt])Te(m.i,u);else{var v=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(v,A,u.capture):m.detachEvent?m.detachEvent(Fn(v),A):m.addListener&&m.removeListener&&m.removeListener(A),(v=ts(m))?(Te(v,u),v.h==0&&(v.src=null,m[De]=null)):me(u)}}}function Fn(u){return u in Tt?Tt[u]:Tt[u]="on"+u}function Vs(u,m){if(u.da)u=!0;else{m=new ct(m,this);const v=u.listener,A=u.ha||u.src;u.fa&&Ms(u),u=v.call(A,m)}return u}function ts(u){return u=u[De],u instanceof oe?u:null}var Ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function ns(u){return typeof u=="function"?u:(u[Ls]||(u[Ls]=function(m){return u.handleEvent(m)}),u[Ls])}function Rt(){M.call(this),this.i=new oe(this),this.M=this,this.G=null}S(Rt,M),Rt.prototype[bt]=!0,Rt.prototype.removeEventListener=function(u,m,v,A){ks(this,u,m,v,A)};function It(u,m){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new I(m,u);else if(m instanceof I)m.target=m.target||u;else{var j=m;m=new I(A,u),ie(m,j)}j=!0;let B,te;if(v)for(te=v.length-1;te>=0;te--)B=m.g=v[te],j=wi(B,A,!0,m)&&j;if(B=m.g=u,j=wi(B,A,!0,m)&&j,j=wi(B,A,!1,m)&&j,v)for(te=0;te<v.length;te++)B=m.g=v[te],j=wi(B,A,!1,m)&&j}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let A=0;A<v.length;A++)me(v[A]);delete u.g[m],u.h--}}this.G=null},Rt.prototype.J=function(u,m,v,A){return this.i.add(String(u),m,!1,v,A)},Rt.prototype.K=function(u,m,v,A){return this.i.add(String(u),m,!0,v,A)};function wi(u,m,v,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let B=0;B<m.length;++B){const te=m[B];if(te&&!te.da&&te.capture==v){const je=te.listener,Ot=te.ha||te.src;te.fa&&Te(u.i,te),j=je.call(Ot,A)!==!1&&j}}return j&&!A.defaultPrevented}function ko(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function va(u){u.g=ko(()=>{u.g=null,u.i&&(u.i=!1,va(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class en extends M{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:va(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(u){M.call(this),this.h=u,this.g={}}S(Gn,M);var ee=[];function Z(u){Qe(u.g,function(m,v){this.g.hasOwnProperty(v)&&Ms(m)},u),u.g={}}Gn.prototype.N=function(){Gn.Z.N.call(this),Z(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=d.JSON.stringify,ae=d.JSON.parse,xe=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function X(){}function _e(){}var fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pe(){I.call(this,"d")}S(pe,I);function Le(){I.call(this,"c")}S(Le,I);var Ze={},Dn=null;function Je(){return Dn=Dn||new Rt}Ze.Ia="serverreachability";function ui(u){I.call(this,Ze.Ia,u)}S(ui,I);function $t(u){const m=Je();It(m,new ui(m))}Ze.STAT_EVENT="statevent";function Kn(u,m){I.call(this,Ze.STAT_EVENT,u),this.stat=m}S(Kn,I);function ht(u){const m=Je();It(m,new Kn(m,u))}Ze.Ja="timingevent";function kn(u,m){I.call(this,Ze.Ja,u),this.size=m}S(kn,I);function Yn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function Qh(u,m,v,A,j,B){u.info(function(){if(u.g)if(B){var te="",je=B.split("&");for(let it=0;it<je.length;it++){var Ot=je[it].split("=");if(Ot.length>1){const At=Ot[0];Ot=Ot[1];const Xn=At.split("_");te=Xn.length>=2&&Xn[1]=="type"?te+(At+"="+Ot+"&"):te+(At+"=redacted&")}}}else te=null;else te=B;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+m+`
`+v+`
`+te})}function yu(u,m,v,A,j,B,te){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+m+`
`+v+`
`+B+" "+te})}function Ri(u,m,v,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+$h(u,v)+(A?" "+A:"")})}function Mr(u,m){u.info(function(){return"TIMEOUT: "+m})}ci.prototype.info=function(){};function $h(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var j=A[0];if(j!="noop"&&j!="stop"&&j!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return le(B)}catch{return m}}var Vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vo;function Lr(){}S(Lr,X),Lr.prototype.g=function(){return new XMLHttpRequest},Vo=new Lr;function is(u){return encodeURIComponent(String(u))}function _u(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function hi(u,m,v,A){this.j=u,this.i=m,this.l=v,this.S=A||1,this.V=new Gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var Vt={},Wt={};function Ni(u,m,v){u.M=1,u.A=jr(jt(m)),u.u=v,u.R=!0,Ea(u,null)}function Ea(u,m){u.F=Date.now(),Ci(u),u.B=jt(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Sa(v.i,"t",A),u.C=0,v=u.j.L,u.h=new fi,u.g=ku(u.j,v?m:null,!u.u),u.P>0&&(u.O=new en(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,A=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(ee[0]=j.toString()),j=ee);for(let B=0;B<j.length;B++){const te=nt(v,j[B],A||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),$t(),Qh(u.i,u.v,u.B,u.l,u.S,u.u)}hi.prototype.ba=function(u){u=u.target;const m=this.O;m&&pi(u)==3?m.j():this.Y(u)},hi.prototype.Y=function(u){try{if(u==this.g)e:{const je=pi(this.g),Ot=this.g.ya(),it=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||je!=4||Ot==7||(Ot==8||it<=0?$t(3):$t(2)),Ii(this);var m=this.g.ca();this.X=m;var v=Wh(this);if(this.o=m==200,yu(this.i,this.v,this.B,this.l,this.S,je,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,j=this.g;if((A=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var B=A;break t}}B=null}if(u=B)Ri(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,u);else{this.o=!1,this.m=3,ht(12),Mn(this),Qn(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<v.length;)if(At=Eu(this,v),At==Wt){je==4&&(this.m=4,ht(14),u=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Vt){this.m=4,ht(15),Ri(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Ri(this.i,this.l,At,null),Oi(this,At);if(vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||v.length!=0||this.h.h||(this.m=1,ht(16),u=!1),this.o=this.o&&u,!u)Ri(this.i,this.l,v,"[Invalid Chunked Response]"),Mn(this),Qn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Wo(te),te.P=!0,ht(11))}}else Ri(this.i,this.l,v,null),Oi(this,v);je==4&&Mn(this),this.o&&!this.K&&(je==4?Cu(this.j,this):(this.o=!1,Ci(this)))}else rs(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Mn(this),Qn(this)}}}catch{}};function Wh(u){if(!vu(u))return u.g.la();const m=tn(u.g);if(m==="")return"";let v="";const A=m.length,j=pi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Mn(u),Qn(u),"";u.h.i=new d.TextDecoder}for(let B=0;B<A;B++)u.h.h=!0,v+=u.h.i.decode(m[B],{stream:!(j&&B==A-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function vu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Eu(u,m){var v=u.C,A=m.indexOf(`
`,v);return A==-1?Wt:(v=Number(m.substring(v,A)),isNaN(v)?Vt:(A+=1,A+v>m.length?Wt:(m=m.slice(A,A+v),u.C=A+v,m)))}hi.prototype.cancel=function(){this.K=!0,Mn(this)};function Ci(u){u.T=Date.now()+u.H,ba(u,u.H)}function ba(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yn(y(u.aa,u),m)}function Ii(u){u.D&&(d.clearTimeout(u.D),u.D=null)}hi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Mr(this.i,this.B),this.M!=2&&($t(),ht(17)),Mn(this),this.m=2,Qn(this)):ba(this,this.T-u)};function Qn(u){u.j.I==0||u.K||Cu(u.j,u)}function Mn(u){Ii(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Z(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Oi(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ki(v.h,u))){if(!u.L&&ki(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ca(v),Fs(v);else break e;Fr(v),ht(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Yn(y(v.Va,v),6e3));Di(v.h)<=1&&v.ta&&(v.ta=void 0)}else zi(v,11)}else if((u.L||v.g==u)&&Ca(v),!w(m))for(j=v.Ba.g.parse(m),m=0;m<j.length;m++){let it=j[m];const At=it[0];if(!(At<=v.K))if(v.K=At,it=it[1],v.I==2)if(it[0]=="c"){v.M=it[1],v.ba=it[2];const Xn=it[3];Xn!=null&&(v.ka=Xn,v.j.info("VER="+v.ka));const Pi=it[4];Pi!=null&&(v.za=Pi,v.j.info("SVER="+v.za));const gi=it[5];gi!=null&&typeof gi=="number"&&gi>0&&(A=1.5*gi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const yi=u.g;if(yi){const Gr=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var B=A.h;B.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Uo(B,B.h),B.h=null))}if(A.G){const Ia=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(A.wa=Ia,ot(A.J,A.G,Ia))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var te=u;if(A.na=Du(A,A.L?A.ba:null,A.W),te.L){zo(A.h,te);var je=te,Ot=A.O;Ot&&(je.H=Ot),je.D&&(Ii(je),Ci(je)),A.g=te}else Ru(A);v.i.length>0&&Ui(v)}else it[0]!="stop"&&it[0]!="close"||zi(v,7);else v.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?zi(v,7):Qo(v):it[0]!="noop"&&v.l&&v.l.qa(it),v.A=0)}}$t(4)}catch{}}var Lt=class{constructor(u,m){this.g=u,this.map=m}};function Lo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Di(u){return u.h?1:u.g?u.g.size:0}function ki(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Uo(u,m){u.g?u.g.add(m):u.h=m}function zo(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Lo.prototype.cancel=function(){if(this.i=Po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Po(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return H(u.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let j,B=null;A>=0?(j=u[v].substring(0,A),B=u[v].substring(A+1)):j=u[v],m(j,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Vn?(this.l=u.l,Xt(this,u.j),this.o=u.o,this.g=u.g,js(this,u.u),this.h=u.h,Bo(this,xu(u.i)),this.m=u.m):u&&(m=String(u).match(bu))?(this.l=!1,Xt(this,m[1]||"",!0),this.o=Mi(m[2]||""),this.g=Mi(m[3]||"",!0),js(this,m[4]),this.h=Mi(m[5]||"",!0),Bo(this,m[6]||"",!0),this.m=Mi(m[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Vn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Ur(m,Aa,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ur(m,Aa,!0),"@"),u.push(is(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ur(v,v.charAt(0)=="/"?qo:Tu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ur(v,Au)),u.join("")},Vn.prototype.resolve=function(u){const m=jt(this);let v=!!u.j;v?Xt(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var A=u.h;if(v)js(m,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var j=m.h.lastIndexOf("/");j!=-1&&(A=m.h.slice(0,j+1)+A)}if(j=A,j==".."||j==".")A="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){A=j.lastIndexOf("/",0)==0,j=j.split("/");const B=[];for(let te=0;te<j.length;){const je=j[te++];je=="."?A&&te==j.length&&B.push(""):je==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&te==j.length&&B.push("")):(B.push(je),A=!0)}A=B.join("/")}else A=j}return v?m.h=A:v=u.i.toString()!=="",v?Bo(m,xu(u.i)):v=!!u.m,v&&(m.m=u.m),m};function jt(u){return new Vn(u)}function Xt(u,m,v){u.j=v?Mi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function js(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Bo(u,m,v){m instanceof zs?(u.i=m,xa(u.i,u.l)):(v||(m=Ur(m,Us)),u.i=new zs(m,u.l))}function ot(u,m,v){u.i.set(m,v)}function jr(u){return ot(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Mi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ur(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,En),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function En(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Aa=/[#\/\?@]/g,Tu=/[#\?:]/g,qo=/[#\?]/g,Us=/[#\?@]/g,Au=/#/g;function zs(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function bn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=zs.prototype,s.add=function(u,m){bn(this),this.i=null,u=Ps(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Su(u,m){bn(u),m=Ps(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ho(u,m){return bn(u),m=Ps(u,m),u.g.has(m)}s.forEach=function(u,m){bn(this),this.g.forEach(function(v,A){v.forEach(function(j){u.call(m,j,A,this)},this)},this)};function Fo(u,m){bn(u);let v=[];if(typeof m=="string")Ho(u,m)&&(v=v.concat(u.g.get(Ps(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}s.set=function(u,m){return bn(this),this.i=null,u=Ps(this,u),Ho(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=Fo(this,u),u.length>0?String(u[0]):m):m};function Sa(u,m,v){Su(u,m),v.length>0&&(u.i=null,u.g.set(Ps(u,m),H(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var v=m[A];const j=is(v);v=Fo(this,v);for(let B=0;B<v.length;B++){let te=j;v[B]!==""&&(te+="="+is(v[B])),u.push(te)}}return this.i=u.join("&")};function xu(u){const m=new zs;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ps(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function xa(u,m){m&&!u.j&&(bn(u),u.i=null,u.g.forEach(function(v,A){const j=A.toLowerCase();A!=j&&(Su(this,A),Sa(this,j,v))},u)),u.j=m}function di(u,m){const v=new ci;if(d.Image){const A=new Image;A.onload=b($n,v,"TestLoadImage: loaded",!0,m,A),A.onerror=b($n,v,"TestLoadImage: error",!1,m,A),A.onabort=b($n,v,"TestLoadImage: abort",!1,m,A),A.ontimeout=b($n,v,"TestLoadImage: timeout",!1,m,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Go(u,m){const v=new ci,A=new AbortController,j=setTimeout(()=>{A.abort(),$n(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(B=>{clearTimeout(j),B.ok?$n(v,"TestPingServer: ok",!0,m):$n(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),$n(v,"TestPingServer: error",!1,m)})}function $n(u,m,v,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(v)}catch{}}function Bs(){this.g=new xe}function Vi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Vi,X),Vi.prototype.g=function(){return new zr(this.i,this.h)};function zr(u,m){Rt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(zr,Rt),s=zr.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,mi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qs(this):mi(this),this.readyState==3&&wa(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,qs(this))},s.Na=function(u){this.g&&(this.response=u,qs(this))},s.ga=function(){this.g&&qs(this)};function qs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,mi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function mi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wn(u){let m="";return Qe(u,function(v,A){m+=A,m+=":",m+=v,m+=`\r
`}),m}function Pr(u,m,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Wn(v),typeof u=="string"?v!=null&&is(v):ot(u,m,v))}function ft(u){Rt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ft,Rt);var Li=/^https?$/i,Ko=["POST","PUT"];s=ft.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vo.g(),this.g.onreadystatechange=O(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Br(this,B);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)v.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())v.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Ko,m,void 0)>=0)||A||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of v)this.g.setRequestHeader(B,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Br(this,B)}};function Br(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Yo(u),ss(u)}function Yo(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,It(this,"complete"),It(this,"abort"),ss(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),ft.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qr(this):this.Xa())},s.Xa=function(){qr(this)};function qr(u){if(u.h&&typeof c<"u"){if(u.v&&pi(u)==4)setTimeout(u.Ca.bind(u),0);else if(It(u,"readystatechange"),pi(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var A;if(A=B===0){let te=String(u.D).match(bu)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),A=!Li.test(te?te.toLowerCase():"")}v=A}if(v)It(u,"complete"),It(u,"success");else{u.o=6;try{var j=pi(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Yo(u)}}finally{ss(u)}}}}function ss(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||It(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function pi(u){return u.g?u.g.readyState:0}s.ca=function(){try{return pi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ae(m)}};function tn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(u){const m={};u=(u.g&&pi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(w(u[A]))continue;var v=_u(u[A]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=m[j]||[];m[j]=B,B.push(v)}Ie(m,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Hs(u){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,u),this.Za=ji("retryDelaySeedMs",1e4,u),this.Ta=ji("forwardChannelMaxRetries",2,u),this.va=ji("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Lo(u&&u.concurrentRequestLimit),this.Ba=new Bs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Hs.prototype,s.ka=8,s.I=1,s.connect=function(u,m,v,A){ht(0),this.W=u,this.H=m||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Du(this,null,this.W),Ui(this)};function Qo(u){if(Ra(u),u.I==3){var m=u.V++,v=jt(u.J);if(ot(v,"SID",u.M),ot(v,"RID",m),ot(v,"TYPE","terminate"),Hr(u,v),m=new hi(u,u.j,m),m.M=2,m.A=jr(jt(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=ku(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ci(m)}Ou(u)}function Fs(u){u.g&&(Wo(u),u.g.cancel(),u.g=null)}function Ra(u){Fs(u),u.v&&(d.clearTimeout(u.v),u.v=null),Ca(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Ui(u){if(!jo(u.h)&&!u.m){u.m=!0;var m=u.Ea;Et||x(),qe||(Et(),qe=!0),N.add(m,u),u.D=0}}function Na(u,m){return Di(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yn(y(u.Ea,u,m),Iu(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new hi(this,this.j,u);let B=this.o;if(this.U&&(B?(B=D(B),ie(B,this.U)):B=this.U),this.u!==null||this.R||(j.J=B,B=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=wu(this,j,m),v=jt(this.J),ot(v,"RID",u),ot(v,"CVER",22),this.G&&ot(v,"X-HTTP-Session-Id",this.G),Hr(this,v),B&&(this.R?m="headers="+is(Wn(B))+"&"+m:this.u&&Pr(v,this.u,B)),Uo(this.h,j),this.Ra&&ot(v,"TYPE","init"),this.S?(ot(v,"$req",m),ot(v,"SID","null"),j.U=!0,Ni(j,v,null)):Ni(j,v,m),this.I=2}}else this.I==3&&(u?$o(this,u):this.i.length==0||jo(this.h)||$o(this))};function $o(u,m){var v;m?v=m.l:v=u.V++;const A=jt(u.J);ot(A,"SID",u.M),ot(A,"RID",v),ot(A,"AID",u.K),Hr(u,A),u.u&&u.o&&Pr(A,u.u,u.o),v=new hi(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=wu(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Uo(u.h,v),Ni(v,A,m)}function Hr(u,m){u.H&&Qe(u.H,function(v,A){ot(m,A,v)}),u.l&&Qe({},function(v,A){ot(m,A,v)})}function wu(u,m,v){v=Math.min(u.i.length,v);const A=u.l?y(u.l.Ka,u.l,u):null;e:{var j=u.i;let je=-1;for(;;){const Ot=["count="+v];je==-1?v>0?(je=j[0].g,Ot.push("ofs="+je)):je=0:Ot.push("ofs="+je);let it=!0;for(let At=0;At<v;At++){var B=j[At].g;const Xn=j[At].map;if(B-=je,B<0)je=Math.max(0,j[At].g-100),it=!1;else try{B="req"+B+"_"||"";try{var te=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Pi,gi]of te){let yi=gi;g(gi)&&(yi=le(gi)),Ot.push(B+Pi+"="+encodeURIComponent(yi))}}catch(Pi){throw Ot.push(B+"type="+encodeURIComponent("_badmap")),Pi}}catch{A&&A(Xn)}}if(it){te=Ot.join("&");break e}}te=void 0}return u=u.i.splice(0,v),m.G=u,te}function Ru(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Et||x(),qe||(Et(),qe=!0),N.add(m,u),u.A=0}}function Fr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yn(y(u.Da,u),Iu(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yn(y(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Fs(this),Nu(this))};function Wo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Nu(u){u.g=new hi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=jt(u.na);ot(m,"RID","rpc"),ot(m,"SID",u.M),ot(m,"AID",u.K),ot(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ot(m,"TO",u.ia),ot(m,"TYPE","xmlhttp"),Hr(u,m),u.u&&u.o&&Pr(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=jr(jt(m)),v.u=null,v.R=!0,Ea(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Fs(this),Fr(this),ht(19))};function Ca(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Cu(u,m){var v=null;if(u.g==m){Ca(u),Wo(u),u.g=null;var A=2}else if(ki(u.h,m))v=m.G,zo(u.h,m),A=1;else return;if(u.I!=0){if(m.o)if(A==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;A=Je(),It(A,new kn(A,v)),Ui(u)}else Ru(u);else if(j=m.m,j==3||j==0&&m.X>0||!(A==1&&Na(u,m)||A==2&&Fr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),j){case 1:zi(u,5);break;case 4:zi(u,10);break;case 3:zi(u,6);break;default:zi(u,2)}}}function Iu(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function zi(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),A=u.Ua;const j=!A;A=new Vn(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Xt(A,"https"),jr(A),j?di(A.toString(),v):Go(A.toString(),v)}else ht(2);u.I=0,u.l&&u.l.pa(m),Ou(u),Ra(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Ou(u){if(u.I=0,u.ja=[],u.l){const m=Po(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ja,m),J(u.ja,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.oa()}}function Du(u,m,v){var A=v instanceof Vn?jt(v):new Vn(v);if(A.g!="")m&&(A.g=m+"."+A.g),js(A,A.u);else{var j=d.location;A=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const B=new Vn(null);A&&Xt(B,A),m&&(B.g=m),j&&js(B,j),v&&(B.h=v),A=B}return v=u.G,m=u.wa,v&&m&&ot(A,v,m),ot(A,"VER",u.ka),Hr(u,A),A}function ku(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ft(new Vi({ab:v})):new ft(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}s=Mu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new pn(u,m)};function pn(u,m){Rt.call(this),this.g=new Hs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new as(this)}S(pn,Rt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Qo(this.g)},pn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=le(u),u=v);m.i.push(new Lt(m.Ya++,u)),m.I==3&&Ui(m)},pn.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,pn.Z.N.call(this)};function Vu(u){pe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(Vu,pe);function Lu(){Le.call(this),this.status=1}S(Lu,Le);function as(u){this.g=u}S(as,Mu),as.prototype.ra=function(){It(this.g,"a")},as.prototype.qa=function(u){It(this.g,new Vu(u))},as.prototype.pa=function(u){It(this.g,new Lu)},as.prototype.oa=function(){It(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,$v=function(){return new Gs},Qv=function(){return Je()},Yv=Ze,wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,eh=Vr,Mo.COMPLETE="complete",Kv=Mo,_e.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,jl=_e,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,Gv=ft}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");let Co="12.8.0";function Jx(s){Co=s}const ma=new Km("@firebase/firestore");function ao(){return ma.logLevel}function ue(s,...e){if(ma.logLevel<=Ge.DEBUG){const n=e.map(ip);ma.debug(`Firestore (${Co}): ${s}`,...n)}}function Cs(s,...e){if(ma.logLevel<=Ge.ERROR){const n=e.map(ip);ma.error(`Firestore (${Co}): ${s}`,...n)}}function vo(s,...e){if(ma.logLevel<=Ge.WARN){const n=e.map(ip);ma.warn(`Firestore (${Co}): ${s}`,...n)}}function ip(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Se(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Wv(s,r,n)}function Wv(s,e,n){let r=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cs(r),new Error(r)}function at(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||Wv(e,l,r)}function Me(s,e){return s}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Xv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ew{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fn.UNAUTHENTICATED)))}shutdown(){}}class tw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class nw{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let r=this.i;const l=_=>this.i!==r?(r=this.i,n(_)):Promise.resolve();let c=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Sr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const _=c;e.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},g=_=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Sr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new Xv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class iw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const r=c=>{c.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new B_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=aw(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function Ke(s,e){return s<e?-1:s>e?1:0}function Rm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return sm(l)===sm(c)?Ke(l,c):sm(l)?1:-1}return Ke(s.length,e.length)}const ow=55296,lw=57343;function sm(s){const e=s.charCodeAt(0);return e>=ow&&e<=lw}function Eo(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const q_="__name__";class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Gi.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const r=Gi.isNumericId(e),l=Gi.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):Rm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class xt extends Gi{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new xt(n)}static emptyPath(){return new xt([])}}const uw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Gi{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return uw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q_}static keyField(){return new ln([q_])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new de(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new de(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(r+=g,l++):(c(),l++)}if(c(),d)throw new de(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(xt.fromString(e))}static fromName(e){return new Ee(xt.fromString(e).popFirst(5))}static empty(){return new Ee(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new xt(e.slice()))}}function cw(s,e,n){if(!n)throw new de(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function hw(s,e,n,r){if(e===!0&&r===!0)throw new de(W.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function H_(s){if(!Ee.isDocumentKey(s))throw new de(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Zv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function rp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Se(12329,{type:typeof s})}function Ti(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rp(s);throw new de(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Ht(s,e){const n={typeString:s};return e&&(n.value=e),n}function hu(s,e){if(!Zv(s))throw new de(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new de(W.INVALID_ARGUMENT,n);return!0}const F_=-62135596800,G_=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*G_);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<F_)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-F_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Ht("string",vt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new vt(0,0))}static max(){return new Ce(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wl=-1;function fw(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ce.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new wr(l,Ee.empty(),e)}function dw(s){return new wr(s.readTime,s.key,Wl)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(Ce.min(),Ee.empty(),Wl)}static max(){return new wr(Ce.max(),Ee.empty(),Wl)}}function mw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(s.documentKey,e.documentKey),n!==0?n:Ke(s.largestBatchId,e.largestBatchId))}const pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Io(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==pw)throw s;ue("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):$.reject(n)}static resolve(e){return new $(((n,r)=>{n(e)}))}static reject(e){return new $(((n,r)=>{r(e)}))}static waitFor(e){return new $(((n,r)=>{let l=0,c=0,d=!1;e.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&n()}),(_=>r(_)))})),d=!0,c===l&&n()}))}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next((l=>l?$.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new $(((r,l)=>{const c=e.length,d=new Array(c);let g=0;for(let _=0;_<c;_++){const y=_;n(e[y]).next((b=>{d[y]=b,++g,g===c&&r(d)}),(b=>l(b)))}}))}static doWhile(e,n){return new $(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function yw(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(s){return s.name==="IndexedDbTransactionError"}class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;const ap=-1;function Dh(s){return s==null}function gh(s){return s===0&&1/s==-1/0}function _w(s){return typeof s=="number"&&Number.isInteger(s)&&!gh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Jv="";function vw(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=K_(e)),e=Ew(s.get(n),e);return K_(e)}function Ew(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case Jv:n+="";break;default:n+=c}}return n}function K_(s){return s+Jv+""}function Y_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Dr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function eE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class wt{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??on.RED,this.left=l??on.EMPTY,this.right=c??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new on(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return on.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q_(this.data.getIterator())}getIteratorFrom(e){return new Q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class Q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Qt(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class tE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new tE("Invalid base64 string: "+c):c}})(e);return new un(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const bw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(s){if(at(!!s,39018),typeof s=="string"){let e=0;const n=bw.exec(s);if(at(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(s.seconds),nanos:Mt(s.nanos)}}function Mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Nr(s){return typeof s=="string"?un.fromBase64String(s):un.fromUint8Array(s)}const nE="server_timestamp",iE="__type__",sE="__previous_value__",rE="__local_write_time__";function op(s){return(s?.mapValue?.fields||{})[iE]?.stringValue===nE}function kh(s){const e=s.mapValue.fields[sE];return op(e)?kh(e):e}function Xl(s){const e=Rr(s.mapValue.fields[rE].timestampValue);return new vt(e.seconds,e.nanos)}class Tw{constructor(e,n,r,l,c,d,g,_,y,b,S){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=S}}const yh="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||yh}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===yh}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}function Aw(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new de(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(s.options.projectId,e)}const aE="__type__",Sw="__max__",Hc={mapValue:{}},oE="__vector__",_h="value";function Cr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?op(s)?4:ww(s)?9007199254740991:xw(s)?10:11:Se(28295,{value:s})}function Ji(s,e){if(s===e)return!0;const n=Cr(s);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xl(s).isEqual(Xl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Rr(l.timestampValue),g=Rr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Nr(l.bytesValue).isEqual(Nr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return Mt(l.geoPointValue.latitude)===Mt(c.geoPointValue.latitude)&&Mt(l.geoPointValue.longitude)===Mt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Mt(l.integerValue)===Mt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Mt(l.doubleValue),g=Mt(c.doubleValue);return d===g?gh(d)===gh(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Eo(s.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Y_(d)!==Y_(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Ji(d[_],g[_])))return!1;return!0})(s,e);default:return Se(52216,{left:s})}}function Jl(s,e){return(s.values||[]).find((n=>Ji(n,e)))!==void 0}function bo(s,e){if(s===e)return 0;const n=Cr(s),r=Cr(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=Mt(c.integerValue||c.doubleValue),_=Mt(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(s,e);case 3:return $_(s.timestampValue,e.timestampValue);case 4:return $_(Xl(s),Xl(e));case 5:return Rm(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=Nr(c),_=Nr(d);return g.compareTo(_)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),_=d.split("/");for(let y=0;y<g.length&&y<_.length;y++){const b=Ke(g[y],_[y]);if(b!==0)return b}return Ke(g.length,_.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ke(Mt(c.latitude),Mt(d.latitude));return g!==0?g:Ke(Mt(c.longitude),Mt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return W_(s.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},_=d.fields||{},y=g[_h]?.arrayValue,b=_[_h]?.arrayValue,S=Ke(y?.values?.length||0,b?.values?.length||0);return S!==0?S:W_(y,b)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Hc.mapValue&&d===Hc.mapValue)return 0;if(c===Hc.mapValue)return 1;if(d===Hc.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),y=d.fields||{},b=Object.keys(y);_.sort(),b.sort();for(let S=0;S<_.length&&S<b.length;++S){const O=Rm(_[S],b[S]);if(O!==0)return O;const H=bo(g[_[S]],y[b[S]]);if(H!==0)return H}return Ke(_.length,b.length)})(s.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function $_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const n=Rr(s),r=Rr(e),l=Ke(n.seconds,r.seconds);return l!==0?l:Ke(n.nanos,r.nanos)}function W_(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=bo(n[l],r[l]);if(c)return c}return Ke(n.length,r.length)}function To(s){return Nm(s)}function Nm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Nr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ee.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=Nm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${Nm(n.fields[d])}`;return l+"}"})(s.mapValue):Se(61005,{value:s})}function th(s){switch(Cr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(s);return e?16+th(e):16;case 5:return 2*s.stringValue.length;case 6:return Nr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+th(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Dr(r.fields,((c,d)=>{l+=c.length+th(d)})),l})(s.mapValue);default:throw Se(13486,{value:s})}}function Cm(s){return!!s&&"integerValue"in s}function lp(s){return!!s&&"arrayValue"in s}function X_(s){return!!s&&"nullValue"in s}function Z_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nh(s){return!!s&&"mapValue"in s}function xw(s){return(s?.mapValue?.fields||{})[aE]?.stringValue===oE}function Hl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Dr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Hl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(s.arrayValue.values[n]);return e}return{...s}}function ww(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Sw}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=ln.emptyPath(),r={},l=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const _=this.getFieldsMap(n);this.applyChanges(_,r,l),r={},l=[],n=g.popLast()}d?r[g.lastSegment()]=Hl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];nh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new On(Hl(this.value))}}function lE(s){const e=[];return Dr(s.fields,((n,r)=>{const l=new ln([n]);if(nh(r)){const c=lE(r.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new Hn(e)}class dn{constructor(e,n,r,l,c,d,g){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new dn(e,0,Ce.min(),Ce.min(),Ce.min(),On.empty(),0)}static newFoundDocument(e,n,r,l){return new dn(e,1,n,Ce.min(),r,l,0)}static newNoDocument(e,n){return new dn(e,2,n,Ce.min(),Ce.min(),On.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,Ce.min(),Ce.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vh{constructor(e,n){this.position=e,this.inclusive=n}}function J_(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],d=s.position[l];if(c.field.isKeyField()?r=Ee.comparator(Ee.fromName(d.referenceValue),n.key):r=bo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function e1(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ji(s.position[n],e.position[n]))return!1;return!0}class Eh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class uE{}class Yt extends uE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cw(e,n,r):n==="array-contains"?new Dw(e,r):n==="in"?new kw(e,r):n==="not-in"?new Mw(e,r):n==="array-contains-any"?new Vw(e,r):new Yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Iw(e,r):new Ow(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends uE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new es(e,n)}matches(e){return cE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cE(s){return s.op==="and"}function hE(s){return Nw(s)&&cE(s)}function Nw(s){for(const e of s.filters)if(e instanceof es)return!1;return!0}function Im(s){if(s instanceof Yt)return s.field.canonicalString()+s.op.toString()+To(s.value);if(hE(s))return s.filters.map((e=>Im(e))).join(",");{const e=s.filters.map((n=>Im(n))).join(",");return`${s.op}(${e})`}}function fE(s,e){return s instanceof Yt?(function(r,l){return l instanceof Yt&&r.op===l.op&&r.field.isEqual(l.field)&&Ji(r.value,l.value)})(s,e):s instanceof es?(function(r,l){return l instanceof es&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,g)=>c&&fE(d,l.filters[g])),!0):!1})(s,e):void Se(19439)}function dE(s){return s instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${To(n.value)}`})(s):s instanceof es?(function(n){return n.op.toString()+" {"+n.getFilters().map(dE).join(" ,")+"}"})(s):"Filter"}class Cw extends Yt{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Iw extends Yt{constructor(e,n){super(e,"in",n),this.keys=mE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Ow extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=mE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mE(s,e){return(e.arrayValue?.values||[]).map((n=>Ee.fromName(n.referenceValue)))}class Dw extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&Jl(n.arrayValue,this.value)}}class kw extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jl(this.value.arrayValue,n)}}class Mw extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jl(this.value.arrayValue,n)}}class Vw extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Jl(this.value.arrayValue,r)))}}class Lw{constructor(e,n=null,r=[],l=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function t1(s,e=null,n=[],r=[],l=null,c=null,d=null){return new Lw(s,e,n,r,l,c,d)}function up(s){const e=Me(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Im(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>To(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>To(r))).join(",")),e.Te=n}return e.Te}function cp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Rw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!fE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!e1(s.startAt,e.startAt)&&e1(s.endAt,e.endAt)}function Om(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Mh{constructor(e,n=null,r=[],l=[],c=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function jw(s,e,n,r,l,c,d,g){return new Mh(s,e,n,r,l,c,d,g)}function Vh(s){return new Mh(s)}function n1(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Uw(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function zw(s){return s.collectionGroup!==null}function Fl(s){const e=Me(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Qt(ln.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Eh(c,r))})),n.has(ln.keyField().canonicalString())||e.Ie.push(new Eh(ln.keyField(),r))}return e.Ie}function $i(s){const e=Me(s);return e.Ee||(e.Ee=Pw(e,Fl(s))),e.Ee}function Pw(s,e){if(s.limitType==="F")return t1(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Eh(l.field,c)}));const n=s.endAt?new vh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new vh(s.startAt.position,s.startAt.inclusive):null;return t1(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Dm(s,e,n){return new Mh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Lh(s,e){return cp($i(s),$i(e))&&s.limitType===e.limitType}function pE(s){return`${up($i(s))}|lt:${s.limitType}`}function oo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>dE(l))).join(", ")}]`),Dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>To(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>To(l))).join(",")),`Target(${r})`})($i(s))}; limitType=${s.limitType})`}function jh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ee.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Fl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,g,_){const y=J_(d,g,_);return d.inclusive?y<=0:y<0})(r.startAt,Fl(r),l)||r.endAt&&!(function(d,g,_){const y=J_(d,g,_);return d.inclusive?y>=0:y>0})(r.endAt,Fl(r),l))})(s,e)}function Bw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gE(s){return(e,n)=>{let r=!1;for(const l of Fl(s)){const c=qw(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function qw(s,e,n){const r=s.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,g){const _=d.data.field(c),y=g.data.field(c);return _!==null&&y!==null?bo(_,y):Se(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:s.dir})}}class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return eE(this.inner)}size(){return this.innerSize}}const Hw=new wt(Ee.comparator);function Is(){return Hw}const yE=new wt(Ee.comparator);function Ul(...s){let e=yE;for(const n of s)e=e.insert(n.key,n);return e}function _E(s){let e=yE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ca(){return Gl()}function vE(){return Gl()}function Gl(){return new ya((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Fw=new wt(Ee.comparator),Gw=new Qt(Ee.comparator);function Ye(...s){let e=Gw;for(const n of s)e=e.add(n);return e}const Kw=new Qt(Ke);function Yw(){return Kw}function hp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function EE(s){return{integerValue:""+s}}function Qw(s,e){return _w(e)?EE(e):hp(s,e)}class Uh{constructor(){this._=void 0}}function $w(s,e,n){return s instanceof bh?(function(l,c){const d={fields:{[iE]:{stringValue:nE},[rE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&op(c)&&(c=kh(c)),c&&(d.fields[sE]=c),{mapValue:d}})(n,e):s instanceof Ao?TE(s,e):s instanceof eu?AE(s,e):(function(l,c){const d=bE(l,c),g=i1(d)+i1(l.Ae);return Cm(d)&&Cm(l.Ae)?EE(g):hp(l.serializer,g)})(s,e)}function Ww(s,e,n){return s instanceof Ao?TE(s,e):s instanceof eu?AE(s,e):n}function bE(s,e){return s instanceof Th?(function(r){return Cm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class bh extends Uh{}class Ao extends Uh{constructor(e){super(),this.elements=e}}function TE(s,e){const n=SE(e);for(const r of s.elements)n.some((l=>Ji(l,r)))||n.push(r);return{arrayValue:{values:n}}}class eu extends Uh{constructor(e){super(),this.elements=e}}function AE(s,e){let n=SE(e);for(const r of s.elements)n=n.filter((l=>!Ji(l,r)));return{arrayValue:{values:n}}}class Th extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function i1(s){return Mt(s.integerValue||s.doubleValue)}function SE(s){return lp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Xw{constructor(e,n){this.field=e,this.transform=n}}function Zw(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Ao&&l instanceof Ao||r instanceof eu&&l instanceof eu?Eo(r.elements,l.elements,Ji):r instanceof Th&&l instanceof Th?Ji(r.Ae,l.Ae):r instanceof bh&&l instanceof bh})(s.transform,e.transform)}class Jw{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class zh{}function xE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new fp(s.key,Ai.none()):new fu(s.key,s.data,Ai.none());{const n=s.data,r=On.empty();let l=new Qt(ln.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new kr(s.key,r,new Hn(l.toArray()),Ai.none())}}function eR(s,e,n){s instanceof fu?(function(l,c,d){const g=l.value.clone(),_=r1(l.fieldTransforms,c,d.transformResults);g.setAll(_),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):s instanceof kr?(function(l,c,d){if(!ih(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=r1(l.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(wE(l)),_.setAll(g),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(s,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Kl(s,e,n,r){return s instanceof fu?(function(c,d,g,_){if(!ih(c.precondition,d))return g;const y=c.value.clone(),b=a1(c.fieldTransforms,_,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof kr?(function(c,d,g,_){if(!ih(c.precondition,d))return g;const y=a1(c.fieldTransforms,_,d),b=d.data;return b.setAll(wE(c)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(c,d,g){return ih(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,n)}function tR(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=bE(r.transform,l||null);c!=null&&(n===null&&(n=On.empty()),n.set(r.field,c))}return n||null}function s1(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Eo(r,l,((c,d)=>Zw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fu extends zh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class kr extends zh{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function wE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function r1(s,e,n){const r=new Map;at(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const c=s[l],d=c.transform,g=e.data.field(c.field);r.set(c.field,Ww(d,g,n[l]))}return r}function a1(s,e,n){const r=new Map;for(const l of s){const c=l.transform,d=n.data.field(l.field);r.set(l.field,$w(c,d,e))}return r}class fp extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nR extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iR{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&eR(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const _=xE(d,g);_!==null&&r.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,((n,r)=>s1(n,r)))&&Eo(this.baseMutations,e.baseMutations,((n,r)=>s1(n,r)))}}class dp{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return Fw})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new dp(e,n,r,l)}}class sR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class rR{constructor(e,n){this.count=e,this.unchangedNames=n}}var qt,Xe;function aR(s){switch(s){case W.OK:return Se(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Se(15467,{code:s})}}function RE(s){if(s===void 0)return Cs("GRPC error has no .code"),W.UNKNOWN;switch(s){case qt.OK:return W.OK;case qt.CANCELLED:return W.CANCELLED;case qt.UNKNOWN:return W.UNKNOWN;case qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case qt.INTERNAL:return W.INTERNAL;case qt.UNAVAILABLE:return W.UNAVAILABLE;case qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case qt.NOT_FOUND:return W.NOT_FOUND;case qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case qt.ABORTED:return W.ABORTED;case qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case qt.DATA_LOSS:return W.DATA_LOSS;default:return Se(39323,{code:s})}}(Xe=qt||(qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function oR(){return new TextEncoder}const lR=new Ar([4294967295,4294967295],0);function o1(s){const e=oR().encode(s),n=new Fv;return n.update(e),new Uint8Array(n.digest())}function l1(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([l,c],0)]}class mp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Ar.fromNumber(r)));return l.compare(lR)===1&&(l=new Ar([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=o1(e),[r,l]=l1(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new mp(c,l,n);return r.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=o1(e),[r,l]=l1(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ph{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ph(Ce.min(),l,new wt(Ke),Is(),Ye())}}class du{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,Ye(),Ye(),Ye())}}class sh{constructor(e,n,r,l){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=l}}class NE{constructor(e,n){this.targetId=e,this.Ce=n}}class CE{constructor(e,n,r=un.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class u1{constructor(){this.ve=0,this.Fe=c1(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),r=Ye();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Se(38017,{changeType:c})}})),new du(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=c1()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.He=Fc(),this.Je=Fc(),this.Ze=new wt(Ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Om(c))if(r===0){const d=new Ee(c.path);this.et(n,d,dn.newNoDocument(d,Ce.min()))}else at(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const g=this.ut(e),_=g?this.ct(g,e,d):1;if(_!==0){this.it(n);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=Nr(r).toUint8Array()}catch(_){if(_ instanceof tE)return vo("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new mp(d,l,c)}catch(_){return vo(_ instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&Om(g.target)){const _=new Ee(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,dn.newNoDocument(_,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let r=Ye();this.Je.forEach(((c,d)=>{let g=!0;d.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Ph(e,n,this.Ze,this.je,r);return this.je=Is(),this.He=Fc(),this.Je=Fc(),this.Ze=new wt(Ke),l}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new u1,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qt(Ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qt(Ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fc(){return new wt(Ee.comparator)}function c1(){return new wt(Ee.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},hR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class dR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function km(s,e){return s.useProto3Json||Dh(e)?e:{value:e}}function Ah(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function mR(s,e){return Ah(s,e.toTimestamp())}function Wi(s){return at(!!s,49232),Ce.fromTimestamp((function(n){const r=Rr(n);return new vt(r.seconds,r.nanos)})(s))}function pp(s,e){return Mm(s,e).canonicalString()}function Mm(s,e){const n=(function(l){return new xt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function OE(s){const e=xt.fromString(s);return at(LE(e),10190,{key:e.toString()}),e}function Vm(s,e){return pp(s.databaseId,e.path)}function rm(s,e){const n=OE(e);if(n.get(1)!==s.databaseId.projectId)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ee(kE(n))}function DE(s,e){return pp(s.databaseId,e)}function pR(s){const e=OE(s);return e.length===4?xt.emptyPath():kE(e)}function Lm(s){return new xt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kE(s){return at(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function h1(s,e,n){return{name:Vm(s,e),fields:n.value.mapValue.fields}}function gR(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(at(b===void 0||typeof b=="string",58123),un.fromBase64String(b||"")):(at(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),un.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const b=y.code===void 0?W.UNKNOWN:RE(y.code);return new de(b,y.message||"")})(d);n=new CE(r,l,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=rm(s,r.document.name),c=Wi(r.document.updateTime),d=r.document.createTime?Wi(r.document.createTime):Ce.min(),g=new On({mapValue:{fields:r.document.fields}}),_=dn.newFoundDocument(l,c,d,g),y=r.targetIds||[],b=r.removedTargetIds||[];n=new sh(y,b,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=rm(s,r.document),c=r.readTime?Wi(r.readTime):Ce.min(),d=dn.newNoDocument(l,c),g=r.removedTargetIds||[];n=new sh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=rm(s,r.document),c=r.removedTargetIds||[];n=new sh([],c,l,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new rR(l,c),g=r.targetId;n=new NE(g,d)}}return n}function yR(s,e){let n;if(e instanceof fu)n={update:h1(s,e.key,e.value)};else if(e instanceof fp)n={delete:Vm(s,e.key)};else if(e instanceof kr)n={update:h1(s,e.key,e.data),updateMask:wR(e.fieldMask)};else{if(!(e instanceof nR))return Se(16599,{dt:e.type});n={verify:Vm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const g=d.transform;if(g instanceof bh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ao)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof eu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Th)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Se(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:mR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)})(s,e.precondition)),n}function _R(s,e){return s&&s.length>0?(at(e!==void 0,14353),s.map((n=>(function(l,c){let d=l.updateTime?Wi(l.updateTime):Wi(c);return d.isEqual(Ce.min())&&(d=Wi(c)),new Jw(d,l.transformResults||[])})(n,e)))):[]}function vR(s,e){return{documents:[DE(s,e.path)]}}function ER(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DE(s,l);const c=(function(y){if(y.length!==0)return VE(es.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((b=>(function(O){return{field:lo(O.field),direction:AR(O.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=km(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function bR(s){let e=pR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){at(r===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(S){const O=ME(S);return O instanceof es&&hE(O)?O.getFilters():[O]})(n.where));let d=[];n.orderBy&&(d=(function(S){return S.map((O=>(function(J){return new Eh(uo(J.field),(function(re){switch(re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(O)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let O;return O=typeof S=="object"?S.value:S,Dh(O)?null:O})(n.limit));let _=null;n.startAt&&(_=(function(S){const O=!!S.before,H=S.values||[];return new vh(H,O)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const O=!S.before,H=S.values||[];return new vh(H,O)})(n.endAt)),jw(e,l,d,c,g,"F",_,y)}function TR(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ME(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=uo(n.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=uo(n.unaryFilter.field);return Yt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=uo(n.unaryFilter.field);return Yt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=uo(n.unaryFilter.field);return Yt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Yt.create(uo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return es.create(n.compositeFilter.filters.map((r=>ME(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(s):Se(30097,{filter:s})}function AR(s){return cR[s]}function SR(s){return hR[s]}function xR(s){return fR[s]}function lo(s){return{fieldPath:s.canonicalString()}}function uo(s){return ln.fromServerFormat(s.fieldPath)}function VE(s){return s instanceof Yt?(function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(n.field),op:SR(n.op),value:n.value}}})(s):s instanceof es?(function(n){const r=n.getFilters().map((l=>VE(l)));return r.length===1?r[0]:{compositeFilter:{op:xR(n.op),filters:r}}})(s):Se(54877,{filter:s})}function wR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function jE(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class vr{constructor(e,n,r,l,c=Ce.min(),d=Ce.min(),g=un.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class RR{constructor(e){this.yt=e}}function NR(s){const e=bR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Dm(e,e.limit,"L"):e}class CR{constructor(){this.Sn=new IR}addToCollectionParentIndex(e,n){return this.Sn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(wr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class IR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Qt(xt.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Qt(xt.comparator)).toArray()}}const f1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(UE,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class So{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new So(0)}static ar(){return new So(-1)}}const d1="LruGarbageCollector",OR=1048576;function m1([s,e],[n,r]){const l=Ke(s,n);return l===0?Ke(e,r):l}class DR{constructor(e){this.Pr=e,this.buffer=new Qt(m1),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();m1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(d1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oo(n)?ue(d1,"Ignoring IndexedDB error during garbage collection: ",n):await Io(n)}await this.Ar(3e5)}))}}class MR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Oh.ce);const r=new DR(n);return this.Vr.forEachTarget(e,(l=>r.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>r.Er(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(f1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f1):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,l,c,d,g,_,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,d=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(r=S,g=Date.now(),this.removeTargets(e,r,n)))).next((S=>(c=S,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),ao()<=Ge.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${S} documents in `+(y-_)+`ms
Total Duration: ${y-b}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function VR(s,e){return new MR(s,e)}class LR{constructor(){this.changes=new ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class UR{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Kl(r.mutation,l,Hn.empty(),vt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ye()){const l=ca();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let d=Ul();return c.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=ca();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ye())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,r,l){let c=Is();const d=Gl(),g=(function(){return Gl()})();return n.forEach(((_,y)=>{const b=r.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof kr)?c=c.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Kl(b.mutation,y,b.mutation.getFieldMask(),vt.now())):d.set(y.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,c).next((_=>(_.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>g.set(y,new jR(b,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Gl();let l=new wt(((d,g)=>d-g)),c=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((_=>{const y=n.get(_);if(y===null)return;let b=r.get(_)||Hn.empty();b=g.applyToLocalView(y,b),r.set(_,b);const S=(l.get(g.batchId)||Ye()).add(_);l=l.insert(g.batchId,S)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),y=_.key,b=_.value,S=vE();b.forEach((O=>{if(!c.has(O)){const H=xE(n.get(O),r.get(O));H!==null&&S.set(O,H),c=c.add(O)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,S))}return $.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return Uw(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):$.resolve(ca());let g=Wl,_=c;return d.next((y=>$.forEach(y,((b,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(b)?$.resolve():this.remoteDocumentCache.getEntry(e,b).next((O=>{_=_.insert(b,O)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,_,y,Ye()))).next((b=>({batchId:g,changes:_E(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let l=Ul();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let d=Ul();return this.indexManager.getCollectionParents(e,c).next((g=>$.forEach(g,(_=>{const y=(function(S,O){return new Mh(O,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,l).next((b=>{b.forEach(((S,O)=>{d=d.insert(S,O)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((d=>{c.forEach(((_,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,dn.newInvalidDocument(b)))}));let g=Ul();return d.forEach(((_,y)=>{const b=c.get(_);b!==void 0&&Kl(b.mutation,y,Hn.empty(),vt.now()),jh(n,y)&&(g=g.insert(_,y))})),g}))}}class zR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return $.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Wi(l.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:NR(l.bundledQuery),readTime:Wi(l.readTime)}})(n)),$.resolve()}}class PR{constructor(){this.overlays=new wt(Ee.comparator),this.Lr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ca();return $.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.bt(e,n,c)})),$.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.Lr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const l=ca(),c=n.length+1,d=new Ee(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,y=_.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&_.largestBatchId>r&&l.set(_.getKey(),_)}return $.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new wt(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=c.get(y.largestBatchId);b===null&&(b=ca(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=ca(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,b)=>g.set(y,b))),!(g.size()>=l)););return $.resolve(g)}bt(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(r.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new sR(n,r));let c=this.Lr.get(n);c===void 0&&(c=Ye(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}class BR{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}class gp{constructor(){this.kr=new Qt(Jt.Kr),this.qr=new Qt(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Jt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ee(new xt([])),r=new Jt(n,e),l=new Jt(n,e+1),c=[];return this.qr.forEachInRange([r,l],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ee(new xt([])),r=new Jt(n,e),l=new Jt(n,e+1);let c=Ye();return this.qr.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Jt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ee.comparator(e.key,n.key)||Ke(e.Hr,n.Hr)}static Ur(e,n){return Ke(e.Hr,n.Hr)||Ee.comparator(e.key,n.key)}}class qR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qt(Jt.Kr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iR(c,n,r,l);this.mutationQueue.push(d);for(const g of l)this.Jr=this.Jr.add(new Jt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.Xr(r),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ap:this.Yn-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),l=new Jt(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,l],(d=>{const g=this.Zr(d.Hr);c.push(g)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qt(Ke);return n.forEach((l=>{const c=new Jt(l,0),d=new Jt(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(g=>{r=r.add(g.Hr)}))})),$.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Jt(new Ee(c),0);let g=new Qt(Ke);return this.Jr.forEachWhile((_=>{const y=_.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(g=g.add(_.Hr)),!0)}),d),$.resolve(this.Yr(g))}Yr(e){const n=[];return e.forEach((r=>{const l=this.Zr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){at(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return $.forEach(n.mutations,(l=>{const c=new Jt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Jt(n,0),l=this.Jr.firstAfterOrEqual(r);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class HR{constructor(e){this.ti=e,this.docs=(function(){return new wt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=Is();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():dn.newInvalidDocument(l))})),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=Is();const d=n.path,g=new Ee(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:y,value:{document:b}}=_.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||mw(dw(b),r)<=0||(l.has(b.key)||jh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,r,l){Se(9500)}ni(e,n){return $.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new FR(this)}getSize(e){return $.resolve(this.size)}}class FR extends LR{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(r)})),$.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class GR{constructor(e){this.persistence=e,this.ri=new ya((n=>up(n)),cp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new gp,this.targetCount=0,this.oi=So._r()}forEachTarget(e,n){return this.ri.forEach(((r,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),$.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new So(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.lr(n),$.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.ri.forEach(((d,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.si.containsKey(n))}}class zE{constructor(e,n){this._i={},this.overlays={},this.ai=new Oh(0),this.ui=!1,this.ui=!0,this.ci=new BR,this.referenceDelegate=e(this),this.li=new GR(this),this.indexManager=new CR,this.remoteDocumentCache=(function(l){return new HR(l)})((r=>this.referenceDelegate.hi(r))),this.serializer=new RR(n),this.Pi=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new qR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const l=new KR(this.ai.next());return this.referenceDelegate.Ti(),r(l).next((c=>this.referenceDelegate.Ii(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ei(e,n){return $.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class KR extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Ri=new gp,this.Ai=null}static Vi(e){return new yp(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,(r=>{const l=Ee.fromPath(r);return this.mi(e,l).next((c=>{c||n.removeEntry(l,Ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Sh{constructor(e,n){this.persistence=e,this.fi=new ya((r=>vw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=VR(this,n)}static Vi(e,n){return new Sh(e,n)}Ti(){}Ii(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return $.forEach(this.fi,((r,l)=>this.wr(e,r,l).next((c=>c?$.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((g=>{g||(r++,c.removeEntry(d,Ce.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),$.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}wr(e,n,r){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return $.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _p{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=l}static Es(e,n){let r=Ye(),l=Ye();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new _p(e,n.fromCache,r,l)}}class YR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return O2()?8:yw(mn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new YR;return this.ys(e,n,d).next((g=>{if(c.result=g,this.As)return this.ws(e,n,d,g.size)}))})).next((()=>c.result))}ws(e,n,r,l){return r.documentReadCount<this.Vs?(ao()<=Ge.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(ao()<=Ge.DEBUG&&ue("QueryEngine","Query:",oo(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.ds*l?(ao()<=Ge.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(n))):$.resolve())}gs(e,n){if(n1(n))return $.resolve(null);let r=$i(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Dm(n,null,"F"),r=$i(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Ye(...c);return this.fs.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,r).next((_=>{const y=this.bs(n,g);return this.Ss(n,y,d,_.readTime)?this.gs(e,Dm(n,null,"F")):this.Ds(e,y,n,_)}))))})))))}ps(e,n,r,l){return n1(n)||l.isEqual(Ce.min())?$.resolve(null):this.fs.getDocuments(e,r).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,r,l)?$.resolve(null):(ao()<=Ge.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),oo(n)),this.Ds(e,d,n,fw(l,Wl)).next((g=>g)))}))}bs(e,n){let r=new Qt(gE(e));return n.forEach(((l,c)=>{jh(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ys(e,n,r){return ao()<=Ge.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",oo(n)),this.fs.getDocumentsMatchingQuery(e,n,wr.min(),r)}Ds(e,n,r,l){return this.fs.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const vp="LocalStore",$R=3e8;class WR{constructor(e,n,r,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new wt(Ke),this.Fs=new ya((c=>up(c)),cp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function XR(s,e,n,r){return new WR(s,e,n,r)}async function PE(s,e){const n=Me(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],g=[];let _=Ye();for(const y of l){d.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}for(const y of c){g.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}return n.localDocuments.getDocuments(r,_).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function ZR(s,e){const n=Me(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(g,_,y,b){const S=y.batch,O=S.keys();let H=$.resolve();return O.forEach((J=>{H=H.next((()=>b.getEntry(_,J))).next((se=>{const re=y.docVersions.get(J);at(re!==null,48541),se.version.compareTo(re)<0&&(S.applyToRemoteDocument(se,y),se.isValidDocument()&&(se.setReadTime(y.commitVersion),b.addEntry(se)))}))})),H.next((()=>g.mutationQueue.removeMutationBatch(_,S)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let _=Ye();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(_=_.add(g.batch.mutations[y].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function BE(s){const e=Me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function JR(s,e){const n=Me(s),r=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const g=[];e.targetChanges.forEach(((b,S)=>{const O=l.get(S);if(!O)return;g.push(n.li.removeMatchingKeys(c,b.removedDocuments,S).next((()=>n.li.addMatchingKeys(c,b.addedDocuments,S))));let H=O.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?H=H.withResumeToken(un.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(b.resumeToken,r)),l=l.insert(S,H),(function(se,re,be){return se.resumeToken.approximateByteSize()===0||re.snapshotVersion.toMicroseconds()-se.snapshotVersion.toMicroseconds()>=$R?!0:be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0})(O,H,b)&&g.push(n.li.updateTargetData(c,H))}));let _=Is(),y=Ye();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),g.push(e4(c,d,e.documentUpdates).next((b=>{_=b.Bs,y=b.Ls}))),!r.isEqual(Ce.min())){const b=n.li.getLastRemoteSnapshotVersion(c).next((S=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(b)}return $.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,_,y))).next((()=>_))})).then((c=>(n.vs=l,c)))}function e4(s,e,n){let r=Ye(),l=Ye();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=Is();return n.forEach(((g,_)=>{const y=c.get(g);_.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),_.isNoDocument()&&_.version.isEqual(Ce.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):ue(vp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",_.version)})),{Bs:d,Ls:l}}))}function t4(s,e){const n=Me(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ap),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function n4(s,e){const n=Me(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.li.getTargetData(r,e).next((c=>c?(l=c,$.resolve(l)):n.li.allocateTargetId(r).next((d=>(l=new vr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.vs.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function jm(s,e,n){const r=Me(s),l=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Oo(d))throw d;ue(vp,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(l.target)}function p1(s,e,n){const r=Me(s);let l=Ce.min(),c=Ye();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,y,b){const S=Me(_),O=S.Fs.get(b);return O!==void 0?$.resolve(S.vs.get(O)):S.li.getTargetData(y,b)})(r,d,$i(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,g.targetId).next((_=>{c=_}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?l:Ce.min(),n?c:Ye()))).next((g=>(i4(r,Bw(e),g),{documents:g,ks:c})))))}function i4(s,e,n){let r=s.Ms.get(e)||Ce.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Ms.set(e,r)}class g1{constructor(){this.activeTargetIds=Yw()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s4{constructor(){this.vo=new g1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new g1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r4{Mo(e){}shutdown(){}}const y1="ConnectivityMonitor";class _1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(y1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(y1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gc=null;function Um(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}const am="RestConnection",a4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class o4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${l}`,this.$o=this.databaseId.database===yh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Wo(e,n,r,l,c){const d=Um(),g=this.Qo(e,n.toUriEncodedString());ue(am,`Sending RPC '${e}' ${d}:`,g,r);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(_,l,c);const{host:y}=new URL(g),b=wo(y);return this.zo(e,g,_,r,b).then((S=>(ue(am,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw vo(am,`RPC '${e}' ${d} failed with error: `,S,"url: ",g,"request:",r),S}))}jo(e,n,r,l,c,d){return this.Wo(e,n,r,l,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}Qo(e,n){const r=a4[e];let l=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class l4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const hn="WebChannelConnection",Vl=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(l){setTimeout((()=>{throw l}),0)}}))};class po extends o4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!po.c_){const e=Qv();Vl(e,Yv.STAT_EVENT,(n=>{n.stat===wm.PROXY?ue(hn,"STAT_EVENT: detected buffering proxy"):n.stat===wm.NOPROXY&&ue(hn,"STAT_EVENT: detected no buffering proxy")})),po.c_=!0}}zo(e,n,r,l,c){const d=Um();return new Promise(((g,_)=>{const y=new Gv;y.setWithCredentials(!0),y.listenOnce(Kv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case eh.NO_ERROR:const S=y.getResponseJson();ue(hn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),g(S);break;case eh.TIMEOUT:ue(hn,`RPC '${e}' ${d} timed out`),_(new de(W.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const O=y.getStatus();if(ue(hn,`RPC '${e}' ${d} failed with status:`,O,"response text:",y.getResponseText()),O>0){let H=y.getResponseJson();Array.isArray(H)&&(H=H[0]);const J=H?.error;if(J&&J.status&&J.message){const se=(function(be){const Ve=be.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Ve)>=0?Ve:W.UNKNOWN})(J.status);_(new de(se,J.message))}else _(new de(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new de(W.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(hn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);ue(hn,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",b,r,15)}))}T_(e,n,r){const l=Um(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Go(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=c.join("");ue(hn,`Creating RPC '${e}' stream ${l}: ${y}`,g);const b=d.createWebChannel(y,g);this.I_(b);let S=!1,O=!1;const H=new l4({Ho:J=>{O?ue(hn,`Not sending because RPC '${e}' stream ${l} is closed:`,J):(S||(ue(hn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),S=!0),ue(hn,`RPC '${e}' stream ${l} sending:`,J),b.send(J))},Jo:()=>b.close()});return Vl(b,jl.EventType.OPEN,(()=>{O||(ue(hn,`RPC '${e}' stream ${l} transport opened.`),H.i_())})),Vl(b,jl.EventType.CLOSE,(()=>{O||(O=!0,ue(hn,`RPC '${e}' stream ${l} transport closed`),H.o_(),this.E_(b))})),Vl(b,jl.EventType.ERROR,(J=>{O||(O=!0,vo(hn,`RPC '${e}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),H.o_(new de(W.UNAVAILABLE,"The operation could not be completed")))})),Vl(b,jl.EventType.MESSAGE,(J=>{if(!O){const se=J.data[0];at(!!se,16349);const re=se,be=re?.error||re[0]?.error;if(be){ue(hn,`RPC '${e}' stream ${l} received error:`,be);const Ve=be.status;let Ne=(function(qe){const N=qt[qe];if(N!==void 0)return RE(N)})(Ve),rt=be.message;Ne===void 0&&(Ne=W.INTERNAL,rt="Unknown error status: "+Ve+" with message "+be.message),O=!0,H.o_(new de(Ne,rt)),b.close()}else ue(hn,`RPC '${e}' stream ${l} received:`,se),H.__(se)}})),po.u_(),setTimeout((()=>{H.s_()}),0),H}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return $v()}}function u4(s){return new po(s)}function om(){return typeof document<"u"?document:null}function Bh(s){return new dR(s,!0)}po.c_=!1;class qE{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=l,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ue("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const v1="PersistentStream";class HE{constructor(e,n,r,l,c,d,g,_){this.Ci=e,this.b_=r,this.S_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Cs(n.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new de(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(v1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ue(v1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class c4 extends HE{constructor(e,n,r,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gR(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ce.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ce.min():d.readTime?Wi(d.readTime):Ce.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Lm(this.serializer),n.addTarget=(function(c,d){let g;const _=d.target;if(g=Om(_)?{documents:vR(c,_)}:{query:ER(c,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=IE(c,d.resumeToken);const y=km(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ce.min())>0){g.readTime=Ah(c,d.snapshotVersion.toTimestamp());const y=km(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const r=TR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Lm(this.serializer),n.removeTarget=e,this.K_(n)}}class h4 extends HE{constructor(e,n,r,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_R(e.writeResults,e.commitTime),r=Wi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Lm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>yR(this.serializer,r)))};this.K_(n)}}class f4{}class d4 extends f4{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,Mm(n,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(W.UNKNOWN,c.toString())}))}jo(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.jo(e,Mm(n,r),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function m4(s,e,n,r){return new d4(s,e,n,r)}class p4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const pa="RemoteStore";class g4{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{_a(this)&&(ue(pa,"Restarting streams for network reachability change."),await(async function(_){const y=Me(_);y.Ea.add(4),await mu(y),y.Va.set("Unknown"),y.Ea.delete(4),await qh(y)})(this))}))})),this.Va=new p4(r,l)}}async function qh(s){if(_a(s))for(const e of s.Ra)await e(!0)}async function mu(s){for(const e of s.Ra)await e(!1)}function FE(s,e){const n=Me(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ap(n)?Tp(n):Do(n).O_()&&bp(n,e))}function Ep(s,e){const n=Me(s),r=Do(n);n.Ia.delete(e),r.O_()&&GE(n,e),n.Ia.size===0&&(r.O_()?r.L_():_a(n)&&n.Va.set("Unknown"))}function bp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(s).Z_(e)}function GE(s,e){s.da.$e(e),Do(s).X_(e)}function Tp(s){s.da=new uR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Do(s).start(),s.Va.ua()}function Ap(s){return _a(s)&&!Do(s).x_()&&s.Ia.size>0}function _a(s){return Me(s).Ea.size===0}function KE(s){s.da=void 0}async function y4(s){s.Va.set("Online")}async function _4(s){s.Ia.forEach(((e,n)=>{bp(s,e)}))}async function v4(s,e){KE(s),Ap(s)?(s.Va.ha(e),Tp(s)):s.Va.set("Unknown")}async function E4(s,e,n){if(s.Va.set("Online"),e instanceof CE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.da.removeTarget(g))})(s,e)}catch(r){ue(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(s,r)}else if(e instanceof sh?s.da.Xe(e):e instanceof NE?s.da.st(e):s.da.tt(e),!n.isEqual(Ce.min()))try{const r=await BE(s.localStore);n.compareTo(r)>=0&&await(function(c,d){const g=c.da.Tt(d);return g.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,y)=>{const b=c.Ia.get(_);if(!b)return;c.Ia.set(_,b.withResumeToken(un.EMPTY_BYTE_STRING,b.snapshotVersion)),GE(c,_);const S=new vr(b.target,_,y,b.sequenceNumber);bp(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){ue(pa,"Failed to raise snapshot:",r),await xh(s,r)}}async function xh(s,e,n){if(!Oo(e))throw e;s.Ea.add(1),await mu(s),s.Va.set("Offline"),n||(n=()=>BE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ue(pa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await qh(s)}))}function YE(s,e){return e().catch((n=>xh(s,n,e)))}async function Hh(s){const e=Me(s),n=Ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ap;for(;b4(e);)try{const l=await t4(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,T4(e,l)}catch(l){await xh(e,l)}QE(e)&&$E(e)}function b4(s){return _a(s)&&s.Ta.length<10}function T4(s,e){s.Ta.push(e);const n=Ir(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function QE(s){return _a(s)&&!Ir(s).x_()&&s.Ta.length>0}function $E(s){Ir(s).start()}async function A4(s){Ir(s).ra()}async function S4(s){const e=Ir(s);for(const n of s.Ta)e.ea(n.mutations)}async function x4(s,e,n){const r=s.Ta.shift(),l=dp.from(r,e,n);await YE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Hh(s)}async function w4(s,e){e&&Ir(s).Y_&&await(async function(r,l){if((function(d){return aR(d)&&d!==W.ABORTED})(l.code)){const c=r.Ta.shift();Ir(r).B_(),await YE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Hh(r)}})(s,e),QE(s)&&$E(s)}async function E1(s,e){const n=Me(s);n.asyncQueue.verifyOperationInProgress(),ue(pa,"RemoteStore received new credentials");const r=_a(n);n.Ea.add(3),await mu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qh(n)}async function R4(s,e){const n=Me(s);e?(n.Ea.delete(2),await qh(n)):e||(n.Ea.add(2),await mu(n),n.Va.set("Unknown"))}function Do(s){return s.ma||(s.ma=(function(n,r,l){const c=Me(n);return c.sa(),new c4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Zo:y4.bind(null,s),Yo:_4.bind(null,s),t_:v4.bind(null,s),J_:E4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Ap(s)?Tp(s):s.Va.set("Unknown")):(await s.ma.stop(),KE(s))}))),s.ma}function Ir(s){return s.fa||(s.fa=(function(n,r,l){const c=Me(n);return c.sa(),new h4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:A4.bind(null,s),t_:w4.bind(null,s),ta:S4.bind(null,s),na:x4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Hh(s)):(await s.fa.stop(),s.Ta.length>0&&(ue(pa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Sp{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const d=Date.now()+r,g=new Sp(e,n,d,l,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(s,e){if(Cs("AsyncQueue",`${e}: ${s}`),Oo(s))return new de(W.UNAVAILABLE,`${e}: ${s}`);throw s}class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class b1{constructor(){this.ga=new wt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class xo{constructor(e,n,r,l,c,d,g,_,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,l,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new xo(e,n,go.emptySet(n),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class N4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class C4{constructor(){this.queries=T1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Me(n),c=l.queries;l.queries=T1(),c.forEach(((d,g)=>{for(const _ of g.ba)_.onError(r)}))})(this,new de(W.ABORTED,"Firestore shutting down"))}}function T1(){return new ya((s=>pE(s)),Lh)}async function WE(s,e){const n=Me(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.Sa()&&e.Da()&&(r=2):(c=new N4,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=xp(d,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&wp(n)}async function XE(s,e){const n=Me(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?l=e.Da()?0:1:!c.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I4(s,e){const n=Me(s);let r=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.ba)g.Fa(l)&&(r=!0);d.wa=l}}r&&wp(n)}function O4(s,e,n){const r=Me(s),l=r.queries.get(e);if(l)for(const c of l.ba)c.onError(n);r.queries.delete(e)}function wp(s){s.Ca.forEach((e=>{e.next()}))}var zm,A1;(A1=zm||(zm={})).Ma="default",A1.Cache="cache";class ZE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zm.Cache}}class JE{constructor(e){this.key=e}}class eb{constructor(e){this.key=e}}class D4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ye(),this.mutatedKeys=Ye(),this.eu=gE(e),this.tu=new go(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new b1,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,S)=>{const O=l.get(b),H=jh(this.query,S)?S:null,J=!!O&&this.mutatedKeys.has(O.key),se=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let re=!1;O&&H?O.data.isEqual(H.data)?J!==se&&(r.track({type:3,doc:H}),re=!0):this.su(O,H)||(r.track({type:2,doc:H}),re=!0,(_&&this.eu(H,_)>0||y&&this.eu(H,y)<0)&&(g=!0)):!O&&H?(r.track({type:0,doc:H}),re=!0):O&&!H&&(r.track({type:1,doc:O}),re=!0,(_||y)&&(g=!0)),re&&(H?(d=d.add(H),c=se?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{tu:d,iu:r,Ss:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,S)=>(function(H,J){const se=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:re})}};return se(H)-se(J)})(b.type,S.type)||this.eu(b.doc,S.doc))),this.ou(r),l=l??!1;const g=n&&!l?this._u():[],_=this.Ya.size===0&&this.current&&!l?1:0,y=_!==this.Xa;return this.Xa=_,d.length!==0||y?{snapshot:new xo(this.query,e.tu,c,d,e.mutatedKeys,_===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new eb(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new JE(r))})),n}cu(e){this.Za=e.ks,this.Ya=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rp="SyncEngine";class k4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M4{constructor(e){this.key=e,this.hu=!1}}class V4{constructor(e,n,r,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ya((g=>pE(g)),Lh),this.Iu=new Map,this.Eu=new Set,this.Ru=new wt(Ee.comparator),this.Au=new Map,this.Vu=new gp,this.du={},this.mu=new Map,this.fu=So.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function L4(s,e,n=!0){const r=ab(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await tb(r,e,n,!0),l}async function j4(s,e){const n=ab(s);await tb(n,e,!0,!1)}async function tb(s,e,n,r){const l=await n4(s.localStore,$i(e)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let g;return r&&(g=await U4(s,e,c,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&FE(s.remoteStore,l),g}async function U4(s,e,n,r,l){s.pu=(S,O,H)=>(async function(se,re,be,Ve){let Ne=re.view.ru(be);Ne.Ss&&(Ne=await p1(se.localStore,re.query,!1).then((({documents:N})=>re.view.ru(N,Ne))));const rt=Ve&&Ve.targetChanges.get(re.targetId),Et=Ve&&Ve.targetMismatches.get(re.targetId)!=null,qe=re.view.applyChanges(Ne,se.isPrimaryClient,rt,Et);return x1(se,re.targetId,qe.au),qe.snapshot})(s,S,O,H);const c=await p1(s.localStore,e,!0),d=new D4(e,c.ks),g=d.ru(c.documents),_=du.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),y=d.applyChanges(g,s.isPrimaryClient,_);x1(s,n,y.au);const b=new k4(e,n,d);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function z4(s,e,n){const r=Me(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!Lh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await jm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Ep(r.remoteStore,l.targetId),Pm(r,l.targetId)})).catch(Io)):(Pm(r,l.targetId),await jm(r.localStore,l.targetId,!0))}async function P4(s,e){const n=Me(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ep(n.remoteStore,r.targetId))}async function B4(s,e,n){const r=Q4(s);try{const l=await(function(d,g){const _=Me(d),y=vt.now(),b=g.reduce(((H,J)=>H.add(J.key)),Ye());let S,O;return _.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let J=Is(),se=Ye();return _.xs.getEntries(H,b).next((re=>{J=re,J.forEach(((be,Ve)=>{Ve.isValidDocument()||(se=se.add(be))}))})).next((()=>_.localDocuments.getOverlayedDocuments(H,J))).next((re=>{S=re;const be=[];for(const Ve of g){const Ne=tR(Ve,S.get(Ve.key).overlayedDocument);Ne!=null&&be.push(new kr(Ve.key,Ne,lE(Ne.value.mapValue),Ai.exists(!0)))}return _.mutationQueue.addMutationBatch(H,y,be,g)})).next((re=>{O=re;const be=re.applyToLocalDocumentSet(S,se);return _.documentOverlayCache.saveOverlays(H,re.batchId,be)}))})).then((()=>({batchId:O.batchId,changes:_E(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,g,_){let y=d.du[d.currentUser.toKey()];y||(y=new wt(Ke)),y=y.insert(g,_),d.du[d.currentUser.toKey()]=y})(r,l.batchId,n),await pu(r,l.changes),await Hh(r.remoteStore)}catch(l){const c=xp(l,"Failed to persist write");n.reject(c)}}async function nb(s,e){const n=Me(s);try{const r=await JR(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(at(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?at(d.hu,14607):l.removedDocuments.size>0&&(at(d.hu,42227),d.hu=!1))})),await pu(n,r,e)}catch(r){await Io(r)}}function S1(s,e,n){const r=Me(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const _=Me(d);_.onlineState=g;let y=!1;_.queries.forEach(((b,S)=>{for(const O of S.ba)O.va(g)&&(y=!0)})),y&&wp(_)})(r.eventManager,e),l.length&&r.Pu.J_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q4(s,e,n){const r=Me(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let d=new wt(Ee.comparator);d=d.insert(c,dn.newNoDocument(c,Ce.min()));const g=Ye().add(c),_=new Ph(Ce.min(),new Map,new wt(Ke),d,g);await nb(r,_),r.Ru=r.Ru.remove(c),r.Au.delete(e),Np(r)}else await jm(r.localStore,e,!1).then((()=>Pm(r,e,n))).catch(Io)}async function H4(s,e){const n=Me(s),r=e.batch.batchId;try{const l=await ZR(n.localStore,e);sb(n,r,null),ib(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,l)}catch(l){await Io(l)}}async function F4(s,e,n){const r=Me(s);try{const l=await(function(d,g){const _=Me(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return _.mutationQueue.lookupMutationBatch(y,g).next((S=>(at(S!==null,37113),b=S.keys(),_.mutationQueue.removeMutationBatch(y,S)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,b,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>_.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);sb(r,e,n),ib(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,l)}catch(l){await Io(l)}}function ib(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function sb(s,e,n){const r=Me(s);let l=r.du[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.du[r.currentUser.toKey()]=l}}function Pm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||rb(s,r)}))}function rb(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Ep(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Np(s))}function x1(s,e,n){for(const r of n)r instanceof JE?(s.Vu.addReference(r.key,e),G4(s,r)):r instanceof eb?(ue(Rp,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||rb(s,r.key)):Se(19791,{wu:r})}function G4(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(ue(Rp,"New document in limbo: "+n),s.Eu.add(r),Np(s))}function Np(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ee(xt.fromString(e)),r=s.fu.next();s.Au.set(r,new M4(n)),s.Ru=s.Ru.insert(n,r),FE(s.remoteStore,new vr($i(Vh(n.path)),r,"TargetPurposeLimboResolution",Oh.ce))}}async function pu(s,e,n){const r=Me(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,_)=>{d.push(r.pu(_,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,b?"current":"not-current")}if(y){l.push(y);const b=_p.Es(_.targetId,y);c.push(b)}})))})),await Promise.all(d),r.Pu.J_(l),await(async function(_,y){const b=Me(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>$.forEach(y,(O=>$.forEach(O.Ts,(H=>b.persistence.referenceDelegate.addReference(S,O.targetId,H))).next((()=>$.forEach(O.Is,(H=>b.persistence.referenceDelegate.removeReference(S,O.targetId,H)))))))))}catch(S){if(!Oo(S))throw S;ue(vp,"Failed to update sequence numbers: "+S)}for(const S of y){const O=S.targetId;if(!S.fromCache){const H=b.vs.get(O),J=H.snapshotVersion,se=H.withLastLimboFreeSnapshotVersion(J);b.vs=b.vs.insert(O,se)}}})(r.localStore,c))}async function K4(s,e){const n=Me(s);if(!n.currentUser.isEqual(e)){ue(Rp,"User change. New user:",e.toKey());const r=await PE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((_=>{_.reject(new de(W.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ns)}}function Y4(s,e){const n=Me(s),r=n.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let l=Ye();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const g=n.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function ab(s){const e=Me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q4.bind(null,e),e.Pu.J_=I4.bind(null,e.eventManager),e.Pu.yu=O4.bind(null,e.eventManager),e}function Q4(s){const e=Me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F4.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return XR(this.persistence,new QR,e.initialUser,this.serializer)}Cu(e){return new zE(yp.Vi,this.serializer)}Du(e){return new s4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class $4 extends wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new zE((r=>Sh.Vi(r,n)),this.serializer)}}class Bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=K4.bind(null,this.syncEngine),await R4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C4})()}createDatastore(e){const n=Bh(e.databaseInfo.databaseId),r=u4(e.databaseInfo);return m4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,d,g){return new g4(r,l,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>S1(this.syncEngine,n,0)),(function(){return _1.v()?new _1:new r4})())}createSyncEngine(e,n){return(function(l,c,d,g,_,y,b){const S=new V4(l,c,d,g,_,y);return b&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Me(n);ue(pa,"RemoteStore shutting down."),r.Ea.add(5),await mu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bm.provider={build:()=>new Bm};class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Or="FirestoreClient";class W4{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=l,this.user=fn.UNAUTHENTICATED,this.clientId=sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ue(Or,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ue(Or,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lm(s,e){s.asyncQueue.verifyOperationInProgress(),ue(Or,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await PE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function w1(s,e){s.asyncQueue.verifyOperationInProgress();const n=await X4(s);ue(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>E1(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>E1(e.remoteStore,l))),s._onlineComponents=e}async function X4(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ue(Or,"Using user provided OfflineComponentProvider");try{await lm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===W.FAILED_PRECONDITION||l.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await lm(s,new wh)}}else ue(Or,"Using default OfflineComponentProvider"),await lm(s,new $4(void 0));return s._offlineComponents}async function lb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ue(Or,"Using user provided OnlineComponentProvider"),await w1(s,s._uninitializedComponentsProvider._online)):(ue(Or,"Using default OnlineComponentProvider"),await w1(s,new Bm))),s._onlineComponents}function Z4(s){return lb(s).then((e=>e.syncEngine))}async function qm(s){const e=await lb(s),n=e.eventManager;return n.onListen=L4.bind(null,e.syncEngine),n.onUnlisten=z4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=j4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P4.bind(null,e.syncEngine),n}function J4(s,e,n,r){const l=new ob(r),c=new ZE(e,l,n);return s.asyncQueue.enqueueAndForget((async()=>WE(await qm(s),c))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>XE(await qm(s),c)))}}function eN(s,e,n={}){const r=new Sr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,_,y){const b=new ob({next:O=>{b.Nu(),d.enqueueAndForget((()=>XE(c,S)));const H=O.docs.has(g);!H&&O.fromCache?y.reject(new de(W.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&O.fromCache&&_&&_.source==="server"?y.reject(new de(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(O)},error:O=>y.reject(O)}),S=new ZE(Vh(g.path),b,{includeMetadataChanges:!0,Ka:!0});return WE(c,S)})(await qm(s),s.asyncQueue,e,n,r))),r.promise}function tN(s,e){const n=new Sr;return s.asyncQueue.enqueueAndForget((async()=>B4(await Z4(s),e,n))),n.promise}function ub(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const nN="ComponentProvider",R1=new Map;function iN(s,e,n,r,l){return new Tw(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ub(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,r)}const cb="firestore.googleapis.com",N1=!0;class C1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cb,this.ssl=N1}else this.host=e.host,this.ssl=e.ssl??N1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OR)throw new de(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ub(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ew;switch(r.type){case"firstParty":return new sw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=R1.get(n);r&&(ue(nN,"Removing Datastore"),R1.delete(n),r.terminate())})(this),Promise.resolve()}}function sN(s,e,n,r={}){s=Ti(s,Cp);const l=wo(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;l&&(rv(`https://${g}`),av("Firestore",!0)),c.host!==cb&&c.host!==g&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:g,ssl:l,emulatorOptions:r};if(!xr(_,d)&&(s._setSettings(_),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=fn.MOCK_USER;else{y=T2(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new de(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(S)}s._authCredentials=new tw(new Xv(y,b))}}class Fh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fh(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hu(n,Ft._jsonSchema))return new Ft(e,r||null,new Ee(xt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Ht("string",Ft._jsonSchemaVersion),referencePath:Ht("string")};class tu extends Fh{constructor(e,n,r){super(e,n,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Ee(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function yn(s,e,...n){if(s=vn(s),arguments.length===1&&(e=sp.newId()),cw("doc","path",e),s instanceof Cp){const r=xt.fromString(e,...n);return H_(r),new Ft(s,null,new Ee(r))}{if(!(s instanceof Ft||s instanceof tu))throw new de(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(xt.fromString(e,...n));return H_(r),new Ft(s.firestore,s instanceof tu?s.converter:null,new Ee(r))}}const I1="AsyncQueue";class O1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const r=om();r&&ue(I1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Oo(e))throw e;ue(I1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",D1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Sp.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Se(47125,{Pc:D1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function D1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ga extends Cp{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new O1,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O1(e),this._firestoreClient=void 0,await e}}}function rN(s,e){const n=typeof s=="object"?s:cv(),r=typeof s=="string"?s:yh,l=Qm(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=E2("firestore");c&&sN(l,...c)}return l}function Ip(s){if(s._terminated)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||aN(s),s._firestoreClient}function aN(s){const e=s._freezeSettings(),n=iN(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new W4(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(un.fromBase64String(e))}catch(n){throw new de(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:Ht("string",li._jsonSchemaVersion),bytes:Ht("string")};class Op{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gh{constructor(e){this._methodName=e}}class Xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Ht("string",Xi._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class Si{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Si(e.vectorValues);throw new de(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Ht("string",Si._jsonSchemaVersion),vectorValues:Ht("object")};const oN=/^__.*__$/;class lN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new fu(e,this.data,n,this.fieldTransforms)}}class hb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:s})}}class Kh{constructor(e,n,r,l,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Kh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fb(this.dataSource)&&oN.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class uN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bh(e)}createContext(e,n,r,l=!1){return new Kh({dataSource:e,methodName:n,targetDoc:r,path:ln.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function db(s){const e=s._freezeSettings(),n=Bh(s._databaseId);return new uN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function cN(s,e,n,r,l,c={}){const d=s.createContext(c.merge||c.mergeFields?2:0,e,n,l);kp("Data must be an object, but it was:",d,r);const g=mb(r,d);let _,y;if(c.merge)_=new Hn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const S of c.mergeFields){const O=nu(e,S,n);if(!d.contains(O))throw new de(W.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);yb(b,O)||b.push(O)}_=new Hn(b),y=d.fieldTransforms.filter((S=>_.covers(S.field)))}else _=null,y=d.fieldTransforms;return new lN(new On(g),_,y)}class Yh extends Gh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}function hN(s,e,n){return new Kh({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dp extends Gh{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=hN(this,e,!0),r=this.Ac.map((c=>gu(c,n))),l=new Ao(r);return new Xw(e.path,l)}isEqual(e){return e instanceof Dp&&xr(this.Ac,e.Ac)}}function fN(s,e,n,r){const l=s.createContext(1,e,n);kp("Data must be an object, but it was:",l,r);const c=[],d=On.empty();Dr(r,((_,y)=>{const b=gb(e,_,n);y=vn(y);const S=l.childContextForFieldPath(b);if(y instanceof Yh)c.push(b);else{const O=gu(y,S);O!=null&&(c.push(b),d.set(b,O))}}));const g=new Hn(c);return new hb(d,g,l.fieldTransforms)}function dN(s,e,n,r,l,c){const d=s.createContext(1,e,n),g=[nu(e,r,n)],_=[l];if(c.length%2!=0)throw new de(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<c.length;O+=2)g.push(nu(e,c[O])),_.push(c[O+1]);const y=[],b=On.empty();for(let O=g.length-1;O>=0;--O)if(!yb(y,g[O])){const H=g[O];let J=_[O];J=vn(J);const se=d.childContextForFieldPath(H);if(J instanceof Yh)y.push(H);else{const re=gu(J,se);re!=null&&(y.push(H),b.set(H,re))}}const S=new Hn(y);return new hb(b,S,d.fieldTransforms)}function gu(s,e){if(pb(s=vn(s)))return kp("Unsupported field value:",e,s),mb(s,e);if(s instanceof Gh)return(function(r,l){if(!fb(l.dataSource))throw l.createError(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const g of r){let _=gu(g,l.childContextForArray(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=vt.fromDate(r);return{timestampValue:Ah(l.serializer,c)}}if(r instanceof vt){const c=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(l.serializer,c)}}if(r instanceof Xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:IE(l.serializer,r._byteString)};if(r instanceof Ft){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:pp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Si)return(function(d,g){const _=d instanceof Si?d.toArray():d;return{mapValue:{fields:{[aE]:{stringValue:oE},[_h]:{arrayValue:{values:_.map((b=>{if(typeof b!="number")throw g.createError("VectorValues must only contain numeric values.");return hp(g.serializer,b)}))}}}}}})(r,l);if(jE(r))return r._toProto(l.serializer);throw l.createError(`Unsupported field value: ${rp(r)}`)})(s,e)}function mb(s,e){const n={};return eE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(s,((r,l)=>{const c=gu(l,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function pb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof vt||s instanceof Xi||s instanceof li||s instanceof Ft||s instanceof Gh||s instanceof Si||jE(s))}function kp(s,e,n){if(!pb(n)||!Zv(n)){const r=rp(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function nu(s,e,n){if((e=vn(e))instanceof Op)return e._internalPath;if(typeof e=="string")return gb(s,e);throw Rh("Field path arguments must be of type string or ",s,!1,void 0,n)}const mN=new RegExp("[~\\*/\\[\\]]");function gb(s,e,n){if(e.search(mN)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Op(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rh(s,e,n,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${r}`),d&&(_+=` in document ${l}`),_+=")"),new de(W.INVALID_ARGUMENT,g+s+_)}function yb(s,e){return s.some((n=>n.isEqual(e)))}class pN{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[_h].arrayValue?.values?.map((r=>Mt(r.doubleValue)));return new Si(n)}convertGeoPoint(e){return new Xi(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);at(LE(r),9688,{name:e});const l=new Zl(r.get(1),r.get(3)),c=new Ee(r.popFirst(5));return l.isEqual(n)||Cs(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class _b extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function oa(...s){return new Dp("arrayUnion",s)}const k1="@firebase/firestore",M1="4.10.0";function V1(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class vb{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(nu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gN extends vb{data(){return super.data()}}function yN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function _N(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends vb{constructor(e,n,r,l,c,d){super(e,n,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Ht("string",ha._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class rh extends ha{data(e={}){return super.data(e)}}class yo{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Pl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new rh(this._firestore,this._userDataWriter,r.key,r,new Pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const _=new rh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Pl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const _=new rh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Pl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),b=d.indexOf(g.doc.key)),{type:vN(g.type),doc:_,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:s})}}yo._jsonSchemaVersion="firestore/querySnapshot/1.0",yo._jsonSchema={type:Ht("string",yo._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};function EN(s){s=Ti(s,Ft);const e=Ti(s.firestore,ga),n=Ip(e);return eN(n,s._key).then((r=>Eb(e,s,r)))}function bN(s,e,n){s=Ti(s,Ft);const r=Ti(s.firestore,ga),l=_N(s.converter,e),c=db(r);return Mp(r,[cN(c,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Ai.none())])}function ai(s,e,n,...r){s=Ti(s,Ft);const l=Ti(s.firestore,ga),c=db(l);let d;return d=typeof(e=vn(e))=="string"||e instanceof Op?dN(c,"updateDoc",s._key,e,n,r):fN(c,"updateDoc",s._key,e),Mp(l,[d.toMutation(s._key,Ai.exists(!0))])}function TN(s){return Mp(Ti(s.firestore,ga),[new fp(s._key,Ai.none())])}function L1(s,...e){s=vn(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||V1(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(V1(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,d,g;if(s instanceof Ft)d=Ti(s.firestore,ga),g=Vh(s._key.path),c={next:y=>{e[r]&&e[r](Eb(d,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Ti(s,Fh);d=Ti(y.firestore,ga),g=y._query;const b=new _b(d);c={next:S=>{e[r]&&e[r](new yo(d,b,y,S))},error:e[r+1],complete:e[r+2]},yN(s._query)}const _=Ip(d);return J4(_,g,l,c)}function Mp(s,e){const n=Ip(s);return tN(n,e)}function Eb(s,e,n){const r=n.docs.get(e._key),l=new _b(s);return new ha(s,l,e._key,r,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Jx(Ro),_o(new fa("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),g=new ga(new nw(r.getProvider("auth-internal")),new rw(d,r.getProvider("app-check-internal")),Aw(d,l),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Tr(k1,M1,e),Tr(k1,M1,"esm2020")})();const bb=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const AN=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const SN=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const j1=s=>{const e=SN(s);return e.charAt(0).toUpperCase()+e.slice(1)};var xN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wN=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const RN=We.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:c,iconNode:d,...g},_)=>We.createElement("svg",{ref:_,...xN,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:bb("lucide",l),...!c&&!wN(g)&&{"aria-hidden":"true"},...g},[...d.map(([y,b])=>We.createElement(y,b)),...Array.isArray(c)?c:[c]]));const ye=(s,e)=>{const n=We.forwardRef(({className:r,...l},c)=>We.createElement(RN,{ref:c,iconNode:e,className:bb(`lucide-${AN(j1(s))}`,`lucide-${s}`,r),...l}));return n.displayName=j1(s),n};const NN=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],CN=ye("arrow-up",NN);const IN=[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]],Ll=ye("bird",IN);const ON=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],um=ye("book-open",ON);const DN=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],kN=ye("bug",DN);const MN=[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]],Kc=ye("cat",MN);const VN=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Tb=ye("chart-no-axes-column",VN);const LN=[["path",{d:"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1z",key:"b89hwq"}],["path",{d:"M15 18c1.5-.615 3-2.461 3-4.923C18 8.769 14.5 4.462 12 2 9.5 4.462 6 8.77 6 13.077 6 15.539 7.5 17.385 9 18",key:"8jdkhx"}],["path",{d:"m16 7-2.5 2.5",key:"1jq90w"}],["path",{d:"M9 2h6",key:"1jrp98"}]],jN=ye("chess-bishop",LN);const UN=[["path",{d:"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1z",key:"b89hwq"}],["path",{d:"M16.5 18c1-2 2.5-5 2.5-9a7 7 0 0 0-7-7H6.635a1 1 0 0 0-.768 1.64L7 5l-2.32 5.802a2 2 0 0 0 .95 2.526l2.87 1.456",key:"axbnlq"}],["path",{d:"m15 5 1.425-1.425",key:"15xz8w"}],["path",{d:"m17 8 1.53-1.53",key:"15zhqh"}],["path",{d:"M9.713 12.185 7 18",key:"1ocm0l"}]],zN=ye("chess-knight",UN);const PN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hm=ye("circle-check-big",PN);const BN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cm=ye("circle",BN);const qN=[["path",{d:"M16.17 7.83 2 22",key:"t58vo8"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12",key:"17k36q"}],["path",{d:"m7.83 7.83 8.34 8.34",key:"1d7sxk"}]],HN=ye("clover",qN);const FN=[["path",{d:"m20.9 18.55-8-15.98a1 1 0 0 0-1.8 0l-8 15.98",key:"53pte7"}],["ellipse",{cx:"12",cy:"19",rx:"9",ry:"3",key:"1ji25f"}]],GN=ye("cone",FN);const KN=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],YN=ye("copy",KN);const QN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Fm=ye("crown",QN);const $N=[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z",key:"1u2ovd"}],["path",{d:"M10 22v-8L2.25 9.15",key:"11pn4q"}],["path",{d:"m10 14 11.77-6.87",key:"1kt1wh"}]],WN=ye("cuboid",$N);const XN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],ZN=ye("cylinder",XN);const JN=[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]],eC=ye("dog",JN);const tC=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],nC=ye("droplet",tC);const iC=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sC=ye("earth",iC);const rC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ah=ye("eye",rC);const aC=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],oC=ye("feather",aC);const lC=[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]],uC=ye("fish",lC);const cC=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],hC=ye("flame",cC);const fC=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],dC=ye("flower",fC);const mC=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],pC=ye("footprints",mC);const gC=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],yC=ye("ghost",gC);const _C=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],vC=ye("hammer",_C);const EC=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],iu=ye("hexagon",EC);const bC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],TC=ye("history",bC);const AC=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],SC=ye("leaf",AC);const xC=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],wC=ye("loader",xC);const RC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],U1=ye("log-out",RC);const NC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],CC=ye("moon",NC);const IC=[["path",{d:"M12 12V4a1 1 0 0 1 1-1h6.297a1 1 0 0 1 .651 1.759l-4.696 4.025",key:"1bx4vc"}],["path",{d:"m12 21-7.414-7.414A2 2 0 0 1 4 12.172V6.415a1.002 1.002 0 0 1 1.707-.707L20 20.009",key:"1h3km6"}],["path",{d:"m12.214 3.381 8.414 14.966a1 1 0 0 1-.167 1.199l-1.168 1.163a1 1 0 0 1-.706.291H6.351a1 1 0 0 1-.625-.219L3.25 18.8a1 1 0 0 1 .631-1.781l4.165.027",key:"1hj4wg"}]],z1=ye("origami",IC);const OC=[["path",{d:"M11.25 17.25h1.5L12 18z",key:"1wmwwj"}],["path",{d:"m15 12 2 2",key:"k60wz4"}],["path",{d:"M18 6.5a.5.5 0 0 0-.5-.5",key:"1ch4h4"}],["path",{d:"M20.69 9.67a4.5 4.5 0 1 0-7.04-5.5 8.35 8.35 0 0 0-3.3 0 4.5 4.5 0 1 0-7.04 5.5C2.49 11.2 2 12.88 2 14.5 2 19.47 6.48 22 12 22s10-2.53 10-7.5c0-1.62-.48-3.3-1.3-4.83",key:"1c660l"}],["path",{d:"M6 6.5a.495.495 0 0 1 .5-.5",key:"eviuep"}],["path",{d:"m9 12-2 2",key:"326nkw"}]],P1=ye("panda",OC);const DC=[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]],oh=ye("paw-print",DC);const kC=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],MC=ye("piggy-bank",kC);const VC=[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]],B1=ye("rabbit",VC);const LC=[["path",{d:"M13 22H4a2 2 0 0 1 0-4h12",key:"bt3f23"}],["path",{d:"M13.236 18a3 3 0 0 0-2.2-5",key:"1tbvmo"}],["path",{d:"M16 9h.01",key:"1bdo4e"}],["path",{d:"M16.82 3.94a3 3 0 1 1 3.237 4.868l1.815 2.587a1.5 1.5 0 0 1-1.5 2.1l-2.872-.453a3 3 0 0 0-3.5 3",key:"9ch7kn"}],["path",{d:"M17 4.988a3 3 0 1 0-5.2 2.052A7 7 0 0 0 4 14.015 4 4 0 0 0 8 18",key:"3s7e9i"}]],hm=ye("rat",LC);const jC=[["path",{d:"M14 11a2 2 0 1 1-4 0 4 4 0 0 1 8 0 6 6 0 0 1-12 0 8 8 0 0 1 16 0 10 10 0 1 1-20 0 11.93 11.93 0 0 1 2.42-7.22 2 2 0 1 1 3.16 2.44",key:"1cn552"}]],UC=ye("shell",jC);const zC=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],PC=ye("skip-forward",zC);const BC=[["path",{d:"M2 13a6 6 0 1 0 12 0 4 4 0 1 0-8 0 2 2 0 0 0 4 0",key:"hneq2s"}],["circle",{cx:"10",cy:"13",r:"8",key:"194lz3"}],["path",{d:"M2 21h12c4.4 0 8-3.6 8-8V7a2 2 0 1 0-4 0v6",key:"ixqyt7"}],["path",{d:"M18 3 19.1 5.2",key:"9tjm43"}],["path",{d:"M22 3 20.9 5.2",key:"j3odrs"}]],q1=ye("snail",BC);const qC=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],H1=ye("snowflake",qC);const HC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fm=ye("sparkles",HC);const FC=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],GC=ye("sprout",FC);const KC=[["path",{d:"M15.236 22a3 3 0 0 0-2.2-5",key:"21bitc"}],["path",{d:"M16 20a3 3 0 0 1 3-3h1a2 2 0 0 0 2-2v-2a4 4 0 0 0-4-4V4",key:"oh0fg0"}],["path",{d:"M18 13h.01",key:"9veqaj"}],["path",{d:"M18 6a4 4 0 0 0-4 4 7 7 0 0 0-7 7c0-5 4-5 4-10.5a4.5 4.5 0 1 0-9 0 2.5 2.5 0 0 0 5 0C7 10 3 11 3 17c0 2.8 2.2 5 5 5h10",key:"980v8a"}]],F1=ye("squirrel",KC);const YC=[["path",{d:"M11.264 2.205A4 4 0 0 0 6.42 4.211l-4 8a4 4 0 0 0 1.359 5.117l6 4a4 4 0 0 0 4.438 0l6-4a4 4 0 0 0 1.576-4.592l-2-6a4 4 0 0 0-2.53-2.53z",key:"1si4ox"}],["path",{d:"M11.99 22 14 12l7.822 3.184",key:"1u8to0"}],["path",{d:"M14 12 8.47 2.302",key:"guo3d5"}]],QC=ye("stone",YC);const $C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],WC=ye("target",$C);const XC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],G1=ye("trash-2",XC);const ZC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dm=ye("triangle-alert",ZC);const JC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],eI=ye("trophy",JC);const tI=[["path",{d:"m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4Z",key:"1lbbv7"}],["path",{d:"M4.82 7.9 8 10",key:"m9wose"}],["path",{d:"M15.18 7.9 12 10",key:"p8dp2u"}],["path",{d:"M16.93 10H20a2 2 0 0 1 0 4H2",key:"12nsm7"}]],nI=ye("turtle",tI);const iI=[["path",{d:"m19 12-1.5 3",key:"9bcu4o"}],["path",{d:"M19.63 18.81 22 20",key:"121v98"}],["path",{d:"M6.47 8.23a1.68 1.68 0 0 1 2.44 1.93l-.64 2.08a6.76 6.76 0 0 0 10.16 7.67l.42-.27a1 1 0 1 0-2.73-4.21l-.42.27a1.76 1.76 0 0 1-2.63-1.99l.64-2.08A6.66 6.66 0 0 0 3.94 3.9l-.7.4a1 1 0 1 0 2.55 4.34z",key:"1tij6q"}]],K1=ye("worm",iI);const sI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vp=ye("x",sI),rI={apiKey:"AIzaSyBjIjK53vVJW1y5RaqEFGSFp0ECVDBEe1o",authDomain:"game-hub-ff8aa.firebaseapp.com",projectId:"game-hub-ff8aa",storageBucket:"game-hub-ff8aa.firebasestorage.app",messagingSenderId:"586559578902",appId:"1:586559578902:web:c0d92602ad20ed876aa637"},Ab=uv(rI),mm=Xx(Ab),_n=rN(Ab),Rn=typeof __app_id<"u"?__app_id:"equilibrium-game",aI="9",Yc=()=>E.jsx("style",{children:`
    .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); border-radius: 4px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(16, 185, 129, 0.3); border-radius: 4px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(16, 185, 129, 0.6); }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(10deg); }
    }
    .animate-float { animation: float infinite ease-in-out; }
    
    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .animate-spin-slow { animation: spin-slow 12s linear infinite; }

    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    .mask-gradient-right { mask-image: linear-gradient(to right, black 85%, transparent 100%); }
  `}),Qc=({isShaking:s})=>E.jsxs("div",{className:`absolute inset-0 overflow-hidden pointer-events-none z-0 ${s?"animate-shake bg-red-900/20":""}`,children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-yellow-900/20 via-gray-950 to-black"}),E.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[...Array(20)].map((e,n)=>{const r=Object.keys(Zi),l=Zi[r[n%r.length]].icon;return E.jsx("div",{className:"absolute animate-float text-white/60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${10+Math.random()*20}s`,transform:`scale(${.5+Math.random()})`},children:E.jsx(l,{size:32})},n)})}),E.jsx("style",{children:`
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
      }
      .animate-float { animation: float infinite ease-in-out; }
      
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    `})]}),Zi={WOOD:{id:"WOOD",color:"bg-amber-800",border:"border-amber-950",icon:ZN,name:"Log",validOn:["EMPTY","WOOD"],scoreType:"TREE"},LEAF:{id:"LEAF",color:"bg-emerald-500",border:"border-emerald-700",icon:SC,name:"Foliage",validOn:["EMPTY","WOOD"],scoreType:"TREE"},STONE:{id:"STONE",color:"bg-slate-400",border:"border-slate-600",icon:QC,name:"Stone",validOn:["EMPTY","STONE"],scoreType:"MOUNTAIN"},WATER:{id:"WATER",color:"bg-cyan-500",border:"border-cyan-700",icon:nC,name:"Water",validOn:["EMPTY"],scoreType:"RIVER"},SAND:{id:"SAND",color:"bg-yellow-400",border:"border-yellow-600",icon:GC,name:"Sand",validOn:["EMPTY"],scoreType:"FIELD"},BRICK:{id:"BRICK",color:"bg-red-700",border:"border-red-900",icon:WN,name:"Brick",validOn:["EMPTY","BRICK","STONE","WOOD"],scoreType:"BUILDING"}},Kt=(s,e)=>[{q:s+1,r:e},{q:s+1,r:e-1},{q:s,r:e-1},{q:s-1,r:e},{q:s-1,r:e+1},{q:s,r:e+1}],ua=s=>{if(!s||s.stack.length!==2)return!1;const e=s.stack[1],n=s.stack[0];return e==="BRICK"&&["BRICK","STONE","WOOD"].includes(n)},ve=(s,e)=>!s||s.stack.length!==e.length?!1:s.stack.every((n,r)=>n===e[r]),Nn=(s,e,n,r)=>Kt(e,n).some(c=>{const d=s[`${c.q},${c.r}`];return d&&r(d)}),oI=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}],Cn=(s,e,n,r)=>oI.some(l=>r.every((c,d)=>{const g=e+l.q*(d+1),_=n+l.r*(d+1),y=s[`${g},${_}`];return y&&c(y)})),we=s=>!s||s.stack.length===0?null:s.stack[s.stack.length-1],Ki={SQUIRREL:{id:"SQUIRREL",name:"Squirrel",desc:"Small Tree (1 Log + Leaf)",points:[2,2,2],slots:3,icon:F1,iconColor:"text-orange-500",visual:{type:"stack",tokens:["WOOD","LEAF"]},check:s=>ve(s,["WOOD","LEAF"])},LIZARD:{id:"LIZARD",name:"Lizard",desc:"Small Rock (Stone) next to Bush (Leaf)",points:[2,2,2],slots:3,icon:hm,iconColor:"text-emerald-400",visual:{type:"adj",main:["STONE"],others:[["LEAF"]]},check:(s,e)=>ve(s,["STONE"])&&Nn(e,s.q,s.r,n=>ve(n,["LEAF"]))},SNAIL:{id:"SNAIL",name:"Snail",desc:"Small Rock (Stone) next to Water",points:[2,2,2],slots:3,icon:q1,iconColor:"text-lime-300",visual:{type:"adj",main:["STONE"],others:[["WATER"]]},check:(s,e)=>ve(s,["STONE"])&&Nn(e,s.q,s.r,n=>we(n)==="WATER")},HERON:{id:"HERON",name:"Heron",desc:"Water next to Bush (Leaf)",points:[2,2,2],slots:3,icon:Ll,iconColor:"text-cyan-300",visual:{type:"adj",main:["WATER"],others:[["LEAF"]]},check:(s,e)=>we(s)==="WATER"&&Nn(e,s.q,s.r,n=>ve(n,["LEAF"]))},DUCK:{id:"DUCK",name:"Duck",desc:"Water next to Wood (Log)",points:[2,2,2],slots:3,icon:z1,iconColor:"text-green-600",visual:{type:"adj",main:["WATER"],others:[["WOOD"]]},check:(s,e)=>we(s)==="WATER"&&Nn(e,s.q,s.r,n=>ve(n,["WOOD"]))},HAWK:{id:"HAWK",name:"Hawk",desc:"Dead Tree (3 Logs)",points:[3,4],slots:2,icon:Ll,iconColor:"text-red-700",visual:{type:"stack",tokens:["WOOD","WOOD","WOOD"]},check:s=>ve(s,["WOOD","WOOD","WOOD"])},EAGLE:{id:"EAGLE",name:"Eagle",desc:"Highest Peak (3 Stone)",points:[3,4],slots:2,icon:WC,iconColor:"text-sky-600",visual:{type:"stack",tokens:["STONE","STONE","STONE"]},check:s=>ve(s,["STONE","STONE","STONE"])},FROG:{id:"FROG",name:"Frog",desc:"Bush (Leaf) next to Water",points:[2,2,2,3],slots:4,icon:HN,iconColor:"text-lime-500",visual:{type:"adj",main:["LEAF"],others:[["WATER"]]},check:(s,e)=>ve(s,["LEAF"])&&Nn(e,s.q,s.r,n=>we(n)==="WATER")},BEAVER:{id:"BEAVER",name:"Beaver",desc:"Log next to Water AND Tree",points:[4,5],slots:2,icon:hm,iconColor:"text-amber-800",visual:{type:"adj",main:["WOOD"],others:[["WATER"],["WOOD","LEAF"]]},check:(s,e)=>{if(!ve(s,["WOOD"]))return!1;const n=Kt(s.q,s.r).map(c=>e[`${c.q},${c.r}`]),r=n.some(c=>we(c)==="WATER"),l=n.some(c=>c&&ve(c,["WOOD","LEAF"]));return r&&l}},TURTLE:{id:"TURTLE",name:"Turtle",desc:"Water next to Field AND Stone",points:[3,3],slots:2,icon:nI,iconColor:"text-teal-600",visual:{type:"adj",main:["WATER"],others:[["SAND"],["STONE"]]},check:(s,e)=>{if(we(s)!=="WATER")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>we(r)==="SAND")&&n.some(r=>we(r)==="STONE")}},HEDGEHOG:{id:"HEDGEHOG",name:"Hedgehog",desc:"Field next to Wood(1 Log) AND Bush(1 Leaf)",points:[3,4],slots:2,icon:B1,iconColor:"text-blue-600",visual:{type:"adj",main:["SAND"],others:[["LEAF"],["WOOD"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>r&&ve(r,["LEAF"]))&&n.some(r=>r&&ve(r,["WOOD"]))}},SHELL:{id:"SHELL",name:"Shell",desc:"Sand next to Water AND Stone",points:[3,3],slots:2,icon:UC,iconColor:"text-red-600",visual:{type:"adj",main:["SAND"],others:[["WATER"],["STONE"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>we(r)==="WATER")&&n.some(r=>we(r)==="STONE")}},BOAR:{id:"BOAR",name:"Boar",desc:"Field next to Water AND Tree",points:[4,4,5],slots:3,icon:MC,iconColor:"text-amber-900",visual:{type:"adj",main:["SAND"],others:[["WATER"],["WOOD","LEAF"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>we(r)==="WATER")&&n.some(r=>r&&ve(r,["WOOD","LEAF"]))}},ANTS:{id:"ANTS",name:"Ants",desc:"Field next to Bush(1 Leaf) AND Tree",points:[4,4,5],slots:3,icon:kN,iconColor:"text-amber-600",visual:{type:"adj",main:["SAND"],others:[["LEAF"],["WOOD","LEAF"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>r&&ve(r,["LEAF"]))&&n.some(r=>r&&ve(r,["WOOD","LEAF"]))}},FOX:{id:"FOX",name:"Fox",desc:"Medium Rock (2 Stone) next to Medium Wood (2 Log)",points:[4,5],slots:2,icon:Kc,iconColor:"text-orange-600",visual:{type:"adj",main:["STONE","STONE"],others:[["WOOD","WOOD"]]},check:(s,e)=>ve(s,["STONE","STONE"])&&Nn(e,s.q,s.r,n=>ve(n,["WOOD","WOOD"]))},DEER:{id:"DEER",name:"Deer",desc:"Tall Tree (2 Log+Leaf) next to Field",points:[4,5,5],slots:3,icon:eC,iconColor:"text-amber-600",visual:{type:"adj",main:["WOOD","WOOD","LEAF"],others:[["SAND"]]},check:(s,e)=>ve(s,["WOOD","WOOD","LEAF"])&&Nn(e,s.q,s.r,n=>we(n)==="SAND")},BEAR:{id:"BEAR",name:"Bear",desc:"Tall Tree (2 Log+Leaf) next to Mountain (2+ Stone)",points:[5,6],slots:2,icon:P1,iconColor:"text-amber-800",visual:{type:"adj",main:["WOOD","WOOD","LEAF"],others:[["STONE","STONE"]]},check:(s,e)=>ve(s,["WOOD","WOOD","LEAF"])&&Nn(e,s.q,s.r,n=>n&&n.stack.length>=2&&we(n)==="STONE")},PANDA:{id:"PANDA",name:"Panda",desc:"Tall Tree (2 Log+Leaf) next to Water",points:[5,5],slots:2,icon:P1,iconColor:"text-red-300",visual:{type:"adj",main:["WOOD","WOOD","LEAF"],others:[["WATER"]]},check:(s,e)=>ve(s,["WOOD","WOOD","LEAF"])&&Nn(e,s.q,s.r,n=>we(n)==="WATER")},SCORPION:{id:"SCORPION",name:"Scorpion",desc:"Medium Rock (2 Stone) next to Field",points:[3,3,3],slots:3,icon:q1,iconColor:"text-rose-600",visual:{type:"adj",main:["STONE","STONE"],others:[["SAND"]]},check:(s,e)=>ve(s,["STONE","STONE"])&&Nn(e,s.q,s.r,n=>we(n)==="SAND")},BEE:{id:"BEE",name:"Bee",desc:"Bush (Leaf) next to 2 other Bushes",points:[2,3,3],slots:3,icon:dC,iconColor:"text-yellow-400",visual:{type:"adj",main:["LEAF"],others:[["LEAF"],["LEAF"]]},check:(s,e)=>{if(!ve(s,["LEAF"]))return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];l&&ve(l,["LEAF"])&&n++}),n>=2}},WOLF:{id:"WOLF",name:"Wolf",desc:"Tree (1 Log+Leaf) next to 2 other Trees",points:[6,7],slots:2,icon:CC,iconColor:"text-orange-500",visual:{type:"adj",main:["WOOD","LEAF"],others:[["WOOD","LEAF"],["WOOD","LEAF"]]},check:(s,e)=>{if(!ve(s,["WOOD","LEAF"]))return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];l&&ve(l,["WOOD","LEAF"])&&n++}),n>=2}},SALMON:{id:"SALMON",name:"Salmon",desc:"Water next to 2 other Water tiles",points:[3,3,3],slots:3,icon:uC,iconColor:"text-rose-400",visual:{type:"adj",main:["WATER"],others:[["WATER"],["WATER"]]},check:(s,e)=>{if(we(s)!=="WATER")return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{we(e[`${r.q},${r.r}`])==="WATER"&&n++}),n>=2}},RABBIT:{id:"RABBIT",name:"Rabbit",desc:"Field next to 2 Bushes",points:[3,4,4,4],slots:4,icon:B1,iconColor:"text-fuchsia-300",visual:{type:"adj",main:["SAND"],others:[["LEAF"],["LEAF"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];l&&ve(l,["LEAF"])&&n++}),n>=2}},PENGUIN:{id:"PENGUIN",name:"Penguin",desc:"Stone next to 2 Water tiles",points:[3,3,4,4],slots:4,icon:Ll,iconColor:"text-cyan-300",visual:{type:"adj",main:["STONE"],others:[["WATER"],["WATER"]]},check:(s,e)=>{if(we(s)!=="STONE")return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];we(l)==="WATER"&&n++}),n>=2}},MOLE:{id:"MOLE",name:"Mole",desc:"Stone next to 2 Fields",points:[3,3,4,4],slots:4,icon:hm,iconColor:"text-amber-700",visual:{type:"adj",main:["STONE"],others:[["SAND"],["SAND"]]},check:(s,e)=>{if(we(s)!=="STONE")return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];we(l)==="SAND"&&n++}),n>=2}},BAT:{id:"BAT",name:"Bat",desc:"Building next to Water",points:[4,4,5],slots:3,icon:yC,iconColor:"text-violet-400",visual:{type:"adj",main:["BRICK","BRICK"],others:[["WATER"]]},check:(s,e)=>ua(s)&&Nn(e,s.q,s.r,n=>we(n)==="WATER")},CAT:{id:"CAT",name:"Cat",desc:"Building next to 2 Fields",points:[5,6],slots:2,icon:Kc,iconColor:"text-yellow-600",visual:{type:"adj",main:["BRICK","BRICK"],others:[["SAND"],["SAND"]]},check:(s,e)=>{if(!ua(s))return!1;let n=0;return Kt(s.q,s.r).forEach(r=>{const l=e[`${r.q},${r.r}`];we(l)==="SAND"&&n++}),n>=2}},OWL:{id:"OWL",name:"Owl",desc:"Tall Tree (2 Log+Leaf) next to Building",points:[6,7],slots:2,icon:ah,iconColor:"text-indigo-400",visual:{type:"adj",main:["WOOD","WOOD","LEAF"],others:[["BRICK","BRICK"]]},check:(s,e)=>ve(s,["WOOD","WOOD","LEAF"])&&Nn(e,s.q,s.r,n=>ua(n))},SPIDER:{id:"SPIDER",name:"Spider",desc:"Dead Tree (3 Log) next to Building",points:[6,6],slots:2,icon:H1,iconColor:"text-red-900",visual:{type:"adj",main:["WOOD","WOOD","WOOD"],others:[["BRICK","BRICK"]]},check:(s,e)=>ve(s,["WOOD","WOOD","WOOD"])&&Nn(e,s.q,s.r,n=>ua(n))},CATERPILLAR:{id:"CATERPILLAR",name:"Caterpillar",desc:"Line: Leaf -> Leaf -> Leaf",points:[3,3,3],slots:3,icon:K1,iconColor:"text-lime-600",visual:{type:"line",sequence:[["LEAF"],["LEAF"],["LEAF"]]},check:(s,e)=>ve(s,["LEAF"])?Cn(e,s.q,s.r,[n=>ve(n,["LEAF"]),n=>ve(n,["LEAF"])]):!1},SNAKE:{id:"SNAKE",name:"Snake",desc:"Line: Bush -> Bush -> Stone",points:[3,4],slots:2,icon:K1,iconColor:"text-emerald-500",visual:{type:"line",sequence:[["LEAF"],["LEAF"],["STONE"]]},check:(s,e)=>ve(s,["LEAF"])?Cn(e,s.q,s.r,[n=>ve(n,["LEAF"]),n=>we(n)==="STONE"]):!1},CAMEL:{id:"CAMEL",name:"Camel",desc:"Line: Sand -> Sand -> Stone",points:[3,4],slots:2,icon:hC,iconColor:"text-amber-400",visual:{type:"line",sequence:[["SAND"],["SAND"],["STONE"]]},check:(s,e)=>we(s)!=="SAND"?!1:Cn(e,s.q,s.r,[n=>we(n)==="SAND",n=>we(n)==="STONE"])},RHINO:{id:"RHINO",name:"Rhino",desc:"Line: Stone -> Stone -> Field",points:[3,4],slots:2,icon:GN,iconColor:"text-stone-400",visual:{type:"line",sequence:[["STONE"],["STONE"],["SAND"]]},check:(s,e)=>we(s)!=="STONE"?!1:Cn(e,s.q,s.r,[n=>we(n)==="STONE",n=>we(n)==="SAND"])},SWAN:{id:"SWAN",name:"Swan",desc:"Line: Water -> Water -> Leaf",points:[3,4],slots:2,icon:z1,iconColor:"text-pink-400",visual:{type:"line",sequence:[["WATER"],["WATER"],["LEAF"]]},check:(s,e)=>we(s)!=="WATER"?!1:Cn(e,s.q,s.r,[n=>we(n)==="WATER",n=>ve(n,["LEAF"])])},CRANE:{id:"CRANE",name:"Crane",desc:"Line: Water -> Log -> Water",points:[3,3],slots:2,icon:Ll,iconColor:"text-red-400",visual:{type:"line",sequence:[["WATER"],["WOOD"],["WATER"]]},check:(s,e)=>we(s)!=="WATER"?!1:Cn(e,s.q,s.r,[n=>ve(n,["WOOD"]),n=>we(n)==="WATER"])},OCTOPUS:{id:"OCTOPUS",name:"Octopus",desc:"Line: Water -> Stone -> Water",points:[3,3],slots:2,icon:H1,iconColor:"text-indigo-600",visual:{type:"line",sequence:[["WATER"],["STONE"],["WATER"]]},check:(s,e)=>we(s)!=="WATER"?!1:Cn(e,s.q,s.r,[n=>we(n)==="STONE",n=>we(n)==="WATER"])},MONKEY:{id:"MONKEY",name:"Monkey",desc:"Line: Small Tree -> Tall Tree",points:[5,6],slots:2,icon:F1,iconColor:"text-amber-500",visual:{type:"line",sequence:[["WOOD","LEAF"],["WOOD","WOOD","LEAF"]]},check:(s,e)=>ve(s,["WOOD","LEAF"])?Cn(e,s.q,s.r,[n=>ve(n,["WOOD","WOOD","LEAF"])]):!1},COUGAR:{id:"COUGAR",name:"Cougar",desc:"Line: Medium Rock -> High Peak",points:[5,6],slots:2,icon:Kc,iconColor:"text-red-600",visual:{type:"line",sequence:[["STONE","STONE"],["STONE","STONE","STONE"]]},check:(s,e)=>ve(s,["STONE","STONE"])?Cn(e,s.q,s.r,[n=>ve(n,["STONE","STONE","STONE"])]):!1},KINGFISHER:{id:"KINGFISHER",name:"Kingfisher",desc:"Line: Tree -> Water -> Tree",points:[5,5],slots:2,icon:Ll,iconColor:"text-cyan-500",visual:{type:"line",sequence:[["WOOD","LEAF"],["WATER"],["WOOD","LEAF"]]},check:(s,e)=>ve(s,["WOOD","LEAF"])?Cn(e,s.q,s.r,[n=>we(n)==="WATER",n=>ve(n,["WOOD","LEAF"])]):!1},ELEPHANT:{id:"ELEPHANT",name:"Elephant",desc:"Line: Field -> Tree -> Water",points:[4,5],slots:2,icon:jN,iconColor:"text-pink-400",visual:{type:"line",sequence:[["SAND"],["WOOD","LEAF"],["WATER"]]},check:(s,e)=>we(s)!=="SAND"?!1:Cn(e,s.q,s.r,[n=>ve(n,["WOOD","LEAF"]),n=>we(n)==="WATER"])},GIRAFFE:{id:"GIRAFFE",name:"Giraffe",desc:"Line: Tree -> Bush -> Building",points:[5,6],slots:2,icon:pC,iconColor:"text-yellow-600",visual:{type:"line",sequence:[["WOOD","LEAF"],["LEAF"],["BRICK","BRICK"]]},check:(s,e)=>ve(s,["WOOD","LEAF"])?Cn(e,s.q,s.r,[n=>ve(n,["LEAF"]),n=>ua(n)]):!1},TIGER:{id:"TIGER",name:"Tiger",desc:"Line: Bush -> Tall Tree -> Bush",points:[5,5],slots:2,icon:Kc,iconColor:"text-orange-500",visual:{type:"line",sequence:[["LEAF"],["WOOD","WOOD","LEAF"],["LEAF"]]},check:(s,e)=>ve(s,["LEAF"])?Cn(e,s.q,s.r,[n=>ve(n,["WOOD","WOOD","LEAF"]),n=>ve(n,["LEAF"])]):!1},PEACOCK:{id:"PEACOCK",name:"Peacock",desc:"Line: Tree -> Building -> Tree",points:[6,7],slots:2,icon:oC,iconColor:"text-purple-500",visual:{type:"line",sequence:[["WOOD","LEAF"],["BRICK","BRICK"],["WOOD","LEAF"]]},check:(s,e)=>ve(s,["WOOD","LEAF"])?Cn(e,s.q,s.r,[n=>ua(n),n=>ve(n,["WOOD","LEAF"])]):!1},GOAT:{id:"GOAT",name:"Goat",desc:"High Peak (3 Stone) next to another Stone",points:[4,5],slots:2,icon:Fm,iconColor:"text-orange-400",visual:{type:"adj",main:["STONE","STONE","STONE"],others:[["STONE"]]},check:(s,e)=>ve(s,["STONE","STONE","STONE"])&&Nn(e,s.q,s.r,n=>we(n)==="STONE")},HORSE:{id:"HORSE",name:"Horse",desc:"Field next to Field AND Tall Tree (2 Log+Leaf)",points:[4,5,5],slots:3,icon:zN,iconColor:"text-red-400",visual:{type:"adj",main:["SAND"],others:[["SAND"],["WOOD","WOOD","LEAF"]]},check:(s,e)=>{if(we(s)!=="SAND")return!1;const n=Kt(s.q,s.r).map(r=>e[`${r.q},${r.r}`]);return n.some(r=>we(r)==="SAND")&&n.some(r=>r&&ve(r,["WOOD","WOOD","LEAF"]))}}},Y1=(s,e)=>{if(!s||s.animal||s.stack.length>=3||e==="BRICK"&&s.stack.length>=2||s.stack.length>=2&&s.stack[s.stack.length-1]==="BRICK")return!1;const n=s.stack.length>0?s.stack[s.stack.length-1]:"EMPTY";return Zi[e].validOn.includes(n)},lI=s=>{let e={trees:0,mountains:0,fields:0,rivers:0,buildings:0};const n=new Set,r=Object.values(s);return r.forEach(c=>{const d=c.stack.length;if(d===0)return;const g=c.stack[d-1],_=c.stack[0];g!=="BRICK"&&g!=="WOOD"&&g==="LEAF"&&(d===1?e.trees+=1:_==="WOOD"&&(d===2?e.trees+=3:d===3&&(e.trees+=7)))}),r.forEach(c=>{const d=c.stack.length;c.stack[0]==="STONE"&&c.stack[d-1]==="STONE"&&Kt(c.q,c.r).some(y=>{const b=s[`${y.q},${y.r}`];return b&&b.stack.length>0&&b.stack[b.stack.length-1]==="STONE"})&&(d===1?e.mountains+=1:d===2?e.mountains+=3:d>=3&&(e.mountains+=7))}),n.clear(),r.forEach(c=>{if(c.stack[0]==="SAND"&&!n.has(`${c.q},${c.r}`)){let d=0,g=[c];for(n.add(`${c.q},${c.r}`);g.length>0;){const _=g.pop();d++,Kt(_.q,_.r).forEach(y=>{const b=s[`${y.q},${y.r}`],S=`${y.q},${y.r}`;b&&b.stack[0]==="SAND"&&!n.has(S)&&(n.add(S),g.push(b))})}d>=2&&(e.fields+=5)}}),n.clear(),r.forEach(c=>{if(c.stack[0]==="WATER"&&!n.has(`${c.q},${c.r}`)){let d=0,g=[c];for(n.add(`${c.q},${c.r}`);g.length>0;){const _=g.pop();d++,Kt(_.q,_.r).forEach(y=>{const b=s[`${y.q},${y.r}`],S=`${y.q},${y.r}`;b&&b.stack[0]==="WATER"&&!n.has(S)&&(n.add(S),g.push(b))})}d===2?e.rivers+=2:d===3?e.rivers+=5:d===4?e.rivers+=8:d===5?e.rivers+=11:d===6?e.rivers+=15:d>6&&(e.rivers+=15+(d-6)*4)}}),r.forEach(c=>{if(ua(c)){const d=Kt(c.q,c.r),g=new Set;d.forEach(_=>{const y=s[`${_.q},${_.r}`];if(y&&y.stack.length>0){const b=y.stack[y.stack.length-1];b!=="BRICK"&&g.add(b)}}),g.size>=3&&(e.buildings+=5)}}),{total:Object.values(e).reduce((c,d)=>c+d,0),breakdown:e}},pm=()=>{const s={};return[{r:-2,qStart:-1,qEnd:3},{r:-1,qStart:-1,qEnd:2},{r:0,qStart:-2,qEnd:2},{r:1,qStart:-2,qEnd:1},{r:2,qStart:-3,qEnd:1}].forEach(({r:n,qStart:r,qEnd:l})=>{for(let c=r;c<=l;c++)s[`${c},${n}`]={q:c,r:n,stack:[],animal:null}}),s},Q1=()=>{const s={WOOD:21,LEAF:19,STONE:23,WATER:23,SAND:19,BRICK:15};let e=[];Object.entries(s).forEach(([n,r])=>{for(let l=0;l<r;l++)e.push(n)});for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},$1=()=>{let s=Object.keys(Ki);for(let e=s.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[s[e],s[n]]=[s[n],s[e]]}return s},W1=(s,e)=>{let n=[...s],r=[...e];for(;n.length<5&&r.length>=3;)n.push({id:Math.random().toString(36).substr(2,9),tokens:[r.pop(),r.pop(),r.pop()].filter(Boolean)});return{market:n,bag:r}},X1=(s,e)=>{let n=[...s],r=[...e];for(;n.length<5&&r.length>0;){const l=r.pop();n.push({id:Math.random().toString(36).substr(2,9),type:l})}return{market:n,deck:r}},$c=({tokens:s,scale:e=1,spacing:n=8})=>E.jsx("div",{className:"relative w-8 h-12 mx-auto",style:{transform:`scale(${e})`,height:`${s.length*n+24}px`},children:s.map((r,l)=>E.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 w-6 h-6 rounded-full border shadow-sm ${Zi[r].color} ${Zi[r].border} flex items-center justify-center`,style:{bottom:`${l*n}px`,zIndex:l},children:l===s.length-1&&(()=>{const c=Zi[r].icon;return E.jsx(c,{size:12,className:"text-white/70"})})()},l))}),Yl=({visual:s})=>s?s.type==="stack"?E.jsx($c,{tokens:s.tokens,spacing:5}):s.type==="adj"?E.jsxs("div",{className:"flex items-end justify-center gap-2",children:[E.jsxs("div",{className:"relative z-10 border-2 border-white/50 rounded-xl p-1 bg-black/20",children:[E.jsx($c,{tokens:Array.isArray(s.main)?s.main:[s.main],scale:.9,spacing:5}),E.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-white rounded-full flex items-center justify-center border border-slate-500 shadow",children:E.jsx("div",{className:"w-1 h-1 bg-slate-900 rounded-full"})})]}),E.jsx("div",{className:"flex flex-col gap-1",children:s.others.map((e,n)=>E.jsx("div",{className:"opacity-80 scale-75 origin-bottom",children:E.jsx($c,{tokens:Array.isArray(e)?e:[e],scale:.8,spacing:5})},n))})]}):s.type==="line"?E.jsx("div",{className:"flex items-center justify-center gap-1 py-4",children:s.sequence.map((e,n)=>E.jsxs(s2.Fragment,{children:[n>0&&E.jsx("div",{className:"text-slate-500 opacity-50",children:E.jsx(PC,{size:10})}),E.jsxs("div",{className:`relative ${n===0?"z-10 scale-100":"opacity-80 scale-90"}`,children:[n===0&&E.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full flex items-center justify-center border border-slate-500 shadow z-20",children:E.jsx("div",{className:"w-1 h-1 bg-slate-900 rounded-full"})}),E.jsx($c,{tokens:Array.isArray(e)?e:[e],scale:.7,spacing:5})]})]},n))}):null:null,gm=()=>E.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[E.jsx(iu,{size:12,className:"text-emerald-400"}),E.jsx("span",{className:"text-[10px] font-black tracking-widest text-emerald-400 uppercase",children:"EQUILIBRIUM"})]}),Z1=()=>E.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-40 mt-auto pb-2 pt-2 relative z-10",children:[E.jsx(iu,{size:20,className:"text-emerald-400"}),E.jsx("span",{className:"text-[20px] font-black tracking-widest text-emerald-400 uppercase",children:"EQUILIBRIUM"})]}),uI=({q:s,r:e,stack:n,animal:r,onClick:l,ghostToken:c,isPlaceable:d,ghostAnimal:g,isValidTarget:_})=>{const b=44*(Math.sqrt(3)*s+Math.sqrt(3)/2*e),S=44*(3/2*e);return E.jsxs("div",{onClick:()=>l&&l(s,e),className:"absolute flex items-center justify-center transition-all duration-300",style:{left:`calc(50% + ${b}px)`,top:`calc(50% + ${S}px)`,width:`${44*1.8}px`,height:"88px",transform:"translate(-50%, -50%)",zIndex:10+e,cursor:d||g?"pointer":"default"},children:[E.jsx("div",{className:`w-full h-full absolute transition-all duration-300 ${_?"bg-emerald-500/60 hover:bg-emerald-400/70 hover:scale-110 shadow-[0_0_30px_rgba(16,185,129,0.6)] z-10":d||g?"bg-slate-700/80 hover:bg-slate-600 hover:scale-105 shadow-[0_0_15px_rgba(52,211,153,0.3)]":"bg-slate-800/90"}`,style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)",zIndex:0}}),E.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 pointer-events-none z-10 overflow-visible",style:{width:"100%",height:"100%"},children:E.jsx("polygon",{points:"50 0, 100 25, 100 75, 50 100, 0 75, 0 25",fill:"none",stroke:_?"#10b981":"rgba(255,255,255,0.4)",strokeWidth:_?"4":"1.5",strokeDasharray:"4 2",className:_?"animate-pulse":""})}),E.jsxs("div",{className:"relative z-20 flex items-center justify-center w-full h-full pb-2 pointer-events-none",children:[n.map((O,H)=>{const J=Zi[O];return E.jsx("div",{className:`absolute w-10 h-10 rounded-full border-2 shadow-xl flex items-center justify-center ${J.color} ${J.border}`,style:{transform:`translateY(-${H*8}px) scale(${1-H*.02})`,zIndex:H},children:H===n.length-1&&E.jsx(J.icon,{size:16,className:"text-white/80"})},H)}),d&&c&&E.jsx("div",{className:`absolute w-10 h-10 rounded-full border-2 border-dashed opacity-60 flex items-center justify-center animate-pulse ${Zi[c].color} border-white`,style:{transform:`translateY(-${n.length*8}px)`,zIndex:10},children:E.jsx(CN,{size:16,className:"text-white"})}),_&&!r&&E.jsx("div",{className:"absolute -top-8 w-10 h-10 rounded-full border-4 border-emerald-400 bg-emerald-900 shadow-xl flex items-center justify-center z-50 animate-bounce",children:E.jsx(Hm,{size:24,className:"text-emerald-400"})}),g&&!r&&E.jsx("div",{className:"absolute -top-8 w-8 h-8 rounded-full border-2 border-dashed border-white shadow-xl flex items-center justify-center z-50 animate-pulse opacity-70",children:(()=>{const O=Ki[g];if(!O)return null;const H=O.icon;return E.jsx(H,{size:16,className:O.iconColor,fill:"currentColor",fillOpacity:.2})})()}),r&&E.jsx("div",{className:"absolute w-8 h-8 rounded-full bg-white border-2 border-emerald-500 shadow-[0_0_10px_rgba(0,0,0,0.5)] flex items-center justify-center z-50 animate-in zoom-in duration-300",style:{transform:`translateY(-${n.length*8+6}px)`},children:(()=>{const O=Ki[r];if(!O)return E.jsx("div",{className:"text-black text-[8px]",children:"?"});const H=O.icon;return E.jsx(H,{size:18,className:O.iconColor,fill:"currentColor",fillOpacity:.2})})()})]})]})},cI=({type:s,message:e,subtext:n,icon:r})=>E.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center pointer-events-none animate-in fade-in zoom-in duration-300",children:E.jsxs("div",{className:`flex flex-col items-center justify-center p-8 md:p-12 rounded-3xl border-4 shadow-2xl backdrop-blur-xl max-w-sm md:max-w-xl mx-4 text-center ${s==="success"?"bg-emerald-900/90 border-emerald-500 text-emerald-100":s==="failure"?"bg-red-900/90 border-red-500 text-red-100":s==="warning"?"bg-amber-900/90 border-amber-500 text-amber-100":"bg-blue-900/90 border-blue-500 text-blue-100"}`,children:[r&&E.jsx("div",{className:"mb-4 p-4 bg-black/20 rounded-full",children:E.jsx(r,{size:64,className:"animate-bounce"})}),E.jsx("h2",{className:"text-3xl md:text-5xl font-black uppercase tracking-widest drop-shadow-md mb-2",children:e}),n&&E.jsx("p",{className:"text-lg md:text-xl font-bold opacity-90 tracking-wide",children:n})]})}),ym=({onClose:s})=>E.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-950/95 backdrop-blur-md flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-slate-900 border border-emerald-900/50 w-full max-w-3xl rounded-3xl shadow-2xl p-6 relative max-h-[90vh] overflow-y-auto custom-scrollbar",children:[E.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:E.jsx(Vp,{size:24})}),E.jsx("h2",{className:"text-3xl font-black text-center mb-6 text-emerald-400",children:"Architect's Handbook"}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("section",{children:[E.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center gap-2",children:[E.jsx(iu,{className:"text-emerald-500"})," Landscape Scoring"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-300",children:[E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-emerald-900/30",children:[E.jsx("strong",{className:"text-emerald-400 block mb-1",children:"Trees (Wood + Foliage)"}),E.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-1",children:[E.jsx("li",{children:"1 Leaf alone (Bush): 1 Pt"}),E.jsx("li",{children:"2 High (1 Log + 1 Leaf): 3 Pts"}),E.jsx("li",{children:"3 High (2 Log + 2 Leaf): 7 Pts"})]})]}),E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-emerald-900/30",children:[E.jsx("strong",{className:"text-slate-400 block mb-1",children:"Mountains (Stone)"}),E.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-1",children:[E.jsx("li",{children:"Score = Height of stack (1=1pt, 2=3pts, 3=7pts)."}),E.jsx("li",{children:"Only scores if adjacent to at least one other Mountain stack."})]})]}),E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-emerald-900/30",children:[E.jsx("strong",{className:"text-yellow-400 block mb-1",children:"Fields (Sand)"}),E.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-1",children:[E.jsx("li",{children:"5 Pts for every distinct group of 2+ connected Sand."}),E.jsx("li",{children:"Cannot stack tokens on Sand."})]})]}),E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-emerald-900/30",children:[E.jsx("strong",{className:"text-cyan-400 block mb-1",children:"Rivers (Water)"}),E.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-1",children:[E.jsx("li",{children:"Chain scoring:"}),E.jsx("li",{children:"2=2pts, 3=5pts, 4=8pts, 5=11pts, 6+ = +4pts for each."})]})]}),E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl md:col-span-2 border border-emerald-900/30",children:[E.jsx("strong",{className:"text-red-400 block mb-1",children:"Buildings (Brick)"}),E.jsx("ul",{className:"list-disc pl-4 text-xs space-y-1",children:E.jsx("li",{children:"5 Pts if surrounded by 3+ distinct terrain types (colors)."})})]})]})]}),E.jsxs("section",{children:[E.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center gap-2",children:[E.jsx(oh,{className:"text-orange-500"})," Animal Scoring"]}),E.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Draft animals to your hand. When you create their pattern on the board, select the animal to place it!"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.values(Ki).map(e=>{const n=e.icon;return E.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl border border-emerald-900/30 flex flex-col items-center gap-2 text-xs relative overflow-hidden",children:[E.jsx("div",{className:"bg-black/30 p-2 rounded-full mb-1",children:E.jsx(n,{size:20,className:e.iconColor})}),E.jsx("div",{className:"scale-75 mb-2",children:E.jsx(Yl,{visual:e.visual})}),E.jsxs("div",{className:"text-center z-10",children:[E.jsx("div",{className:"font-bold text-white text-sm",children:e.name}),E.jsx("div",{className:"text-[10px] text-slate-400 leading-tight mb-2 h-8 overflow-hidden line-clamp-2",children:e.desc}),E.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold bg-black/20 px-2 py-1 rounded-full inline-block",children:[e.points.join(" / ")," Pts"]})]})]},e.id)})})]})]})]})}),hI=({gameState:s,onClose:e})=>E.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-950/95 backdrop-blur-md flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-slate-900 border border-emerald-900/50 w-full max-w-lg rounded-3xl shadow-2xl p-6 relative",children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors",children:E.jsx(Vp,{size:24})}),E.jsxs("h2",{className:"text-2xl font-black text-center mb-6 text-emerald-400 flex items-center justify-center gap-2",children:[E.jsx(Tb,{})," Live Scores"]}),E.jsx("div",{className:"space-y-4",children:s.players.map(n=>{const r=n.score||0,l=n.landscapeScore||0,c=(n.penalties||0)*2,d=r+l-c;return E.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[E.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2 mb-2",children:[E.jsx("span",{className:"font-bold text-lg text-white",children:n.name}),E.jsx("span",{className:"text-2xl font-black text-yellow-500",children:d})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-slate-400",children:[E.jsxs("div",{className:"flex justify-between text-fuchsia-300",children:[E.jsx("span",{children:"Animals:"})," ",E.jsx("span",{className:"text-fuchsia-500 font-bold",children:r})]}),E.jsxs("div",{className:"flex justify-between text-green-300",children:[E.jsx("span",{children:"Trees:"})," ",E.jsx("span",{className:"text-green-500 font-bold",children:n.landscapeScoreBreakdown?.trees||0})]}),E.jsxs("div",{className:"flex justify-between text-slate-300",children:[E.jsx("span",{children:"Mountains:"})," ",E.jsx("span",{className:"text-slate-500 font-bold",children:n.landscapeScoreBreakdown?.mountains||0})]}),E.jsxs("div",{className:"flex justify-between text-yellow-300",children:[E.jsx("span",{children:"Fields:"})," ",E.jsx("span",{className:"text-yellow-500 font-bold",children:n.landscapeScoreBreakdown?.fields||0})]}),E.jsxs("div",{className:"flex justify-between text-blue-300",children:[E.jsx("span",{children:"Rivers:"})," ",E.jsx("span",{className:"text-blue-500 font-bold",children:n.landscapeScoreBreakdown?.rivers||0})]}),E.jsxs("div",{className:"flex justify-between text-red-300",children:[E.jsx("span",{children:"Buildings:"})," ",E.jsx("span",{className:"text-red-500 font-bold",children:n.landscapeScoreBreakdown?.buildings||0})]}),c>0&&E.jsxs("div",{className:"flex justify-between text-red-400 font-bold col-span-2 border-t border-slate-700 pt-1 mt-1",children:[E.jsx("span",{children:"Penalties:"})," ",E.jsxs("span",{children:["-",c]})]})]})]},n.id)})})]})}),fI=({animal:s,onClose:e})=>E.jsx("div",{className:"fixed inset-0 z-[210] bg-black/80 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:e,children:E.jsxs("div",{className:"bg-slate-900 border-2 border-slate-700 p-6 rounded-2xl max-w-sm w-full text-center shadow-2xl relative",onClick:n=>n.stopPropagation(),children:[E.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-800 p-4 rounded-full border-4 border-slate-900",children:E.jsx(s.icon,{size:48,className:s.iconColor})}),E.jsx("h3",{className:"text-2xl font-black text-white mt-8 mb-2 uppercase",children:s.name}),E.jsxs("div",{className:"text-yellow-500 font-bold text-lg mb-4",children:["+",s.points[0]," Pts per placement"]}),E.jsx("div",{className:"flex justify-center mb-6 bg-black/20 p-4 rounded-xl",children:E.jsx(Yl,{visual:s.visual})}),E.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 mb-4",children:E.jsx("p",{className:"text-slate-300 text-sm",children:s.desc})}),E.jsx("div",{className:"flex justify-center gap-1 mb-4",children:Array.from({length:s.slots}).map((n,r)=>E.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-700 border border-slate-600"},r))}),E.jsx("button",{onClick:e,className:"bg-slate-700 hover:bg-slate-600 w-full py-3 rounded-xl font-bold",children:"Close"})]})});function dI(){const[s,e]=We.useState(null),[n,r]=We.useState("menu"),[l,c]=We.useState(""),[d,g]=We.useState(""),[_,y]=We.useState(""),[b,S]=We.useState(null),[O,H]=We.useState(""),[J,se]=We.useState(!1),[re,be]=We.useState(!1),[Ve,Ne]=We.useState(!1),[rt,Et]=We.useState(!1),[qe,N]=We.useState(!1),[x,C]=We.useState(!1),[M,I]=We.useState(!1),[L,w]=We.useState(null),[ct,bt]=We.useState(null),[F,ne]=We.useState(null),[me,Qe]=We.useState(null),[Ie,D]=We.useState(null),[G,ie]=We.useState(null),oe=We.useRef(null),[Te,Oe]=We.useState(null),De=We.useRef(null),Tt=ee=>{De.current&&clearTimeout(De.current),De.current=setTimeout(()=>{Oe(ee)},500)},nt=()=>{De.current&&clearTimeout(De.current),De.current=null,Oe(null)},xi=()=>{De.current&&clearTimeout(De.current),De.current=null},Ds=()=>{if(!Te)return null;const ee=Ki[Te.type];if(!ee)return null;const Z=Te.slotsFilled||0,le=Te.maxSlots||ee.slots,ae=Z>=le;return E.jsx("div",{className:"fixed inset-0 z-[9999] pointer-events-none flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:E.jsxs("div",{className:"relative w-64 h-80 bg-slate-900 border-4 rounded-3xl flex flex-col shadow-2xl overflow-hidden scale-110 md:scale-125 transition-transform border-emerald-500/50",children:[E.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-white/10 bg-black/40",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(ee.icon,{size:24,className:ee.iconColor}),E.jsx("span",{className:"text-lg font-bold text-white tracking-wide",children:ee.name})]}),E.jsxs("span",{className:"text-xl font-black text-yellow-500 drop-shadow-md",children:["+",ee.points.join("/")]})]}),E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-gradient-to-b from-slate-800 to-slate-950 p-4",children:[E.jsx("div",{className:"scale-150 origin-center mb-6",children:E.jsx(Yl,{visual:ee.visual})}),E.jsx("p",{className:"text-center text-slate-300 text-sm font-medium px-4 leading-snug",children:ee.desc})]}),E.jsxs("div",{className:"p-4 bg-black/20 border-t border-white/5",children:[E.jsx("div",{className:"flex gap-2 justify-center",children:Array.from({length:le}).map((xe,X)=>E.jsx("div",{className:`h-3 w-full rounded-full border-2 ${X<Z?"bg-emerald-500 border-emerald-400 shadow-[0_0_10px_rgba(16,185,129,0.6)]":"bg-slate-800 border-slate-600"}`},X))}),E.jsx("div",{className:"text-center mt-2 text-xs text-slate-500 uppercase font-bold tracking-widest",children:ae?"Completed":"In Progress"})]})]})})};We.useEffect(()=>{const ee=localStorage.getItem("equilibrium_roomId");ee&&y(ee)},[]),We.useEffect(()=>{(async()=>typeof __initial_auth_token<"u"&&__initial_auth_token?await jS(mm,__initial_auth_token):await DS(mm))();const Z=PS(mm,le=>{if(e(le),le){const ae=localStorage.getItem("gameHub_playerName");ae&&c(ae),bt(le.uid)}});return()=>Z()},[]),We.useEffect(()=>{const ee=L1(yn(_n,"game_hub_settings","config"),Z=>{Z.exists()&&Z.data()[aI]?.maintenance?be(!0):be(!1)},Z=>console.log("Config Read Error (Safe to ignore):",Z));return()=>ee()},[]),We.useEffect(()=>{if(!_||!s)return;const ee=yn(_n,"artifacts",Rn,"public","data","rooms",_),Z=L1(ee,le=>{if(le.exists()){const ae=le.data();if(!ae.players.some(xe=>xe.id===s.uid)){y(""),localStorage.removeItem("equilibrium_roomId"),r("menu"),H("You were removed from the world.");return}S(ae),ae.status==="playing"||ae.status==="finished"?r("game"):ae.status==="lobby"&&r("lobby")}else r("menu"),y(""),localStorage.removeItem("equilibrium_roomId"),H("Voyage ended.")},le=>{console.error(le),H("Connection lost.")});return()=>Z()},[_,s]),We.useEffect(()=>{if(!b?.logs||b.logs.length===0)return;const ee=b.logs[b.logs.length-1];if(oe.current===null){oe.current=ee.id;return}ee.id<=oe.current||(oe.current=ee.id,ee.type==="success"?(w({type:"success",message:"HARMONY!",subtext:ee.text,icon:fm}),setTimeout(()=>w(null),2500)):ee.type==="warning"?(w({type:"warning",message:"ATTENTION",subtext:ee.text,icon:dm}),setTimeout(()=>w(null),2500)):ee.type==="failure"&&(w({type:"failure",message:"PENALTY",subtext:ee.text,icon:dm}),setTimeout(()=>w(null),2500)))},[b?.logs]);const ks=async()=>{if(!l)return H("Enter Name");localStorage.setItem("gameHub_playerName",l),se(!0);const ee="123456789ABCDEFGHIJKLMNPQRSTUVWXYZ";let Z="";for(let pe=0;pe<6;pe++)Z+=ee.charAt(Math.floor(Math.random()*ee.length));const le=Q1(),ae=$1(),{market:xe,bag:X}=W1([],le),_e=X1([],ae),fe={roomId:Z,hostId:s.uid,status:"lobby",players:[{id:s.uid,name:l,score:0,penalties:0,landscapeScore:0,landscapeScoreBreakdown:{trees:0,mountains:0,fields:0,rivers:0,buildings:0},board:pm(),holding:[],animals:[],ready:!0,hasDraftedTokens:!1,hasDraftedAnimal:!1}],market:xe,bag:X,animalMarket:_e.market,animalDeck:_e.deck,turnIndex:0,startPlayerIndex:0,isLastRound:!1,turnPhase:"PLAY",logs:[],winnerId:null};try{await bN(yn(_n,"artifacts",Rn,"public","data","rooms",Z),fe),y(Z),localStorage.setItem("equilibrium_roomId",Z),bt(s.uid)}catch(pe){console.error(pe),H("Failed to create world.")}se(!1)},Ms=async()=>{if(!d||!l)return H("Enter details");localStorage.setItem("gameHub_playerName",l),se(!0);try{const ee=d.toUpperCase().trim(),Z=yn(_n,"artifacts",Rn,"public","data","rooms",ee),le=await EN(Z);if(le.exists()&&le.data().status==="lobby"){const ae=le.data();if(!ae.players.some(xe=>xe.id===s.uid)){if(ae.players.length>=4){H("World is full."),se(!1);return}const xe=[...ae.players,{id:s.uid,name:l,score:0,penalties:0,landscapeScore:0,landscapeScoreBreakdown:{trees:0,mountains:0,fields:0,rivers:0,buildings:0},board:pm(),holding:[],animals:[],hasDraftedTokens:!1,hasDraftedAnimal:!1}];await ai(Z,{players:xe})}y(ee),localStorage.setItem("equilibrium_roomId",ee),bt(s.uid)}else H("Room not found or in progress")}catch(ee){H(ee.message)}se(!1)},Fn=async()=>{const ee=b.players.length,Z=Math.floor(Math.random()*ee);b.players[Z].name,await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{status:"playing",turnIndex:Z,startPlayerIndex:Z,isLastRound:!1,logs:oa({text:"The ecosystem awakens.",type:"neutral",id:Date.now()})})},Vs=async()=>{if(_){try{const ee=yn(_n,"artifacts",Rn,"public","data","rooms",_);if(b.hostId===s.uid)await TN(ee);else{const Z=b.players.filter(le=>le.id!==s.uid);await ai(ee,{players:Z})}}catch{console.log("Room gone")}localStorage.removeItem("equilibrium_roomId"),y(""),r("menu"),I(!1),S(null)}},ts=async ee=>{if(!(!b||b.hostId!==s.uid))try{const Z=b.players.filter(le=>le.id!==ee);await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{players:Z,logs:oa({text:"A player was removed from the world.",type:"warning",id:Date.now()})})}catch(Z){console.error("Error kicking player:",Z)}},Ls=async()=>{if(b.hostId!==s.uid)return;const ee=Q1(),Z=$1(),{market:le,bag:ae}=W1([],ee),xe=X1([],Z),X=b.players.map(_e=>({..._e,score:0,penalties:0,landscapeScore:0,landscapeScoreBreakdown:{trees:0,mountains:0,fields:0,rivers:0,buildings:0},board:pm(),holding:[],animals:[],ready:!1,hasDraftedTokens:!1,hasDraftedAnimal:!1}));await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{status:"lobby",players:X,market:le,bag:ae,animalMarket:xe.market,animalDeck:xe.deck,logs:[],winnerId:null,turnIndex:0,turnPhase:"PLAY"}),I(!1)},ns=async ee=>{const Z=F===ee?null:ee;if(ne(Z),!b||!s)return;const le=b.players.findIndex(xe=>xe.id===s.uid);if(le===-1)return;const ae=[...b.players];ae[le].activePalette=Z;try{await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{players:ae})}catch(xe){console.error("Error syncing palette state:",xe)}},Rt=async ee=>{const Z=b.players.findIndex(Le=>Le.id===s.uid);if(b.turnIndex!==Z)return;const le=[...b.players],ae=le[Z];if(ae.hasDraftedTokens)return;let xe=[...b.market],X=[...b.bag],_e=b.isLastRound,fe=[];if(ae.holding=xe[ee].tokens,ae.hasDraftedTokens=!0,ae.activePalette=null,xe.splice(ee,1),X.length>=3){const Le={id:Math.random().toString(36).substr(2,9),tokens:[X.pop(),X.pop(),X.pop()].filter(Boolean)};xe.push(Le)}else _e||(_e=!0,fe.push({text:"The Bag is empty! Finishing the round...",type:"warning",id:Date.now()}));fe.push({text:`${ae.name} drafted tokens.`,type:"neutral",id:Date.now()+1});const pe=b.logs?[...b.logs,...fe]:fe;await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{players:le,market:xe,bag:X,isLastRound:_e,logs:pe}),ne(null)},It=async ee=>{const Z=b.players.findIndex(Le=>Le.id===s.uid);if(b.turnIndex!==Z)return;const le=[...b.players],ae=le[Z];if(ae.hasDraftedAnimal||ae.animals.filter(Le=>Le.slotsFilled<Le.maxSlots).length>=4)return;let X=[...b.animalMarket],_e=[...b.animalDeck];const fe=X[ee],pe=Ki[fe.type];if(ae.animals.push({...fe,slotsFilled:0,maxSlots:pe.slots}),ae.hasDraftedAnimal=!0,ae.activePalette=null,X.splice(ee,1),_e.length>0){const Le={id:Math.random().toString(36).substr(2,9),type:_e.pop()};X.push(Le)}await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{players:le,animalMarket:X,animalDeck:_e,logs:oa({text:`${ae.name} adopted a ${pe.name}.`,type:"neutral",id:Date.now()})}),ne(null)},wi=async(ee,Z)=>{try{const le=b.players.findIndex(_e=>_e.id===s.uid);if(b.turnIndex!==le)return;const ae=[...b.players],xe=ae[le],X={players:ae};if(Ie!==null&&xe.holding[Ie]){const _e=`${ee},${Z}`,fe=xe.board[_e],pe=xe.holding[Ie];if(!Y1(fe,pe))return;fe.stack.push(pe),xe.holding.splice(Ie,1),D(null);const Le=lI(xe.board);xe.landscapeScore=Le.total,xe.landscapeScoreBreakdown=Le.breakdown,!Object.values(xe.board).some(Dn=>Dn.stack.length===0)&&!b.isLastRound&&(X.isLastRound=!0,X.logs||(X.logs=[]),X.logs.push({text:`${xe.name}'s world is full! Finishing the round...`,type:"warning",id:Date.now()})),await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),X);return}if(G!==null&&xe.animals[G]){const _e=xe.animals[G],fe=Ki[_e.type];if(!fe){console.error("Animal definition missing for type:",_e.type);return}const pe=xe.board[`${ee},${Z}`];if(!pe.animal&&_e.slotsFilled<_e.maxSlots&&fe.check(pe,xe.board)){pe.animal=_e.type;const Le=fe.points[_e.slotsFilled];_e.slotsFilled+=1,xe.score+=Le,ie(null),X.logs||(X.logs=[]),X.logs.push({text:`${xe.name} placed a ${fe.name} (+${Le})!`,type:"success",id:Date.now()}),await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),X)}}}catch(le){console.error("Placement error:",le),H("Something went wrong with placement. Try refreshing.")}},ko=async()=>{const ee=b.players.findIndex(ae=>ae.id===s.uid);if(b.turnIndex!==ee)return;const Z=[...b.players],le=Z[ee];Ie===null||!le.holding[Ie]||(le.holding.splice(Ie,1),le.penalties=(le.penalties||0)+1,D(null),await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),{players:Z,logs:oa({text:`${le.name} discarded a token (-2 pts).`,type:"failure",id:Date.now()})}))},va=async()=>{const ee=b.players.findIndex(X=>X.id===s.uid);if(b.turnIndex!==ee)return;const Z=[...b.players],le=Z[ee];if(le.holding.length>0){w({type:"warning",message:"Place Tokens",subtext:"You must place or discard all tokens."}),setTimeout(()=>w(null),2e3);return}if(!le.hasDraftedTokens&&b.market.length>0){w({type:"warning",message:"Draft Tokens",subtext:"You must take tokens from the market."}),setTimeout(()=>w(null),2e3);return}le.hasDraftedTokens=!1,le.hasDraftedAnimal=!1;const ae={players:Z},xe=(b.turnIndex+1)%b.players.length;b.market.length===0&&b.bag.length===0?(ae.status="finished",ae.logs=oa({text:"Market exhausted. Game Over!",type:"warning",id:Date.now()})):b.isLastRound&&xe===b.startPlayerIndex?(ae.status="finished",ae.logs=oa({text:"Round complete. Game Over!",type:"neutral",id:Date.now()})):(ae.turnIndex=xe,ae.logs=oa({text:`Turn passed to ${b.players[xe].name}.`,type:"neutral",id:Date.now()})),await ai(yn(_n,"artifacts",Rn,"public","data","rooms",_),ae)},en=()=>{const ee=b.roomId,Z=()=>{Ne(!0),setTimeout(()=>Ne(!1),2e3),triggerFeedback&&triggerFeedback("neutral","COPIED!","",Hm)};try{navigator.clipboard.writeText(ee),Z()}catch{const ae=document.createElement("textarea");ae.value=ee,document.body.appendChild(ae),ae.select(),document.execCommand("copy"),document.body.removeChild(ae),Z()}},Gn=()=>{const ee=b.players.findIndex(le=>le.id===s.uid);return b.turnIndex===ee&&ct!==s.uid?(w({type:"warning",message:"WRONG WORLD",subtext:"Return to your world to make moves.",icon:ah}),setTimeout(()=>w(null),2e3),!1):!0};if(re)return E.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center text-white p-4 text-center",children:[E.jsx(Z1,{}),E.jsxs("div",{className:"bg-orange-500/10 p-8 rounded-2xl border border-orange-500/30",children:[E.jsx(vC,{size:64,className:"text-orange-500 mx-auto mb-4 animate-bounce"}),E.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Under Maintenance"}),E.jsx("p",{className:"text-gray-400",children:"Meteor impact detected! We're busy repairing the ecosystem."})]}),E.jsx("div",{className:"h-8"}),E.jsx("a",{href:"https://rawfidkshuvo.github.io/gamehub/",children:E.jsx("div",{className:"flex items-center justify-center gap-3 mb-2",children:E.jsx("div",{className:"text-center pb-12 animate-pulse",children:E.jsxs("div",{className:"inline-flex items-center gap-3 px-8 py-4 bg-slate-900/50 rounded-full border border-indigo-500/20 text-indigo-300 font-bold tracking-widest text-sm uppercase backdrop-blur-sm",children:[E.jsx(fm,{size:16})," Visit Gamehub...Try our other releases..."," ",E.jsx(fm,{size:16})]})})})}),E.jsx(gm,{})]});if(!s)return E.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center text-emerald-500 animate-pulse",children:"Returning to the wild..."});if(_&&!b&&!O)return E.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center text-white p-4",children:[E.jsx(Yc,{}),E.jsx(Qc,{}),E.jsxs("div",{className:"bg-slate-900/80 backdrop-blur p-8 rounded-2xl border border-slate-700 shadow-2xl flex flex-col items-center gap-4 animate-in fade-in zoom-in duration-300",children:[E.jsx(wC,{size:48,className:"text-emerald-500 animate-spin"}),E.jsxs("div",{className:"text-center",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Reconnecting..."}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Resuming your session"})]})]})]});if(n==="menu")return E.jsxs("div",{className:"min-h-screen bg-slate-950 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans select-none",children:[E.jsx(Yc,{}),E.jsx(Qc,{}),qe&&E.jsx(ym,{onClose:()=>N(!1)}),E.jsxs("div",{className:"z-10 text-center mb-10 animate-in fade-in zoom-in duration-700",children:[E.jsx(iu,{size:64,className:"text-emerald-400 mx-auto mb-4 animate-spin-slow"}),E.jsx("h1",{className:"text-5xl md:text-7xl font-thin text-transparent bg-clip-text bg-gradient-to-b from-emerald-400 to-teal-600 tracking-tighter drop-shadow-md",children:"EQUILIBRIUM"}),E.jsx("p",{className:"text-emerald-200/40 tracking-[0.5em] uppercase mt-2 text-xs",children:"Build. Balance. Score."})]}),E.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-md border border-emerald-500/30 p-8 rounded-2xl w-full max-w-md shadow-2xl z-10 relative",children:[O&&E.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 text-red-200 p-3 mb-4 rounded text-center text-sm font-bold flex items-center justify-center gap-2",children:[E.jsx(dm,{size:16})," ",O]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{className:"w-full bg-black/50 border border-emerald-700 focus:border-emerald-500 p-4 rounded-xl text-white outline-none transition-all text-lg font-bold text-center",placeholder:"YOUR NAME",value:l,onChange:ee=>c(ee.target.value),maxLength:12}),E.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[E.jsxs("button",{onClick:ks,disabled:J,className:"bg-gradient-to-br from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 p-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-all active:scale-95 shadow-lg shadow-emerald-900/50",children:[E.jsx(sC,{size:24}),E.jsx("span",{children:"Create"})]}),E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("input",{className:"bg-black/50 border border-emerald-700 focus:border-emerald-500 p-2 rounded-xl text-white text-center uppercase font-mono font-bold tracking-widest outline-none h-12",placeholder:"CODE",value:d,onChange:ee=>g(ee.target.value),maxLength:6}),E.jsx("button",{onClick:Ms,disabled:J,className:"bg-slate-800 hover:bg-slate-700 p-2 rounded-xl font-bold text-slate-300 transition-all active:scale-95 h-full",children:"Penetrate"})]})]}),E.jsxs("button",{onClick:()=>N(!0),className:"w-full mt-4 text-emerald-400 hover:text-emerald-300 text-sm font-bold flex items-center justify-center gap-2 transition-colors py-2",children:[E.jsx(um,{size:16})," Architect's Guide"]})]})]}),E.jsxs("div",{className:"absolute bottom-4 text-slate-600 text-xs text-center",children:["Inspired by Harmonies. A tribute game.",E.jsx("br",{}),"Developed by ",E.jsx("strong",{children:"RAWFID K SHUVO"}),". Visit"," ",E.jsx("a",{href:"https://rawfidkshuvo.github.io/gamehub/",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-500 underline hover:text-emerald-600",children:"GAMEHUB"})," ","for more games."]})]});if(n==="lobby"&&b){const ee=b.hostId===s.uid;return E.jsxs("div",{className:"min-h-screen bg-slate-950 text-white flex flex-col items-center justify-center p-6 relative",children:[E.jsx(Yc,{}),E.jsx(Qc,{}),E.jsx(Z1,{}),qe&&E.jsx(ym,{onClose:()=>N(!1)}),E.jsxs("div",{className:"z-10 w-full max-w-lg bg-slate-900/90 backdrop-blur p-8 rounded-2xl border border-emerald-500/30 shadow-2xl animate-in slide-in-from-bottom-8",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-lg md:text-xl text-emerald-500 font-bold uppercase",children:"New World:"}),E.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[E.jsx("div",{className:"text-2xl md:text-3xl font-mono text-white font-black",children:_}),E.jsxs("div",{className:"relative",children:[E.jsx("button",{onClick:en,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",children:Ve?E.jsx(Hm,{size:16,className:"text-green-500"}):E.jsx(YN,{size:16})}),Ve&&E.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-emerald-500 text-black text-xs font-bold px-2 py-1 rounded shadow-lg animate-fade-in-up whitespace-nowrap",children:"Copied!"})]})]})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>N(!0),className:"p-2 hover:bg-slate-800 rounded text-slate-400 hover:text-white",children:E.jsx(um,{size:20})}),E.jsx("button",{onClick:()=>I(!0),className:"p-2 hover:bg-red-900/30 rounded text-red-400",children:E.jsx(U1,{size:20})})]})]}),E.jsxs("div",{className:"space-y-3 mb-8",children:[E.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:["Architects (",b.players.length,"/4)"]}),b.players.map(Z=>E.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-4 rounded-xl border border-slate-700",children:[E.jsxs("span",{className:"font-bold flex items-center gap-3 text-lg",children:[Z.name,Z.id===b.hostId&&E.jsx(Fm,{size:16,className:"text-yellow-500"})]}),b.hostId===s.uid&&Z.id!==s.uid&&E.jsx("button",{onClick:()=>ts(Z.id),className:"p-2 bg-red-900/20 hover:bg-red-900/50 text-red-500 rounded-lg transition-colors border border-red-900/30",title:"Kick Player",children:E.jsx(G1,{size:16})})]},Z.id)),Array.from({length:4-b.players.length}).map((Z,le)=>E.jsx("div",{className:"border-2 border-dashed border-slate-700 rounded-xl p-4 flex items-center justify-center text-slate-600 font-bold uppercase text-sm",children:"Empty Slot"},le))]}),ee&&E.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[E.jsx("button",{onClick:Fn,disabled:b.players.length<1,className:`
                  px-8 py-3 rounded-xl font-bold text-lg shadow-lg transition-all
                  ${b.players.length<1?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-emerald-500 text-slate-900 hover:bg-emerald-400 hover:scale-105 hover:shadow-emerald-500/20"}
                `,children:b.players.length<1?"Waiting for Architects...":"CREATE WORLD"}),b.players.length<1&&E.jsx("p",{className:"text-slate-600 text-xs uppercase tracking-widest font-bold",children:"Need 1+ player"})]}),!ee&&E.jsx("div",{className:"mt-8 text-center text-slate-500 text-sm font-bold uppercase tracking-widest animate-pulse",children:"Waiting for host to start..."})]}),M&&E.jsx("div",{className:"fixed inset-0 z-[200] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-xl max-w-xs w-full text-center",children:[E.jsx("h3",{className:"text-xl font-bold text-white mb-2 uppercase",children:"Leave World?"}),E.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:b.hostId===s.uid?"As Host, leaving ends the game for everyone.":"You will leave this session."}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>I(!1),className:"flex-1 bg-slate-800 py-2 rounded font-bold text-slate-300",children:"Stay"}),E.jsx("button",{onClick:Vs,className:"flex-1 bg-red-600 py-2 rounded font-bold text-white",children:"Leave"})]})]})}),E.jsx(gm,{})]})}if(n==="game"&&b){const ee=b.players.findIndex(X=>X.id===s.uid),Z=b.players[ee],le=b.turnIndex===ee,ae=b.players.find(X=>X.id===ct)||Z,xe=le&&Z.hasDraftedTokens&&Z.holding.length===0;return E.jsxs("div",{className:"fixed inset-0 bg-slate-950 text-white flex flex-col overflow-hidden font-sans select-none",children:[E.jsx(Yc,{}),E.jsx(Qc,{}),E.jsx(Ds,{}),L&&E.jsx(cI,{type:L.type,message:L.message,subtext:L.subtext,icon:L.icon}),qe&&E.jsx(ym,{onClose:()=>N(!1)}),x&&E.jsx(hI,{gameState:b,onClose:()=>C(!1)}),me&&E.jsx(fI,{animal:me,onClose:()=>Qe(null)}),E.jsxs("div",{className:"h-14 md:h-16 bg-slate-900 border-b border-emerald-900/30 flex items-center justify-between px-2 z-50 shrink-0 shadow-lg",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"w-10 h-10 bg-emerald-900/50 rounded-lg flex items-center justify-center border border-emerald-700",children:E.jsx(iu,{className:"text-emerald-400",size:20})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-bold text-sm tracking-wider text-emerald-100",children:"EQUILIBRIUM"}),E.jsx("div",{className:"text-[10px] text-emerald-400 font-mono uppercase",children:b.status==="finished"?"GAME OVER":`Turn: ${b.players[b.turnIndex].name}`})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>C(!0),className:"p-2 hover:bg-slate-800 rounded text-yellow-500 hover:text-white",children:E.jsx(Tb,{size:18})}),E.jsx("button",{onClick:()=>N(!0),className:"p-2 hover:bg-slate-800 rounded text-slate-400 hover:text-white",children:E.jsx(um,{size:18})}),E.jsx("button",{onClick:()=>Et(!rt),className:`p-2 rounded-full ${rt?"bg-emerald-900 text-emerald-400":"text-gray-400 hover:bg-gray-800"}`,children:E.jsx(TC,{size:18})}),E.jsx("button",{onClick:()=>I(!0),className:"p-2 hover:bg-red-900/30 rounded text-red-400",children:E.jsx(U1,{size:18})})]})]}),rt&&E.jsxs("div",{className:"fixed top-16 right-4 w-64 max-h-60 bg-slate-900/95 border border-slate-700 rounded-xl z-[155] overflow-y-auto p-2 shadow-2xl custom-scrollbar",children:[E.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 sticky top-0 bg-slate-900/95 py-2",children:"World History"}),E.jsx("div",{className:"space-y-2",children:b.logs.slice().reverse().map(X=>E.jsx("div",{className:`text-xs p-2 rounded border-l-2 ${X.type==="success"?"border-emerald-500 bg-emerald-900/10":X.type==="warning"?"border-amber-500 bg-amber-900/10":X.type==="failure"?"border-red-500 bg-red-900/10":"border-slate-500 bg-slate-800/30"}`,children:X.text},X.id))})]}),M&&E.jsx("div",{className:"fixed inset-0 z-[200] bg-black/80 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-xl max-w-xs w-full text-center",children:[E.jsx("h3",{className:"text-xl font-bold text-white mb-2 uppercase",children:"Leave World?"}),E.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:b.hostId===s.uid?"As Host, leaving ends the game for everyone.":"You will leave this session."}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>I(!1),className:"flex-1 bg-slate-800 py-2 rounded font-bold text-slate-300",children:"Stay"}),E.jsx("button",{onClick:Vs,className:"flex-1 bg-red-600 py-2 rounded font-bold text-white",children:"Leave"})]}),b.hostId===s.uid&&E.jsx("button",{onClick:Ls,className:"w-full bg-slate-700 hover:bg-slate-600 py-2 rounded font-bold text-emerald-400 mt-2 text-sm",children:"Return All to Lobby"})]})}),E.jsxs("div",{className:"flex-1 relative bg-transparent overflow-hidden flex flex-col items-center justify-center",children:[E.jsx("div",{className:"absolute top-2 md:top-4 left-0 right-0 z-10 grid grid-cols-4 gap-1 px-2 w-full max-w-2xl mx-auto pointer-events-auto",children:b.players.map((X,_e)=>{const fe=b.turnIndex===_e,pe=(X.score||0)+(X.landscapeScore||0)-(X.penalties||0)*2;return E.jsxs("button",{onClick:()=>bt(X.id),className:`
          relative overflow-visible
          flex flex-col items-center justify-center h-12 md:h-14 rounded-xl border-2 transition-all w-full
          ${ct===X.id?"bg-slate-800 border-emerald-500 shadow-lg scale-105 z-10":"bg-slate-900/80 border-slate-700 hover:bg-slate-800/80 text-slate-400"}
        `,children:[X.activePalette==="TOKENS"&&E.jsx("div",{className:"absolute -top-1 -right-1 bg-slate-900 rounded-full p-1 border border-cyan-500 shadow-lg z-20 animate-pulse",children:E.jsx(cm,{size:10,className:"text-cyan-400 fill-cyan-400/20"})}),X.activePalette==="ANIMALS"&&E.jsx("div",{className:"absolute -top-1 -right-1 bg-slate-900 rounded-full p-1 border border-orange-500 shadow-lg z-20 animate-pulse",children:E.jsx(oh,{size:10,className:"text-orange-400 fill-orange-400/20"})}),fe&&E.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 z-50 pointer-events-none",children:E.jsxs("div",{className:"flex flex-col items-center animate-bounce-slight",children:[E.jsxs("div",{className:"bg-emerald-500 text-slate-900 text-[8px] md:text-[9px] font-black px-2 py-0.5 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)] flex items-center gap-1 whitespace-nowrap",children:[E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-900 animate-pulse"}),"PLAYING"]}),E.jsx("div",{className:"w-0 h-0 border-l-[4px] border-l-transparent border-r-[4px] border-r-transparent border-t-[4px] border-t-emerald-500 -mt-[1px]"})]})}),E.jsx("span",{className:`text-[9px] md:text-[10px] font-bold uppercase truncate max-w-full px-1 ${fe?"text-emerald-400":""}`,children:X.name}),E.jsx("span",{className:"text-[10px] md:text-xs font-black text-yellow-500",children:pe})]},X.id)})}),ae.id!==s.uid?E.jsxs("div",{className:"absolute top-20 bg-red-800/80 px-4 py-1 rounded-full text-xs font-bold text-slate-300 flex items-center gap-2 z-10 backdrop-blur animate-pulse",children:[E.jsx(ah,{size:12})," ",ae.name,"'s World"]}):E.jsxs("div",{className:"absolute top-20 bg-green-800/80 px-4 py-1 rounded-full text-xs font-bold text-slate-300 flex items-center gap-2 z-10 backdrop-blur animate-pulse",children:[E.jsx(ah,{size:12})," Your World"]}),E.jsx("div",{className:"relative w-[340px] h-[300px] transition-transform -mt-20 md:-mt-24 transform scale-100 md:scale-125",children:Object.values(ae.board).map(X=>{let _e=!1;if(G!==null&&Z.animals[G]){const fe=Ki[Z.animals[G].type];fe&&!X.animal&&Z.animals[G].slotsFilled<Z.animals[G].maxSlots&&(_e=fe.check(X,ae.board))}return E.jsx(uI,{...X,isPlaceable:le&&ae.id===s.uid&&(Ie!==null&&Z.holding[Ie]&&Y1(X,Z.holding[Ie])||_e),ghostToken:Ie!==null?Z.holding[Ie]:null,ghostAnimal:G!==null?Z.animals[G].type:null,isValidTarget:_e,onClick:ae.id===s.uid?wi:void 0},`${X.q},${X.r}`)})}),F&&E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[60] h-44 bg-slate-900/95 border-t-2 border-emerald-500/50 backdrop-blur-xl flex flex-col animate-in slide-in-from-bottom-full duration-300 shadow-2xl",onClick:X=>X.stopPropagation(),children:[E.jsxs("div",{className:"flex justify-between items-center px-4 h-8 border-b border-white/10 bg-black/20 shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[F==="TOKENS"?E.jsx(cm,{className:"text-cyan-400",size:14}):E.jsx(oh,{className:"text-orange-400",size:14}),E.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-widest leading-none",children:["Draft ",F==="TOKENS"?"Tokens":"Animal"]})]}),E.jsxs("button",{onClick:()=>ns(F),className:"flex items-center gap-1 px-2 py-0.5 bg-slate-800 hover:bg-slate-700 rounded-full text-slate-300 hover:text-white transition-colors border border-slate-600 font-bold text-[10px]",children:[E.jsx("span",{children:"Close"}),E.jsx(Vp,{size:12})]})]}),E.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden px-4 no-scrollbar flex items-center bg-gradient-to-b from-transparent to-black/30",children:E.jsxs("div",{className:"flex gap-4 items-center min-w-max h-full justify-center",children:[F==="TOKENS"&&b.market.map((X,_e)=>E.jsxs("button",{onClick:()=>Rt(_e),disabled:!le||Z.hasDraftedTokens,className:"relative group h-32 w-14 shrink-0 rounded-full transition-all active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed",children:[E.jsxs("div",{className:"absolute inset-0 bg-slate-800 rounded-full border-4 border-slate-700 shadow-xl group-hover:border-cyan-500 group-hover:bg-slate-750 transition-colors flex flex-col items-center justify-evenly py-1",children:[E.jsx("div",{className:"absolute inset-x-2 top-2 bottom-2 bg-black/30 rounded-full border border-white/5"}),E.jsx("div",{className:"relative z-10 flex flex-col gap-1.5 h-full justify-center",children:X.tokens.map((fe,pe)=>{const Le=Zi[fe];return E.jsx("div",{className:`w-8 h-8 rounded-full border-2 shadow-lg flex items-center justify-center ${Le.color} ${Le.border}`,children:E.jsx(Le.icon,{size:14,className:"text-white/90"})},pe)})})]}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20",children:E.jsxs("div",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-3 rounded-xl shadow-lg border border-cyan-400 tracking-widest uppercase flex flex-col items-center leading-none gap-1",children:[E.jsx("span",{children:"G"}),E.jsx("span",{children:"E"}),E.jsx("span",{children:"T"})]})})]},X.id)),F==="ANIMALS"&&b.animalMarket.map((X,_e)=>{const fe=Ki[X.type],pe=le&&!Z.hasDraftedAnimal&&Z.animals.filter(Ze=>Ze.slotsFilled<Ze.maxSlots).length<4,Le=Object.values(Z.board).some(Ze=>!Ze.animal&&fe.check(Ze,Z.board));return E.jsxs("button",{onClick:()=>It(_e),onMouseDown:()=>Tt(X),onMouseUp:nt,onMouseLeave:nt,onTouchStart:()=>Tt(X),onTouchEnd:nt,onTouchMove:xi,disabled:!pe,className:`
          relative w-24 h-32 shrink-0 bg-slate-800 border-2 rounded-xl flex flex-col shadow-xl text-left overflow-hidden transition-all duration-300 group
          ${pe?"hover:-translate-y-1 cursor-pointer":"cursor-not-allowed"}
          ${Le?"border-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.5)] animate-pulse z-10":pe?"border-slate-600 hover:border-orange-500 hover:shadow-[0_5px_15px_rgba(249,115,22,0.2)]":"border-slate-800 opacity-60"}
        `,children:[E.jsxs("div",{className:"flex justify-between items-center px-2 py-1 border-b border-white/5 bg-black/20 shrink-0 h-7",children:[E.jsx("span",{className:"text-[10px] font-bold text-white truncate max-w-[50px]",children:fe.name}),E.jsxs("span",{className:"text-[10px] font-black text-yellow-500",children:["+",fe.points.join("/")]})]}),E.jsx("div",{className:"flex-1 flex flex-col items-center justify-center bg-gradient-to-b from-slate-800 to-slate-900",children:E.jsx("div",{className:"scale-75 origin-center",children:E.jsx(Yl,{visual:fe.visual})})}),pe&&E.jsx("div",{className:"absolute inset-0 bg-orange-500/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:E.jsx("div",{className:"bg-orange-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform",children:"ADOPT"})})]},X.id)}),F==="ANIMALS"&&b.animalMarket.length===0&&E.jsx("div",{className:"w-full text-center text-slate-500 font-bold text-xs italic pr-4",children:"Empty..."})]})})]}),b.status==="finished"&&E.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-center justify-center backdrop-blur-sm",children:E.jsxs("div",{className:"bg-slate-900 p-8 rounded-2xl border-2 border-yellow-500 text-center shadow-2xl animate-in zoom-in max-w-lg w-full m-4",children:[E.jsx(eI,{size:64,className:"text-yellow-400 mx-auto mb-4 animate-bounce"}),(()=>{const X=Je=>Je.animals.reduce((ui,$t)=>ui+$t.slotsFilled,0),_e=Je=>(Je.score||0)+(Je.landscapeScore||0)-(Je.penalties||0)*2,fe=[...b.players].sort((Je,ui)=>{const $t=_e(Je),Kn=_e(ui);if(Kn!==$t)return Kn-$t;const ht=X(Je);return X(ui)-ht}),pe=fe[0],Le=_e(pe),Ze=X(pe),Dn=fe.filter(Je=>_e(Je)===Le&&X(Je)===Ze);return E.jsxs(E.Fragment,{children:[E.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-amber-500 uppercase mb-2",children:Dn.map(Je=>Je.name).join(" & ")}),E.jsx("p",{className:"text-emerald-400 font-bold tracking-widest text-sm uppercase mb-6",children:"Rescued the World!"}),E.jsx("div",{className:"space-y-3 mb-6 max-h-[50vh] overflow-y-auto custom-scrollbar text-sm",children:fe.map((Je,ui)=>{const $t=(Je.penalties||0)*2,Kn=_e(Je),ht=Dn.some(Yn=>Yn.id===Je.id),kn=X(Je);return E.jsxs("div",{className:`p-3 rounded-xl border flex flex-col gap-2 relative overflow-hidden transition-all
                                ${ht?"bg-slate-800 border-yellow-500 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"bg-slate-800 border-slate-700 opacity-80"}`,children:[ht&&E.jsx("div",{className:"absolute inset-0 bg-yellow-500/5 pointer-events-none"}),E.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2 relative z-10",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("span",{className:`font-mono font-bold ${ht?"text-yellow-500":"text-slate-500"}`,children:["#",ui+1]}),E.jsxs("span",{className:"font-bold text-white text-lg flex items-center gap-2",children:[Je.name,ht&&E.jsx(Fm,{size:18,className:"text-yellow-400 fill-yellow-400/20"})]})]}),E.jsx("span",{className:`text-2xl font-black ${ht?"text-yellow-400 scale-110":"text-slate-400"}`,children:Kn})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-slate-400 relative z-10",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Animals Placed:"})," ",E.jsx("span",{className:"text-white font-bold",children:kn})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Animal Pts:"})," ",E.jsx("span",{className:"text-white font-bold",children:Je.score})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Landscape Pts:"})," ",E.jsx("span",{className:"text-white font-bold",children:Je.landscapeScore})]}),$t>0?E.jsxs("div",{className:"flex justify-between text-red-400 font-bold",children:[E.jsx("span",{children:"Penalties:"})," ",E.jsxs("span",{children:["-",$t]})]}):E.jsxs("div",{className:"flex justify-between text-emerald-600/50",children:[E.jsx("span",{children:"Penalties:"})," ",E.jsx("span",{children:"0"})]})]})]},Je.id)})})]})})(),b.hostId===s.uid&&E.jsx("button",{onClick:Ls,className:"bg-slate-700 hover:bg-slate-600 px-6 py-3 rounded-xl font-bold w-full text-white transition-colors",children:"Return to Lobby"})]})})]}),E.jsx("div",{className:"h-64 bg-transparent absolute bottom-0 left-0 right-0 z-40 px-2 pb-2 flex justify-between items-end pointer-events-none",children:E.jsxs("div",{className:"flex gap-2 items-end w-full pointer-events-none",children:[E.jsxs("div",{className:"relative h-46 flex flex-col justify-end gap-2 mb-1 shrink-0 z-50 pointer-events-none items-start",children:[E.jsx("div",{className:`
        absolute top-0 left-0
        pointer-events-auto
        px-3 py-1.5 rounded-full w-30 font-black text-[10px] uppercase tracking-widest shadow-lg backdrop-blur-md border animate-in slide-in-from-left-8
    ${le?"bg-emerald-950/90 text-emerald-300 border-emerald-400":"bg-slate-800/90 text-slate-400 border-slate-600"}
  `,children:E.jsx("div",{className:"flex items-center gap-2",children:le?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-200 animate-pulse"}),"YOUR TURN"]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-500"}),"AWAIT TURN"]})})}),ae.holding.length>0&&E.jsxs("div",{className:`
      w-full px-2 py-2 rounded-xl shadow-2xl flex flex-col items-center gap-2 backdrop-blur-md animate-in slide-in-from-left-4 pointer-events-auto
      ${ae.id===s.uid?"bg-slate-900/90 border border-emerald-500 opacity-90":"bg-slate-900/90 border border-slate-600 opacity-90"}
    `,children:[E.jsx("span",{className:`text-[8px] font-bold uppercase tracking-widest ${ae.id===s.uid?"text-emerald-400":"text-slate-400"}`,children:ae.id===s.uid?"Placing":"Holding"}),E.jsxs("div",{className:"flex items-center gap-1",children:[ae.holding.map((X,_e)=>{const fe=Zi[X],pe=ae.id===s.uid;return E.jsx("button",{onClick:()=>{if(pe){if(!Gn())return;D(_e),ie(null)}},className:`
                w-10 h-10 rounded-full border-2 shadow-lg flex items-center justify-center transition-all 
                ${fe.color} ${fe.border}
                ${pe?"active:scale-90 cursor-pointer hover:opacity-100 hover:scale-105":"cursor-default opacity-100"}
                ${pe&&Ie===_e?"ring-4 ring-white scale-110 z-10":"opacity-90"}
              `,children:E.jsx(fe.icon,{size:18,className:"text-white/80"})},_e)}),ae.id===s.uid&&Ie!==null&&E.jsx("button",{onClick:ko,className:"w-8 h-8 rounded-full border-2 border-red-500 bg-red-900/50 flex items-center justify-center hover:bg-red-800 transition-colors",title:"Discard Token (-2 pts)",children:E.jsx(G1,{size:12,className:"text-red-300"})})]})]}),xe&&E.jsx("button",{onClick:va,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-6 w-full rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm whitespace-nowrap pointer-events-auto animate-bounce",children:"End Turn"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>{Gn()&&ns("TOKENS")},className:`w-14 h-14 rounded-full border-2 shadow-xl flex items-center justify-center transition-all active:scale-90 pointer-events-auto ${le&&!Z.hasDraftedTokens?"bg-cyan-600 border-cyan-400 text-white animate-bounce-subtle":"bg-slate-800 border-slate-600 text-slate-500"}`,children:E.jsx(cm,{size:24})}),E.jsx("button",{onClick:()=>{Gn()&&ns("ANIMALS")},className:`w-14 h-14 rounded-full border-2 shadow-xl flex items-center justify-center transition-all active:scale-90 pointer-events-auto ${le&&!Z.hasDraftedAnimal&&Z.animals.filter(X=>X.slotsFilled<X.maxSlots).length<4?"bg-orange-600 border-orange-400 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`,children:E.jsx(oh,{size:24})})]})]}),E.jsxs("div",{className:"flex-1 flex gap-2 items-end overflow-x-auto pb-4 no-scrollbar h-60 pl-2 pointer-events-none",children:[ae.animals.map((X,_e)=>{const fe=Ki[X.type],pe=_e===G&&ae.id===s.uid,Le=X.slotsFilled>=X.maxSlots,Ze=ae.id===s.uid&&!Le&&Object.values(Z.board).some(Dn=>!Dn.animal&&fe.check(Dn,Z.board));return E.jsxs("button",{onClick:()=>{if(ae.id!==s.uid){Gn();return}D(null),ie(pe?null:_e)},onMouseDown:()=>Tt(X),onMouseUp:nt,onMouseLeave:nt,onTouchStart:()=>Tt(X),onTouchEnd:nt,onTouchMove:xi,className:`
          relative w-32 h-44 bg-slate-900/90 border-2 rounded-xl flex flex-col shadow-xl shrink-0 backdrop-blur-md transition-all duration-300 text-left overflow-hidden pointer-events-auto
          ${pe?"border-yellow-400 ring-2 ring-yellow-500/50 scale-105 z-10 -translate-y-6":"hover:-translate-y-4"}
          ${Ze&&!pe?"border-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.4)] animate-pulse":pe?"":"border-slate-600 hover:border-slate-400"}
          ${Le?"grayscale opacity-75 border-slate-700":""}
        `,children:[E.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-white/10 bg-black/20 h-10 shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(fe.icon,{size:14,className:fe.iconColor}),E.jsx("span",{className:"text-xs font-bold text-white truncate max-w-[70px]",children:fe.name})]}),!Le&&E.jsxs("span",{className:"text-xs font-black text-yellow-500",children:["+",fe.points[Math.min(X.slotsFilled,fe.points.length-1)]]}),Le&&E.jsx("span",{className:"text-[10px] font-bold text-emerald-500 uppercase",children:"Done"})]}),E.jsxs("div",{className:"p-2 flex-1 flex flex-col items-center w-full min-h-0 justify-between bg-gradient-to-b from-slate-800/50 to-transparent",children:[E.jsx("div",{className:"scale-75 origin-center shrink-0",children:E.jsx(Yl,{visual:fe.visual})}),E.jsx("div",{className:"text-[9px] text-slate-300 text-center leading-tight line-clamp-2 px-1 w-full break-words min-h-[24px] flex items-center justify-center font-medium",children:fe.desc}),E.jsx("div",{className:"w-full shrink-0 pt-2",children:E.jsx("div",{className:"flex gap-1 justify-center",children:Array.from({length:X.maxSlots}).map((Dn,Je)=>E.jsx("div",{className:`h-1.5 w-full rounded-full border ${Je<X.slotsFilled?"bg-emerald-500 border-emerald-400 shadow-[0_0_5px_rgba(16,185,129,0.5)]":"bg-slate-700 border-slate-600"}`},Je))})})]})]},X.id)}),ae.animals.length===0&&E.jsx("div",{className:"h-44 w-32 border-2 border-dashed border-slate-700 rounded-xl flex items-center justify-center text-slate-600 text-xs text-center p-4",children:"No Animals Drafted"})]})]})}),E.jsx(gm,{})]})}return null}h2.createRoot(document.getElementById("root")).render(E.jsx(We.StrictMode,{children:E.jsx(dI,{})}));
